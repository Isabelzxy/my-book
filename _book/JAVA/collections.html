
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>JAVA 集合 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="collections.html" />
    
    
    <link rel="prev" href="../DB/transaction.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../DB/sql.html">
            
                <a href="../DB/sql.html">
            
                    
                    SQL优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../DB/db_design.html">
            
                <a href="../DB/db_design.html">
            
                    
                    数据库设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html">
            
                    
                    事务隔离级别,索引,性能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html#事务的四种隔离级别">
            
                    
                    事务的四种隔离级别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html#数据库锁">
            
                    
                    数据库锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html#innodb-如何解决幻读">
            
                    
                    InnoDB 如何解决幻读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html#聚簇索引与非聚簇索引">
            
                    
                    聚簇索引与非聚簇索引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html#mysql分页offset过大性能问题与优化">
            
                    
                    MySQL分页offset过大性能问题与优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../DB/transaction.html">
            
                <a href="../DB/transaction.html#利用explain分析sql语句的性能">
            
                    
                    利用EXPLAIN分析sql语句的性能
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="collections.html">
            
                <a href="collections.html">
            
                    
                    JAVA 集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="collections.html">
            
                <a href="collections.html#1arraylist与linkedlist的实现和区别">
            
                    
                    1.ArrayList与LinkedList的实现和区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="collections.html">
            
                <a href="collections.html#2hashmap了解其数据结构、hash冲突如何解决（链表和红黑树）、扩容时机、扩容时避免rehash的优化">
            
                    
                    2.HashMap了解其数据结构、hash冲突如何解决（链表和红黑树）、扩容时机、扩容时避免rehash的优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="collections.html">
            
                <a href="collections.html#3linkedhashmap了解基本原理、哪两种有序、如何用它实现lru">
            
                    
                    3.LinkedHashMap了解基本原理、哪两种有序、如何用它实现LRU
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="collections.html">
            
                <a href="collections.html#4treemap了解数据结构、了解其key对象为什么必须要实现compare接口、如何用它实现一致性哈希">
            
                    
                    4.TreeMap了解数据结构、了解其key对象为什么必须要实现Compare接口、如何用它实现一致性哈希
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="all_locks.html">
            
                <a href="all_locks.html">
            
                    
                    JAVA 锁
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="all_locks.html">
            
                <a href="all_locks.html#1乐观锁-vs-悲观锁">
            
                    
                    1.乐观锁 VS 悲观锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="all_locks.html">
            
                <a href="all_locks.html#2自旋锁-vs-适应性自旋锁">
            
                    
                    2.自旋锁 VS 适应性自旋锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="all_locks.html">
            
                <a href="all_locks.html#3无锁-vs-偏向锁-vs-轻量级锁-vs-重量级锁">
            
                    
                    3.无锁 VS 偏向锁 VS 轻量级锁 VS 重量级锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="all_locks.html">
            
                <a href="all_locks.html#4公平锁-vs-非公平锁">
            
                    
                    4.公平锁 VS 非公平锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="all_locks.html">
            
                <a href="all_locks.html#5可重入锁-vs-非可重入锁">
            
                    
                    5.可重入锁 VS 非可重入锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="all_locks.html">
            
                <a href="all_locks.html#6独享锁-vs-共享锁">
            
                    
                    6.独享锁 VS 共享锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="all_locks.html">
            
                <a href="all_locks.html#7synchronized-与-reentrantlock-的区别">
            
                    
                    7.Synchronized 与 ReentrantLock 的区别
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="threads.html">
            
                <a href="threads.html">
            
                    
                    JAVA 并发编程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="threads.html">
            
                <a href="threads.html#1了解linkedblockingqueue、arrayblockingqueue、delayqueue、synchronousqueue">
            
                    
                    1.了解LinkedBlockingQueue、ArrayBlockingQueue、DelayQueue、SynchronousQueue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="threads.html">
            
                <a href="threads.html#2了解atomicinteger实现原理、cas适用场景、如何实现乐观锁">
            
                    
                    2.了解AtomicInteger实现原理、CAS适用场景、如何实现乐观锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="threads.html">
            
                <a href="threads.html#3了解aqs内部实现、及依靠aqs的同步类比如reentrantlock、semaphore、countdownlatch、cyclicbarrier等的实现">
            
                    
                    3.了解AQS内部实现、及依靠AQS的同步类比如ReentrantLock、Semaphore、CountDownLatch、CyclicBarrier等的实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="threads.html">
            
                <a href="threads.html#4threadlocal使用场景和内部实现">
            
                    
                    4.ThreadLocal使用场景和内部实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="threads.html">
            
                <a href="threads.html#5线程池的工作原理以及几个重要参数的设置">
            
                    
                    5.线程池的工作原理以及几个重要参数的设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="threads.html">
            
                <a href="threads.html#6如何排查死锁及避免">
            
                    
                    6.如何排查死锁及避免
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="threads.html">
            
                <a href="threads.html#7concurrenthashmap高并发机制">
            
                    
                    7.ConcurrentHashMap高并发机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="threads.html">
            
                <a href="threads.html#8copyonwritearraylist并发容器">
            
                    
                    8.CopyOnWriteArrayList并发容器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="jvm.html">
            
                <a href="jvm.html">
            
                    
                    JVM 分代GC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="jvm.html">
            
                <a href="jvm.html#1jvm基础回顾">
            
                    
                    1.JVM基础回顾
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="jvm.html">
            
                <a href="jvm.html#2常见垃圾回收器">
            
                    
                    2.常见垃圾回收器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="jvm.html">
            
                <a href="jvm.html#3young-gc、old-gc、full-gc、mixed-gc">
            
                    
                    3.young gc、old gc、full gc、mixed gc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="jvm.html">
            
                <a href="jvm.html#4知道tlab吗">
            
                    
                    4.知道TLAB吗
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="jvm.html">
            
                <a href="jvm.html#5知道plab吗">
            
                    
                    5.知道PLAB吗
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="jvm.html">
            
                <a href="jvm.html#6产生-concurrent-mode-failure-真正的原因">
            
                    
                    6.产生 concurrent mode failure 真正的原因
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="jvm.html">
            
                <a href="jvm.html#7新生代的-gc-如何避免全堆扫描">
            
                    
                    7.新生代的 GC 如何避免全堆扫描
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="jvm.html">
            
                <a href="jvm.html#8简单说下-g1-回收流程">
            
                    
                    8.简单说下 G1 回收流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="jvm.html">
            
                <a href="jvm.html#9简单说下-cms-回收流程">
            
                    
                    9.简单说下 cms 回收流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="jvm.html">
            
                <a href="jvm.html#10gc-调优的两大目标是啥">
            
                    
                    10.GC 调优的两大目标是啥
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="jvm.html">
            
                <a href="jvm.html#11gc-如何调优">
            
                    
                    11.GC 如何调优
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="jvm.html">
            
                <a href="jvm.html#12g1垃圾回收器-vs-cms-垃圾回收器">
            
                    
                    12.G1垃圾回收器 vs CMS 垃圾回收器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../Kafka/common_problems.html">
            
                <a href="../Kafka/common_problems.html">
            
                    
                    Kafka 常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Kafka/architecture.html">
            
                <a href="../Kafka/architecture.html">
            
                    
                    Kafka 架构原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../Kafka/kafka.html">
            
                <a href="../Kafka/kafka.html">
            
                    
                    Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html">
            
                    
                    Redis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#1redis为什么是单线程及高并发快的3大原因详解">
            
                    
                    1.Redis为什么是单线程、及高并发快的3大原因详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#2单线程的redis如何利用多核cpu机器">
            
                    
                    2.单线程的redis如何利用多核cpu机器？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#3redis的内存淘汰策略">
            
                    
                    3.Redis的内存淘汰策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#4redis如何持久化数据">
            
                    
                    4.redis如何持久化数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#5redis有哪几种数据结构">
            
                    
                    5.redis有哪几种数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#6redis集群有哪几种形式">
            
                    
                    6.redis集群有哪几种形式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#7有海量key和value都比较小的数据，在redis中如何存储才更省内存">
            
                    
                    7.有海量key和value都比较小的数据，在redis中如何存储才更省内存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#8如何保证redis和db中的数据一致性">
            
                    
                    8.如何保证redis和DB中的数据一致性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.9" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#9如何解决缓存穿透和缓存雪崩">
            
                    
                    9.如何解决缓存穿透和缓存雪崩
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.10" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#10如何用redis实现分布式锁">
            
                    
                    10.如何用redis实现分布式锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.11" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#11redis为什么用跳表而不用平衡树">
            
                    
                    11.Redis为什么用跳表而不用平衡树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.12" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#12redis有哪些优缺点">
            
                    
                    12.Redis有哪些优缺点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.13" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#13redis线程模型">
            
                    
                    13.Redis线程模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.14" data-path="../Redis/redis.html">
            
                <a href="../Redis/redis.html#14bigkey、hotkey问题">
            
                    
                    14.Bigkey、Hotkey问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html">
            
                    
                    MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#1mysql的行锁、表锁、间隙锁、意向锁分别是做什么的">
            
                    
                    1.mysql的行锁、表锁、间隙锁、意向锁分别是做什么的
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#2mysql联合索引最左匹配原则">
            
                    
                    2.Mysql联合索引最左匹配原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#3mysql的慢查询优化方式">
            
                    
                    3.mysql的慢查询优化方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#4mysql的索引结构为什么使用b加树">
            
                    
                    4.MySQL的索引结构为什么使用B+树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#5yyisam-和-innodb-的区别有哪些">
            
                    
                    5.MyISAM 和 InnoDB 的区别有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#6mysql数据库系列之数据库设计原则">
            
                    
                    6.MySQL数据库系列之数据库设计原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.7" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#7mysql三大日志-binlog、redo-log和undo-log">
            
                    
                    7.mysql三大日志-binlog、redo log和undo log
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.8" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#8mysql数据库大表添加字段的方法">
            
                    
                    8.MySql数据库大表添加字段的方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.9" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#9如何实现-mysql-的读写分离">
            
                    
                    9.如何实现 MySQL 的读写分离
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.10" data-path="../MySQL/mysql.html">
            
                <a href="../MySQL/mysql.html#10mysql数据库之分库分表方案">
            
                    
                    10.MySQL数据库之分库分表方案
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html">
            
                    
                    Dubbo
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#1为什么要用dubbo">
            
                    
                    1.为什么要用Dubbo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#2dubbo是什么">
            
                    
                    2.Dubbo是什么
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#3dubbo的使用场景有哪些">
            
                    
                    3.Dubbo的使用场景有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#4dubbo核心功能有哪些">
            
                    
                    4.Dubbo核心功能有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#5dubbo核心组件有哪些">
            
                    
                    5.Dubbo核心组件有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#6dubbo服务器注册与发现的流程">
            
                    
                    6.Dubbo服务器注册与发现的流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.7" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#7dubbo的整体架构设计有哪些分层">
            
                    
                    7.Dubbo的整体架构设计有哪些分层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.8" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#8dubbomonitor实现原理">
            
                    
                    8.DubboMonitor实现原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.9" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#9dubbo和springcloud有什么哪些区别">
            
                    
                    9.Dubbo和SpringCloud有什么哪些区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.10" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#10dubbo有哪些注册中心">
            
                    
                    10.Dubbo有哪些注册中心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.11" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#11dubbo集群提供了哪些负载均衡策略">
            
                    
                    11.Dubbo集群提供了哪些负载均衡策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.12" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#12dubbo的集群容错方案有哪些">
            
                    
                    12.Dubbo的集群容错方案有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.13" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#13默认的容错方案是failovercluster">
            
                    
                    13.默认的容错方案是FailoverCluster
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.14" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#14说说核心的配置有哪些">
            
                    
                    14.说说核心的配置有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.15" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#15dubbo超时设置有哪些方式">
            
                    
                    15.Dubbo超时设置有哪些方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.16" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#16服务调用超时会怎么样">
            
                    
                    16.服务调用超时会怎么样
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.17" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#18dubbo支持哪些协议，它们的优缺点有哪些">
            
                    
                    18.Dubbo支持哪些协议，它们的优缺点有哪些
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.18" data-path="../Dubbo/dubbo.html">
            
                <a href="../Dubbo/dubbo.html#19dubbo支持哪些序列化方式">
            
                    
                    19.Dubbo支持哪些序列化方式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../K8S/k8s.html">
            
                <a href="../K8S/k8s.html">
            
                    
                    K8S
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" >
            
                <span>
            
                    
                    Spring Framework
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" >
            
                <span>
            
                    
                    Spring Boot
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >JAVA 集合</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="java-&#x96C6;&#x5408;">JAVA &#x96C6;&#x5408;</h2>
<h3 id="1arraylist&#x4E0E;linkedlist&#x7684;&#x5B9E;&#x73B0;&#x548C;&#x533A;&#x522B;">1.ArrayList&#x4E0E;LinkedList&#x7684;&#x5B9E;&#x73B0;&#x548C;&#x533A;&#x522B;</h3>
<p>ArrayList&#x548C;LinkedList&#x90FD;&#x662F;&#x5B9E;&#x73B0;&#x4E86;List&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x662F;&#x5143;&#x7D20;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF1B;</p>
<p>&#x4ED6;&#x4EEC;&#x90FD;&#x53EF;&#x4EE5;&#x5BF9;&#x5B58;&#x653E;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x589E;&#x5220;&#x6539;&#x67E5;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x4ED6;&#x4EEC;&#x8FD8;&#x662F;&#x6709;&#x533A;&#x522B;&#x7684;&#x3002;</p>
<p>&#x9664;&#x4E86;&#x5B9E;&#x73B0;&#x5BF9;List&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4ED6;&#x4EEC;&#x8FD8;&#x5B9E;&#x73B0;&#x4E86;&#x5176;&#x4ED6;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7531;&#x6B64;&#x9020;&#x5C31;&#x4E86;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#xFF1B;</p>
<h4 id="arraylist">ArrayList</h4>
<p>ArrayList&#xFF1A;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x7684;&#x5F62;&#x5F0F;&#x5B9E;&#x73B0;&#x4E86;&#x5B58;&#x50A8;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;RandomAccess&#x63A5;&#x53E3;&#xFF0C;&#x5229;&#x7528;&#x6570;&#x7EC4;&#x7684;&#x4E0B;&#x9762;&#x8FDB;&#x884C;&#x5143;&#x7D20;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x5143;&#x7D20;&#x7684;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x975E;&#x5E38;&#x5FEB;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x6240;&#x4EE5;ArrayList&#x5728;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6709;&#x521D;&#x59CB;&#x5927;&#x5C0F;10&#xFF0C;&#x63D2;&#x5165;&#x65B0;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x6269;&#x5BB9;&#xFF0C;&#x6269;&#x5BB9;&#x7684;&#x6B65;&#x957F;&#x662F;0.5&#x500D;&#x539F;&#x5BB9;&#x91CF;&#xFF0C;&#x6269;&#x5BB9;&#x65B9;&#x5F0F;&#x662F;&#x5229;&#x7528;&#x6570;&#x7EC4;&#x7684;&#x590D;&#x5236;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5F00;&#x9500;&#xFF1B;</p>
<p>&#x53E6;&#x5916;&#xFF0C;ArrayList&#x5728;&#x8FDB;&#x884C;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x79FB;&#x52A8;&#x63D2;&#x5165;&#x4F4D;&#x7F6E;&#x4E4B;&#x540E;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x4F4D;&#x7F6E;&#x8D8A;&#x9760;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x4F4D;&#x79FB;&#x7684;&#x5143;&#x7D20;&#x8D8A;&#x591A;&#xFF0C;&#x5F00;&#x9500;&#x8D8A;&#x5927;&#xFF0C;&#x76F8;&#x53CD;&#xFF0C;&#x63D2;&#x5165;&#x4F4D;&#x7F6E;&#x8D8A;&#x9760;&#x540E;&#x7684;&#x8BDD;&#xFF0C;&#x5F00;&#x9500;&#x5C31;&#x8D8A;&#x5C0F;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x6700;&#x540E;&#x9762;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#xFF0C;&#x90A3;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4F4D;&#x79FB;&#xFF1B;</p>
<h4 id="linkedlist">LinkedList</h4>
<p>LinkedList&#xFF1A;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x7ED3;&#x6784;&#x5B9E;&#x73B0;&#x5B58;&#x50A8;&#xFF0C;LinkedList&#x6709;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;&#x4F5C;&#x4E3A;&#x5B58;&#x653E;&#x5143;&#x7D20;&#x7684;&#x5355;&#x5143;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x4E09;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x653E;&#x5143;&#x7D20;&#x672C;&#x8EAB;&#x4EE5;&#x53CA;&#x524D;&#x540E;2&#x4E2A;&#x5355;&#x5143;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x53E6;&#x5916;LinkedList&#x5185;&#x90E8;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;header&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x6765;&#x6807;&#x8BC6;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;LinkedList&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5355;&#x5143;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5355;&#x5143;&#x90FD;&#x4F1A;&#x6307;&#x5411;header&#xFF0C;&#x56E0;&#x6B64;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x7684;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#x3002;</p>
<p>LinkedList&#x662F;&#x91C7;&#x7528;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x5B83;&#x4E5F;&#x5177;&#x6709;&#x94FE;&#x8868;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF08;&#x7ED3;&#x70B9;&#xFF09;&#x7684;&#x5730;&#x5740;&#x4E0D;&#x8FDE;&#x7EED;&#xFF0C;&#x901A;&#x8FC7;&#x5F15;&#x7528;&#x627E;&#x5230;&#x5F53;&#x524D;&#x7ED3;&#x70B9;&#x7684;&#x4E0A;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x548C;&#x4E0B;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#xFF0C;&#x5373;&#x63D2;&#x5165;&#x548C;&#x5220;&#x9664;&#x6548;&#x7387;&#x8F83;&#x9AD8;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5E38;&#x6570;&#x65F6;&#x95F4;&#xFF0C;&#x800C;get&#x548C;set&#x5219;&#x8F83;&#x4E3A;&#x4F4E;&#x6548;&#x3002;
LinkedList&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x4F7F;&#x7528;&#x548C;ArrayList&#x5927;&#x81F4;&#x76F8;&#x540C;&#xFF0C;&#x7531;&#x4E8E;LinkedList&#x662F;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x989D;&#x5916;&#x63D0;&#x4F9B;&#x4E86;&#x5728;&#x5934;&#x90E8;&#x548C;&#x5C3E;&#x90E8;&#x6DFB;&#x52A0;/&#x5220;&#x9664;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;ArrayList&#x6269;&#x5BB9;&#x7684;&#x95EE;&#x9898;&#x4E86;&#x3002;&#x53E6;&#x5916;&#xFF0C;ArrayList&#x548C;LinkedList&#x90FD;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6808;&#x3001;&#x961F;&#x5217;&#x7B49;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4F46;LinkedList&#x672C;&#x8EAB;&#x5B9E;&#x73B0;&#x4E86;&#x961F;&#x5217;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x66F4;&#x63A8;&#x8350;&#x7528;LinkedList&#x6765;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x548C;&#x6808;&#x3002;</p>
<h4 id="arraylist&#x548C;linkedlist&#x533A;&#x522B;">ArrayList&#x548C;LinkedList&#x533A;&#x522B;</h4>
<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;ArrayList&#x548C;LinkedList&#x7684;&#x533A;&#x522B;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;</p>
<ul>
<li><p>1.ArrayList&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#x57FA;&#x4E8E;&#x52A8;&#x6001;&#x6570;&#x7EC4;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C;LinkedList&#x662F;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1B;</p>
</li>
<li><p>2.&#x5BF9;&#x4E8E;&#x968F;&#x673A;&#x8BBF;&#x95EE;get&#x548C;set&#xFF0C;ArrayList&#x8981;&#x4F18;&#x4E8E;LinkedList&#xFF0C;&#x56E0;&#x4E3A;LinkedList&#x8981;&#x79FB;&#x52A8;&#x6307;&#x9488;&#xFF1B;</p>
</li>
<li><p>3.&#x5BF9;&#x4E8E;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x64CD;&#x4F5C;add&#x548C;remove&#xFF0C;&#x4E00;&#x822C;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x8BF4;LinkedList&#x8981;&#x6BD4;ArrayList&#x5FEB;&#xFF0C;&#x56E0;&#x4E3A;ArrayList&#x8981;&#x79FB;&#x52A8;&#x6570;&#x636E;&#x3002;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x5E76;&#x975E;&#x8FD9;&#x6837;&#xFF0C;&#x5BF9;&#x4E8E;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#xFF0C;LinkedList&#x548C;ArrayList&#x5E76;&#x4E0D;&#x80FD;&#x660E;&#x786E;&#x8BF4;&#x660E;&#x8C01;&#x5FEB;&#x8C01;&#x6162;&#xFF0C;&#x4E0B;&#x9762;&#x4F1A;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x3002;</p>
</li>
</ul>
<p>ArrayList&#x4E2D;&#x7684;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x3001;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x90E8;&#x5206;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>//&#x83B7;&#x53D6;index&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x7D20;&#x503C;
public E get(int index) {
    rangeCheck(index); //&#x9996;&#x5148;&#x5224;&#x65AD;index&#x7684;&#x8303;&#x56F4;&#x662F;&#x5426;&#x5408;&#x6CD5;

    return elementData(index);
}

//&#x5C06;index&#x4F4D;&#x7F6E;&#x7684;&#x503C;&#x8BBE;&#x4E3A;element&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x539F;&#x6765;&#x7684;&#x503C;
public E set(int index, E element) {
    rangeCheck(index);

    E oldValue = elementData(index);
    elementData[index] = element;
    return oldValue;
}

//&#x5C06;element&#x6DFB;&#x52A0;&#x5230;ArrayList&#x7684;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;
public void add(int index, E element) {
    rangeCheckForAdd(index);

    ensureCapacityInternal(size + 1);  // Increments modCount!!
    //&#x5C06;index&#x4EE5;&#x53CA;index&#x4E4B;&#x540E;&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;index+1&#x7684;&#x4F4D;&#x7F6E;&#x5F80;&#x540E;&#xFF0C;&#x5373;&#x4ECE;index&#x5F00;&#x59CB;&#x5411;&#x540E;&#x632A;&#x4E86;&#x4E00;&#x4F4D;
    System.arraycopy(elementData, index, elementData, index + 1,
                     size - index); 
    elementData[index] = element; //&#x7136;&#x540E;&#x5728;index&#x5904;&#x63D2;&#x5165;element
    size++;
}

//&#x5220;&#x9664;ArrayList&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x7D20;
public E remove(int index) {
    rangeCheck(index);

    modCount++;
    E oldValue = elementData(index);

    int numMoved = size - index - 1;
    if (numMoved &gt; 0)
        //&#x5411;&#x5DE6;&#x632A;&#x4E00;&#x4F4D;&#xFF0C;index&#x4F4D;&#x7F6E;&#x539F;&#x6765;&#x7684;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x88AB;&#x8986;&#x76D6;&#x4E86;
        System.arraycopy(elementData, index+1, elementData, index,
                         numMoved);
    //&#x591A;&#x51FA;&#x6765;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#x5220;&#x6389;
    elementData[--size] = null; // clear to let GC do its work

    return oldValue;
}
</code></pre><p>LinkedList&#x4E2D;&#x7684;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x3001;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x90E8;&#x5206;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>//&#x83B7;&#x5F97;&#x7B2C;index&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x503C;
public E get(int index) {
    checkElementIndex(index);
    return node(index).item;
}

//&#x8BBE;&#x7F6E;&#x7B2C;index&#x5143;&#x7D20;&#x7684;&#x503C;
public E set(int index, E element) {
    checkElementIndex(index);
    Node&lt;E&gt; x = node(index);
    E oldVal = x.item;
    x.item = element;
    return oldVal;
}

//&#x5728;index&#x4E2A;&#x8282;&#x70B9;&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x8282;&#x70B9;
public void add(int index, E element) {
    checkPositionIndex(index);

    if (index == size)
        linkLast(element);
    else
        linkBefore(element, node(index));
}

//&#x5220;&#x9664;&#x7B2C;index&#x4E2A;&#x8282;&#x70B9;
public E remove(int index) {
    checkElementIndex(index);
    return unlink(node(index));
}

//&#x5B9A;&#x4F4D;index&#x5904;&#x7684;&#x8282;&#x70B9;
Node&lt;E&gt; node(int index) {
    // assert isElementIndex(index);
    //index&lt;size/2&#x65F6;&#xFF0C;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x627E;
    if (index &lt; (size &gt;&gt; 1)) {
        Node&lt;E&gt; x = first;
        for (int i = 0; i &lt; index; i++)
            x = x.next;
        return x;
    } else { //index&gt;=size/2&#x65F6;&#xFF0C;&#x4ECE;&#x5C3E;&#x5F00;&#x59CB;&#x627E;
        Node&lt;E&gt; x = last;
        for (int i = size - 1; i &gt; index; i--)
            x = x.prev;
        return x;
    }
}
</code></pre><p>&#x4ECE;&#x6E90;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;ArrayList&#x60F3;&#x8981;get(int index)&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;index&#x4F4D;&#x7F6E;&#x4E0A;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x800C;LinkedList&#x9700;&#x8981;&#x901A;&#x8FC7;for&#x5FAA;&#x73AF;&#x8FDB;&#x884C;&#x67E5;&#x627E;&#xFF0C;&#x867D;&#x7136;LinkedList&#x5DF2;&#x7ECF;&#x5728;&#x67E5;&#x627E;&#x65B9;&#x6CD5;&#x4E0A;&#x505A;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x6BD4;&#x5982;index &lt; size / 2&#xFF0C;&#x5219;&#x4ECE;&#x5DE6;&#x8FB9;&#x5F00;&#x59CB;&#x67E5;&#x627E;&#xFF0C;&#x53CD;&#x4E4B;&#x4ECE;&#x53F3;&#x8FB9;&#x5F00;&#x59CB;&#x67E5;&#x627E;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x6BD4;ArrayList&#x8981;&#x6162;&#x3002;&#x8FD9;&#x70B9;&#x662F;&#x6BCB;&#x5EB8;&#x7F6E;&#x7591;&#x7684;&#x3002;</p>
<p>ArrayList&#x60F3;&#x8981;&#x5728;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x63D2;&#x5165;&#x6216;&#x5220;&#x9664;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x8017;&#x65F6;&#x7684;&#x662F;System.arraycopy&#x52A8;&#x4F5C;&#xFF0C;&#x4F1A;&#x79FB;&#x52A8;index&#x540E;&#x9762;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#xFF1B;LinkedList&#x4E3B;&#x8017;&#x65F6;&#x7684;&#x662F;&#x8981;&#x5148;&#x901A;&#x8FC7;for&#x5FAA;&#x73AF;&#x627E;&#x5230;index&#xFF0C;&#x7136;&#x540E;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6216;&#x5220;&#x9664;&#x3002;&#x8FD9;&#x5C31;&#x5BFC;&#x81F4;&#x4E86;&#x4E24;&#x8005;&#x5E76;&#x975E;&#x4E00;&#x5B9A;&#x8C01;&#x5FEB;&#x8C01;&#x6162;&#xFF0C;&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x6765;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x4E24;&#x8005;&#x63D2;&#x5165;&#x7684;&#x901F;&#x5EA6;&#xFF1A;</p>
<p>&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x56E0;&#x7D20;&#x51B3;&#x5B9A;&#x4ED6;&#x4EEC;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x63D2;&#x5165;&#x7684;&#x6570;&#x636E;&#x91CF;&#x548C;&#x63D2;&#x5165;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x7A0B;&#x5E8F;&#x91CC;&#x6539;&#x53D8;&#x8FD9;&#x4E24;&#x4E2A;&#x56E0;&#x7D20;&#x6765;&#x6D4B;&#x8BD5;&#x5B83;&#x4EEC;&#x7684;&#x6548;&#x7387;&#x3002;
&#x5F53;&#x6570;&#x636E;&#x91CF;&#x8F83;&#x5C0F;&#x65F6;&#xFF0C;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x5927;&#x7EA6;&#x5C0F;&#x4E8E;30&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E24;&#x8005;&#x6548;&#x7387;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x6CA1;&#x6709;&#x663E;&#x8457;&#x533A;&#x522B;&#xFF1B;&#x5F53;&#x6570;&#x636E;&#x91CF;&#x8F83;&#x5927;&#x65F6;&#xFF0C;&#x5927;&#x7EA6;&#x5728;&#x5BB9;&#x91CF;&#x7684;1/10&#x5904;&#x5F00;&#x59CB;&#xFF0C;LinkedList&#x7684;&#x6548;&#x7387;&#x5C31;&#x5F00;&#x59CB;&#x6CA1;&#x6709;ArrayList&#x6548;&#x7387;&#x9AD8;&#x4E86;&#xFF0C;&#x7279;&#x522B;&#x5230;&#x4E00;&#x534A;&#x4EE5;&#x53CA;&#x540E;&#x534A;&#x7684;&#x4F4D;&#x7F6E;&#x63D2;&#x5165;&#x65F6;&#xFF0C;LinkedList&#x6548;&#x7387;&#x660E;&#x663E;&#x8981;&#x4F4E;&#x4E8E;ArrayList&#xFF0C;&#x800C;&#x4E14;&#x6570;&#x636E;&#x91CF;&#x8D8A;&#x5927;&#xFF0C;&#x8D8A;&#x660E;&#x663E;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x5F53;&#x63D2;&#x5165;&#x7684;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5C0F;&#x65F6;&#xFF0C;&#x4E24;&#x8005;&#x533A;&#x522B;&#x4E0D;&#x592A;&#x5927;&#xFF0C;&#x5F53;&#x63D2;&#x5165;&#x7684;&#x6570;&#x636E;&#x91CF;&#x5927;&#x65F6;&#xFF0C;&#x5927;&#x7EA6;&#x5728;&#x5BB9;&#x91CF;&#x7684;1/10&#x4E4B;&#x524D;&#xFF0C;LinkedList&#x4F1A;&#x4F18;&#x4E8E;ArrayList&#xFF0C;&#x5728;&#x5176;&#x540E;&#x5C31;&#x52A3;&#x4E0E;ArrayList&#xFF0C;&#x4E14;&#x8D8A;&#x9760;&#x8FD1;&#x540E;&#x9762;&#x8D8A;&#x5DEE;&#x3002;&#x6240;&#x4EE5;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#xFF0C;&#x4E00;&#x822C;&#x9996;&#x9009;&#x7528;ArrayList&#xFF0C;&#x7531;&#x4E8E;LinkedList&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6808;&#x3001;&#x961F;&#x5217;&#x4EE5;&#x53CA;&#x53CC;&#x7AEF;&#x961F;&#x5217;&#x7B49;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x7279;&#x5B9A;&#x9700;&#x8981;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;LinkedList&#xFF0C;&#x5F53;&#x7136;&#x54AF;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E24;&#x8005;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x89C6;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x53BB;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#xFF1B;&#x5F53;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x9760;&#x524D;&#x7684;&#x90E8;&#x5206;&#x63D2;&#x5165;&#x6216;&#x5220;&#x9664;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E5F;&#x53EF;&#x4EE5;&#x9009;&#x7528;LinkedList&#xFF0C;&#x53CD;&#x4E4B;&#x9009;&#x62E9;ArrayList&#x53CD;&#x800C;&#x6548;&#x7387;&#x66F4;&#x9AD8;&#x3002;</p>
<h3 id="2hashmap&#x4E86;&#x89E3;&#x5176;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3001;hash&#x51B2;&#x7A81;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF08;&#x94FE;&#x8868;&#x548C;&#x7EA2;&#x9ED1;&#x6811;&#xFF09;&#x3001;&#x6269;&#x5BB9;&#x65F6;&#x673A;&#x3001;&#x6269;&#x5BB9;&#x65F6;&#x907F;&#x514D;rehash&#x7684;&#x4F18;&#x5316;">2.HashMap&#x4E86;&#x89E3;&#x5176;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3001;hash&#x51B2;&#x7A81;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF08;&#x94FE;&#x8868;&#x548C;&#x7EA2;&#x9ED1;&#x6811;&#xFF09;&#x3001;&#x6269;&#x5BB9;&#x65F6;&#x673A;&#x3001;&#x6269;&#x5BB9;&#x65F6;&#x907F;&#x514D;rehash&#x7684;&#x4F18;&#x5316;</h3>
<p>HashMap&#x662F;Java&#x7A0B;&#x5E8F;&#x5458;&#x4F7F;&#x7528;&#x9891;&#x7387;&#x6700;&#x9AD8;&#x7684;&#x7528;&#x4E8E;&#x6620;&#x5C04;(&#x952E;&#x503C;&#x5BF9;)&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x968F;&#x7740;JDK&#xFF08;Java Developmet Kit&#xFF09;&#x7248;&#x672C;&#x7684;&#x66F4;&#x65B0;&#xFF0C;JDK1.8&#x5BF9;HashMap&#x5E95;&#x5C42;&#x7684;&#x5B9E;&#x73B0;&#x8FDB;&#x884C;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x4F8B;&#x5982;&#x5F15;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x548C;&#x6269;&#x5BB9;&#x7684;&#x4F18;&#x5316;&#x7B49;&#x3002;&#x672C;&#x6587;&#x7ED3;&#x5408;JDK1.7&#x548C;JDK1.8&#x7684;&#x533A;&#x522B;&#xFF0C;&#x6DF1;&#x5165;&#x63A2;&#x8BA8;HashMap&#x7684;&#x7ED3;&#x6784;&#x5B9E;&#x73B0;&#x548C;&#x529F;&#x80FD;&#x539F;&#x7406;&#x3002;</p>
<p>Java&#x4E3A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x6620;&#x5C04;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;java.util.Map&#xFF0C;&#x6B64;&#x63A5;&#x53E3;&#x4E3B;&#x8981;&#x6709;&#x56DB;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5206;&#x522B;&#x662F;HashMap&#x3001;Hashtable&#x3001;LinkedHashMap&#x548C;TreeMap&#xFF0C;&#x7C7B;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="../_images/java_map_1.png" alt="map_1"></p>
<p>&#x4E0B;&#x9762;&#x9488;&#x5BF9;&#x5404;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x7279;&#x70B9;&#x505A;&#x4E00;&#x4E9B;&#x8BF4;&#x660E;&#xFF1A;</p>
<p>(1) HashMap&#xFF1A;&#x5B83;&#x6839;&#x636E;&#x952E;&#x7684;hashCode&#x503C;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B9A;&#x4F4D;&#x5230;&#x5B83;&#x7684;&#x503C;&#xFF0C;&#x56E0;&#x800C;&#x5177;&#x6709;&#x5F88;&#x5FEB;&#x7684;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x4F46;&#x904D;&#x5386;&#x987A;&#x5E8F;&#x5374;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#x3002; HashMap&#x6700;&#x591A;&#x53EA;&#x5141;&#x8BB8;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x952E;&#x4E3A;null&#xFF0C;&#x5141;&#x8BB8;&#x591A;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x503C;&#x4E3A;null&#x3002;HashMap&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x5373;&#x4EFB;&#x4E00;&#x65F6;&#x523B;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x5199;HashMap&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x53EF;&#x4EE5;&#x7528; Collections&#x7684;synchronizedMap&#x65B9;&#x6CD5;&#x4F7F;HashMap&#x5177;&#x6709;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;ConcurrentHashMap&#x3002;</p>
<p>(2) Hashtable&#xFF1A;Hashtable&#x662F;&#x9057;&#x7559;&#x7C7B;&#xFF0C;&#x5F88;&#x591A;&#x6620;&#x5C04;&#x7684;&#x5E38;&#x7528;&#x529F;&#x80FD;&#x4E0E;HashMap&#x7C7B;&#x4F3C;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x627F;&#x81EA;Dictionary&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4EFB;&#x4E00;&#x65F6;&#x95F4;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x80FD;&#x5199;Hashtable&#xFF0C;&#x5E76;&#x53D1;&#x6027;&#x4E0D;&#x5982;ConcurrentHashMap&#xFF0C;&#x56E0;&#x4E3A;ConcurrentHashMap&#x5F15;&#x5165;&#x4E86;&#x5206;&#x6BB5;&#x9501;&#x3002;Hashtable&#x4E0D;&#x5EFA;&#x8BAE;&#x5728;&#x65B0;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x573A;&#x5408;&#x53EF;&#x4EE5;&#x7528;HashMap&#x66FF;&#x6362;&#xFF0C;&#x9700;&#x8981;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x573A;&#x5408;&#x53EF;&#x4EE5;&#x7528;ConcurrentHashMap&#x66FF;&#x6362;&#x3002;</p>
<p>(3) LinkedHashMap&#xFF1A;LinkedHashMap&#x662F;HashMap&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;&#xFF0C;&#x4FDD;&#x5B58;&#x4E86;&#x8BB0;&#x5F55;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#xFF0C;&#x5728;&#x7528;Iterator&#x904D;&#x5386;LinkedHashMap&#x65F6;&#xFF0C;&#x5148;&#x5F97;&#x5230;&#x7684;&#x8BB0;&#x5F55;&#x80AF;&#x5B9A;&#x662F;&#x5148;&#x63D2;&#x5165;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6784;&#x9020;&#x65F6;&#x5E26;&#x53C2;&#x6570;&#xFF0C;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x6B21;&#x5E8F;&#x6392;&#x5E8F;&#x3002;</p>
<p>(4) TreeMap&#xFF1A;TreeMap&#x5B9E;&#x73B0;SortedMap&#x63A5;&#x53E3;&#xFF0C;&#x80FD;&#x591F;&#x628A;&#x5B83;&#x4FDD;&#x5B58;&#x7684;&#x8BB0;&#x5F55;&#x6839;&#x636E;&#x952E;&#x6392;&#x5E8F;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x6309;&#x952E;&#x503C;&#x7684;&#x5347;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x6392;&#x5E8F;&#x7684;&#x6BD4;&#x8F83;&#x5668;&#xFF0C;&#x5F53;&#x7528;Iterator&#x904D;&#x5386;TreeMap&#x65F6;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x8BB0;&#x5F55;&#x662F;&#x6392;&#x8FC7;&#x5E8F;&#x7684;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x6392;&#x5E8F;&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;TreeMap&#x3002;&#x5728;&#x4F7F;&#x7528;TreeMap&#x65F6;&#xFF0C;key&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#x6216;&#x8005;&#x5728;&#x6784;&#x9020;TreeMap&#x4F20;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Comparator&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x629B;&#x51FA;java.lang.ClassCastException&#x7C7B;&#x578B;&#x7684;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x56DB;&#x79CD;Map&#x7C7B;&#x578B;&#x7684;&#x7C7B;&#xFF0C;&#x8981;&#x6C42;&#x6620;&#x5C04;&#x4E2D;&#x7684;key&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x5BF9;&#x8C61;&#x3002;&#x4E0D;&#x53EF;&#x53D8;&#x5BF9;&#x8C61;&#x662F;&#x8BE5;&#x5BF9;&#x8C61;&#x5728;&#x521B;&#x5EFA;&#x540E;&#x5B83;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x4E0D;&#x4F1A;&#x88AB;&#x6539;&#x53D8;&#x3002;&#x5982;&#x679C;&#x5BF9;&#x8C61;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;Map&#x5BF9;&#x8C61;&#x5F88;&#x53EF;&#x80FD;&#x5C31;&#x5B9A;&#x4F4D;&#x4E0D;&#x5230;&#x6620;&#x5C04;&#x7684;&#x4F4D;&#x7F6E;&#x4E86;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x6BD4;&#x8F83;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E86;HashMap&#x662F;Java&#x7684;Map&#x5BB6;&#x65CF;&#x4E2D;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x6210;&#x5458;&#xFF0C;&#x9274;&#x4E8E;&#x5B83;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x5927;&#x591A;&#x6570;&#x573A;&#x666F;&#x7684;&#x4F7F;&#x7528;&#x6761;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x4F7F;&#x7528;&#x9891;&#x5EA6;&#x6700;&#x9AD8;&#x7684;&#x4E00;&#x4E2A;&#x3002;&#x4E0B;&#x6587;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x7ED3;&#x5408;&#x6E90;&#x7801;&#xFF0C;&#x4ECE;&#x5B58;&#x50A8;&#x7ED3;&#x6784;&#x3001;&#x5E38;&#x7528;&#x65B9;&#x6CD5;&#x5206;&#x6790;&#x3001;&#x6269;&#x5BB9;&#x4EE5;&#x53CA;&#x5B89;&#x5168;&#x6027;&#x7B49;&#x65B9;&#x9762;&#x6DF1;&#x5165;&#x8BB2;&#x89E3;HashMap&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;</p>
<h4 id="&#x5185;&#x90E8;&#x5B9E;&#x73B0;">&#x5185;&#x90E8;&#x5B9E;&#x73B0;</h4>
<h5 id="&#x5B58;&#x50A8;&#x7ED3;&#x6784;-&#x5B57;&#x6BB5;">&#x5B58;&#x50A8;&#x7ED3;&#x6784;-&#x5B57;&#x6BB5;</h5>
<p>&#x4ECE;&#x7ED3;&#x6784;&#x5B9E;&#x73B0;&#x6765;&#x8BB2;&#xFF0C;HashMap&#x662F;&#x6570;&#x7EC4;+&#x94FE;&#x8868;+&#x7EA2;&#x9ED1;&#x6811;&#xFF08;JDK1.8&#x589E;&#x52A0;&#x4E86;&#x7EA2;&#x9ED1;&#x6811;&#x90E8;&#x5206;&#xFF09;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x4E0B;&#x5982;&#x6240;&#x793A;&#x3002;</p>
<p><img src="../_images/java_map_2.png" alt="map_2"></p>
<p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x8BB2;&#x660E;&#x767D;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x6570;&#x636E;&#x5E95;&#x5C42;&#x5177;&#x4F53;&#x5B58;&#x50A8;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x8FD9;&#x6837;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x70B9;&#x5462;&#xFF1F;</p>
<p>(1) &#x4ECE;&#x6E90;&#x7801;&#x53EF;&#x77E5;&#xFF0C;HashMap&#x7C7B;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x5C31;&#x662F; Node[] table&#xFF0C;&#x5373;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#xFF0C;&#x660E;&#x663E;&#x5B83;&#x662F;&#x4E00;&#x4E2A;Node&#x7684;&#x6570;&#x7EC4;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;Node[JDK1.8]&#x662F;&#x4F55;&#x7269;&#x3002;</p>
<pre><code>static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
        final int hash;    //&#x7528;&#x6765;&#x5B9A;&#x4F4D;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;
        final K key;
        V value;
        Node&lt;K,V&gt; next;   //&#x94FE;&#x8868;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;node

        Node(int hash, K key, V value, Node&lt;K,V&gt; next) { ... }
        public final K getKey(){ ... }
        public final V getValue() { ... }
        public final String toString() { ... }
        public final int hashCode() { ... }
        public final V setValue(V newValue) { ... }
        public final boolean equals(Object o) { ... }
}
</code></pre><p>Node&#x662F;HashMap&#x7684;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;Map.Entry&#x63A5;&#x53E3;&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6620;&#x5C04;(&#x952E;&#x503C;&#x5BF9;)&#x3002;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x9ED1;&#x8272;&#x5706;&#x70B9;&#x5C31;&#x662F;&#x4E00;&#x4E2A;Node&#x5BF9;&#x8C61;&#x3002;</p>
<p>(2) HashMap&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x5B58;&#x50A8;&#x7684;&#x3002;&#x54C8;&#x5E0C;&#x8868;&#x4E3A;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x548C;&#x94FE;&#x5730;&#x5740;&#x6CD5;&#x7B49;&#x6765;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;Java&#x4E2D;HashMap&#x91C7;&#x7528;&#x4E86;<strong>&#x94FE;&#x5730;&#x5740;&#x6CD5;</strong>&#x3002;&#x94FE;&#x5730;&#x5740;&#x6CD5;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x6570;&#x7EC4;&#x52A0;&#x94FE;&#x8868;&#x7684;&#x7ED3;&#x5408;&#x3002;&#x5728;&#x6BCF;&#x4E2A;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x4E0A;&#x90FD;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x88AB;Hash&#x540E;&#xFF0C;&#x5F97;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x653E;&#x5728;&#x5BF9;&#x5E94;&#x4E0B;&#x6807;&#x5143;&#x7D20;&#x7684;&#x94FE;&#x8868;&#x4E0A;&#x3002;&#x4F8B;&#x5982;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#xFF1A;</p>
<p><code>map.put(&quot;hello&quot;,&quot;&#x5C0F;&#x7F8E;&quot;);</code></p>
<p>&#x7CFB;&#x7EDF;&#x5C06;&#x8C03;&#x7528;&#x201D;hello&#x201D;&#x8FD9;&#x4E2A;key&#x7684;hashCode()&#x65B9;&#x6CD5;&#x5F97;&#x5230;&#x5176;hashCode &#x503C;&#xFF08;&#x8BE5;&#x65B9;&#x6CD5;&#x9002;&#x7528;&#x4E8E;&#x6BCF;&#x4E2A;Java&#x5BF9;&#x8C61;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x901A;&#x8FC7;Hash&#x7B97;&#x6CD5;&#x7684;&#x540E;&#x4E24;&#x6B65;&#x8FD0;&#x7B97;&#xFF08;&#x9AD8;&#x4F4D;&#x8FD0;&#x7B97;&#x548C;&#x53D6;&#x6A21;&#x8FD0;&#x7B97;&#xFF0C;&#x4E0B;&#x6587;&#x6709;&#x4ECB;&#x7ECD;&#xFF09;&#x6765;&#x5B9A;&#x4F4D;&#x8BE5;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#xFF0C;&#x6709;&#x65F6;&#x4E24;&#x4E2A;key&#x4F1A;&#x5B9A;&#x4F4D;&#x5230;&#x76F8;&#x540C;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x8868;&#x793A;&#x53D1;&#x751F;&#x4E86;Hash&#x78B0;&#x649E;&#x3002;&#x5F53;&#x7136;Hash&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x8D8A;&#x5206;&#x6563;&#x5747;&#x5300;&#xFF0C;Hash&#x78B0;&#x649E;&#x7684;&#x6982;&#x7387;&#x5C31;&#x8D8A;&#x5C0F;&#xFF0C;map&#x7684;&#x5B58;&#x53D6;&#x6548;&#x7387;&#x5C31;&#x4F1A;&#x8D8A;&#x9AD8;&#x3002;</p>
<p>&#x5982;&#x679C;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x5F88;&#x5927;&#xFF0C;&#x5373;&#x4F7F;&#x8F83;&#x5DEE;&#x7684;Hash&#x7B97;&#x6CD5;&#x4E5F;&#x4F1A;&#x6BD4;&#x8F83;&#x5206;&#x6563;&#xFF0C;&#x5982;&#x679C;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x6570;&#x7EC4;&#x5F88;&#x5C0F;&#xFF0C;&#x5373;&#x4F7F;&#x597D;&#x7684;Hash&#x7B97;&#x6CD5;&#x4E5F;&#x4F1A;&#x51FA;&#x73B0;&#x8F83;&#x591A;&#x78B0;&#x649E;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x9700;&#x8981;&#x5728;&#x7A7A;&#x95F4;&#x6210;&#x672C;&#x548C;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x4E4B;&#x95F4;&#x6743;&#x8861;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5728;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x786E;&#x5B9A;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5E76;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x8BBE;&#x8BA1;&#x597D;&#x7684;hash&#x7B97;&#x6CD5;&#x51CF;&#x5C11;Hash&#x78B0;&#x649E;&#x3002;&#x90A3;&#x4E48;&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x6765;&#x63A7;&#x5236;map&#x4F7F;&#x5F97;Hash&#x78B0;&#x649E;&#x7684;&#x6982;&#x7387;&#x53C8;&#x5C0F;&#xFF0C;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#xFF08;Node[] table&#xFF09;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x53C8;&#x5C11;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x5C31;&#x662F;&#x597D;&#x7684;Hash&#x7B97;&#x6CD5;&#x548C;&#x6269;&#x5BB9;&#x673A;&#x5236;&#x3002;</p>
<p>&#x5728;&#x7406;&#x89E3;Hash&#x548C;&#x6269;&#x5BB9;&#x6D41;&#x7A0B;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x5148;&#x4E86;&#x89E3;&#x4E0B;HashMap&#x7684;&#x51E0;&#x4E2A;&#x5B57;&#x6BB5;&#x3002;&#x4ECE;HashMap&#x7684;&#x9ED8;&#x8BA4;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6E90;&#x7801;&#x53EF;&#x77E5;&#xFF0C;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5C31;&#x662F;&#x5BF9;&#x4E0B;&#x9762;&#x51E0;&#x4E2A;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>int threshold;             // &#x6240;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;key-value&#x5BF9;&#x6781;&#x9650; 
final float loadFactor;    // &#x8D1F;&#x8F7D;&#x56E0;&#x5B50;
int modCount;  
int size;
</code></pre><p>&#x9996;&#x5148;&#xFF0C;Node[] table&#x7684;<strong>&#x521D;&#x59CB;&#x5316;&#x957F;&#x5EA6;length(&#x9ED8;&#x8BA4;&#x503C;&#x662F;16)</strong>&#xFF0C;Load factor&#x4E3A;<strong>&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;(&#x9ED8;&#x8BA4;&#x503C;&#x662F;0.75)</strong>&#xFF0C;threshold&#x662F;HashMap&#x6240;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;&#x6700;&#x5927;&#x6570;&#x636E;&#x91CF;&#x7684;Node(&#x952E;&#x503C;&#x5BF9;)&#x4E2A;&#x6570;&#x3002;threshold = length * Load factor&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5728;&#x6570;&#x7EC4;&#x5B9A;&#x4E49;&#x597D;&#x957F;&#x5EA6;&#x4E4B;&#x540E;&#xFF0C;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x8D8A;&#x5927;&#xFF0C;&#x6240;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4E2A;&#x6570;&#x8D8A;&#x591A;&#x3002;</p>
<p>&#x7ED3;&#x5408;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x5B9A;&#x4E49;&#x516C;&#x5F0F;&#x53EF;&#x77E5;&#xFF0C;threshold&#x5C31;&#x662F;&#x5728;&#x6B64;Load factor&#x548C;length(&#x6570;&#x7EC4;&#x957F;&#x5EA6;)&#x5BF9;&#x5E94;&#x4E0B;&#x5141;&#x8BB8;&#x7684;&#x6700;&#x5927;&#x5143;&#x7D20;&#x6570;&#x76EE;&#xFF0C;<strong>&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x76EE;&#x5C31;&#x91CD;&#x65B0;resize(&#x6269;&#x5BB9;)&#xFF0C;&#x6269;&#x5BB9;&#x540E;&#x7684;HashMap&#x5BB9;&#x91CF;&#x662F;&#x4E4B;&#x524D;&#x5BB9;&#x91CF;&#x7684;&#x4E24;&#x500D;</strong>&#x3002;&#x9ED8;&#x8BA4;&#x7684;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;0.75&#x662F;&#x5BF9;&#x7A7A;&#x95F4;&#x548C;&#x65F6;&#x95F4;&#x6548;&#x7387;&#x7684;&#x4E00;&#x4E2A;&#x5E73;&#x8861;&#x9009;&#x62E9;&#xFF0C;&#x5EFA;&#x8BAE;&#x5927;&#x5BB6;&#x4E0D;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x9664;&#x975E;&#x5728;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5F88;&#x591A;&#x800C;&#x53C8;&#x5BF9;&#x65F6;&#x95F4;&#x6548;&#x7387;&#x8981;&#x6C42;&#x5F88;&#x9AD8;&#xFF0C;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;Load factor&#x7684;&#x503C;&#xFF1B;&#x76F8;&#x53CD;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7D27;&#x5F20;&#x800C;&#x5BF9;&#x65F6;&#x95F4;&#x6548;&#x7387;&#x8981;&#x6C42;&#x4E0D;&#x9AD8;&#xFF0C;&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;loadFactor&#x7684;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x53EF;&#x4EE5;&#x5927;&#x4E8E;1&#x3002;</p>
<p>size&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x5176;&#x5B9E;&#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x662F;HashMap&#x4E2D;&#x5B9E;&#x9645;&#x5B58;&#x5728;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;&#x3002;&#x6CE8;&#x610F;&#x548C;table&#x7684;&#x957F;&#x5EA6;length&#x3001;&#x5BB9;&#x7EB3;&#x6700;&#x5927;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;threshold&#x7684;&#x533A;&#x522B;&#x3002;&#x800C;modCount&#x5B57;&#x6BB5;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x8BB0;&#x5F55;HashMap&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8FED;&#x4EE3;&#x7684;&#x5FEB;&#x901F;&#x5931;&#x8D25;&#x3002;&#x5F3A;&#x8C03;&#x4E00;&#x70B9;&#xFF0C;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x6307;&#x7684;&#x662F;&#x7ED3;&#x6784;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x4F8B;&#x5982;put&#x65B0;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x4F46;&#x662F;&#x67D0;&#x4E2A;key&#x5BF9;&#x5E94;&#x7684;value&#x503C;&#x88AB;&#x8986;&#x76D6;&#x4E0D;&#x5C5E;&#x4E8E;&#x7ED3;&#x6784;&#x53D8;&#x5316;&#x3002;</p>
<p>&#x5728;HashMap&#x4E2D;&#xFF0C;<strong>&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;table&#x7684;&#x957F;&#x5EA6;length&#x5927;&#x5C0F;&#x5FC5;&#x987B;&#x4E3A;2&#x7684;n&#x6B21;&#x65B9;(&#x4E00;&#x5B9A;&#x662F;&#x5408;&#x6570;)</strong>&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x89C4;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x5E38;&#x89C4;&#x7684;&#x8BBE;&#x8BA1;&#x662F;&#x628A;&#x6876;&#x7684;&#x5927;&#x5C0F;&#x8BBE;&#x8BA1;&#x4E3A;&#x7D20;&#x6570;&#x3002;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x7D20;&#x6570;&#x5BFC;&#x81F4;&#x51B2;&#x7A81;&#x7684;&#x6982;&#x7387;&#x8981;&#x5C0F;&#x4E8E;&#x5408;&#x6570;&#xFF0C;&#x5177;&#x4F53;&#x8BC1;&#x660E;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;Hashtable&#x521D;&#x59CB;&#x5316;&#x6876;&#x5927;&#x5C0F;&#x4E3A;11&#xFF0C;&#x5C31;&#x662F;&#x6876;&#x5927;&#x5C0F;&#x8BBE;&#x8BA1;&#x4E3A;&#x7D20;&#x6570;&#x7684;&#x5E94;&#x7528;&#xFF08;Hashtable&#x6269;&#x5BB9;&#x540E;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x8FD8;&#x662F;&#x7D20;&#x6570;&#xFF09;&#x3002;HashMap&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x975E;&#x5E38;&#x89C4;&#x8BBE;&#x8BA1;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x53D6;&#x6A21;&#x548C;&#x6269;&#x5BB9;&#x65F6;&#x505A;&#x4F18;&#x5316;&#xFF0C;&#x540C;&#x65F6;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x51B2;&#x7A81;&#xFF0C;HashMap&#x5B9A;&#x4F4D;&#x54C8;&#x5E0C;&#x6876;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x65F6;&#xFF0C;&#x4E5F;&#x52A0;&#x5165;&#x4E86;&#x9AD8;&#x4F4D;&#x53C2;&#x4E0E;&#x8FD0;&#x7B97;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5373;&#x4F7F;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x548C;Hash&#x7B97;&#x6CD5;&#x8BBE;&#x8BA1;&#x7684;&#x518D;&#x5408;&#x7406;&#xFF0C;&#x4E5F;&#x514D;&#x4E0D;&#x4E86;&#x4F1A;&#x51FA;&#x73B0;&#x62C9;&#x94FE;&#x8FC7;&#x957F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x65E6;&#x51FA;&#x73B0;&#x62C9;&#x94FE;&#x8FC7;&#x957F;&#xFF0C;&#x5219;&#x4F1A;&#x4E25;&#x91CD;&#x5F71;&#x54CD;HashMap&#x7684;&#x6027;&#x80FD;&#x3002;&#x4E8E;&#x662F;&#xFF0C;<strong>&#x5728;JDK1.8&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x505A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x5F15;&#x5165;&#x4E86;&#x7EA2;&#x9ED1;&#x6811;&#x3002;&#x800C;&#x5F53;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x592A;&#x957F;&#xFF08;&#x9ED8;&#x8BA4;&#x8D85;&#x8FC7;8&#xFF09;&#x65F6;&#xFF0C;&#x94FE;&#x8868;&#x5C31;&#x8F6C;&#x6362;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5229;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x5FEB;&#x901F;&#x589E;&#x5220;&#x6539;&#x67E5;&#x7684;&#x7279;&#x70B9;&#x63D0;&#x9AD8;HashMap&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5176;&#x4E2D;&#x4F1A;&#x7528;&#x5230;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x63D2;&#x5165;&#x3001;&#x5220;&#x9664;&#x3001;&#x67E5;&#x627E;&#x7B49;&#x7B97;&#x6CD5;</strong>&#x3002;&#x672C;&#x6587;&#x4E0D;&#x518D;&#x5BF9;&#x7EA2;&#x9ED1;&#x6811;&#x5C55;&#x5F00;&#x8BA8;&#x8BBA;&#xFF0C;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x7EA2;&#x9ED1;&#x6811;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x3002;</p>
<h4 id="&#x529F;&#x80FD;&#x5B9E;&#x73B0;-&#x65B9;&#x6CD5;">&#x529F;&#x80FD;&#x5B9E;&#x73B0;-&#x65B9;&#x6CD5;</h4>
<p>HashMap&#x7684;&#x5185;&#x90E8;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x5F88;&#x591A;&#xFF0C;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x4ECE;&#x6839;&#x636E;key&#x83B7;&#x53D6;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x3001;put&#x65B9;&#x6CD5;&#x7684;&#x8BE6;&#x7EC6;&#x6267;&#x884C;&#x3001;&#x6269;&#x5BB9;&#x8FC7;&#x7A0B;&#x4E09;&#x4E2A;&#x5177;&#x6709;&#x4EE3;&#x8868;&#x6027;&#x7684;&#x70B9;&#x6DF1;&#x5165;&#x5C55;&#x5F00;&#x8BB2;&#x89E3;&#x3002;</p>
<h5 id="1-&#x786E;&#x5B9A;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;">1. &#x786E;&#x5B9A;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;</h5>
<p>&#x4E0D;&#x7BA1;&#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;&#x3001;&#x67E5;&#x627E;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5B9A;&#x4F4D;&#x5230;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;&#x7684;&#x4F4D;&#x7F6E;&#x90FD;&#x662F;&#x5F88;&#x5173;&#x952E;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#x3002;&#x524D;&#x9762;&#x8BF4;&#x8FC7;HashMap&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x6570;&#x7EC4;&#x548C;&#x94FE;&#x8868;&#x7684;&#x7ED3;&#x5408;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5F53;&#x7136;&#x5E0C;&#x671B;&#x8FD9;&#x4E2A;HashMap&#x91CC;&#x9762;&#x7684;&#x5143;&#x7D20;&#x4F4D;&#x7F6E;&#x5C3D;&#x91CF;&#x5206;&#x5E03;&#x5747;&#x5300;&#x4E9B;&#xFF0C;&#x5C3D;&#x91CF;&#x4F7F;&#x5F97;&#x6BCF;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E0A;&#x7684;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x6211;&#x4EEC;&#x7528;hash&#x7B97;&#x6CD5;&#x6C42;&#x5F97;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9A6C;&#x4E0A;&#x5C31;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x5BF9;&#x5E94;&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x7D20;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x7684;&#xFF0C;&#x4E0D;&#x7528;&#x904D;&#x5386;&#x94FE;&#x8868;&#xFF0C;&#x5927;&#x5927;&#x4F18;&#x5316;&#x4E86;&#x67E5;&#x8BE2;&#x7684;&#x6548;&#x7387;&#x3002;HashMap&#x5B9A;&#x4F4D;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#xFF0C;&#x76F4;&#x63A5;&#x51B3;&#x5B9A;&#x4E86;hash&#x65B9;&#x6CD5;&#x7684;&#x79BB;&#x6563;&#x6027;&#x80FD;&#x3002;&#x5148;&#x770B;&#x770B;&#x6E90;&#x7801;&#x7684;&#x5B9E;&#x73B0;(&#x65B9;&#x6CD5;&#x4E00;+&#x65B9;&#x6CD5;&#x4E8C;):</p>
<pre><code>&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;
static final int hash(Object key) {   //jdk1.8 &amp; jdk1.7
     int h;
     // h = key.hashCode() &#x4E3A;&#x7B2C;&#x4E00;&#x6B65; &#x53D6;hashCode&#x503C;
     // h ^ (h &gt;&gt;&gt; 16)  &#x4E3A;&#x7B2C;&#x4E8C;&#x6B65; &#x9AD8;&#x4F4D;&#x53C2;&#x4E0E;&#x8FD0;&#x7B97;
     return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);
}
&#x65B9;&#x6CD5;&#x4E8C;&#xFF1A;
static int indexFor(int h, int length) {  //jdk1.7&#x7684;&#x6E90;&#x7801;&#xFF0C;jdk1.8&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x4E00;&#x6837;&#x7684;
     return h &amp; (length-1);  //&#x7B2C;&#x4E09;&#x6B65; &#x53D6;&#x6A21;&#x8FD0;&#x7B97;
}
</code></pre><p>&#x8FD9;&#x91CC;&#x7684;Hash&#x7B97;&#x6CD5;&#x672C;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x4E09;&#x6B65;&#xFF1A;<strong>&#x53D6;key&#x7684;hashCode&#x503C;&#x3001;&#x9AD8;&#x4F4D;&#x8FD0;&#x7B97;&#x3001;&#x53D6;&#x6A21;&#x8FD0;&#x7B97;</strong>&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x7ED9;&#x5B9A;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x7684;hashCode()&#x8FD4;&#x56DE;&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x4E00;&#x6240;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#x7684;Hash&#x7801;&#x503C;&#x603B;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x60F3;&#x5230;&#x7684;&#x5C31;&#x662F;&#x628A;hash&#x503C;&#x5BF9;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x53D6;&#x6A21;&#x8FD0;&#x7B97;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#xFF0C;&#x5143;&#x7D20;&#x7684;&#x5206;&#x5E03;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x662F;&#x6BD4;&#x8F83;&#x5747;&#x5300;&#x7684;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6A21;&#x8FD0;&#x7B97;&#x7684;&#x6D88;&#x8017;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#xFF0C;&#x5728;HashMap&#x4E2D;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x7684;&#xFF1A;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x4E8C;&#x6765;&#x8BA1;&#x7B97;&#x8BE5;&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x4FDD;&#x5B58;&#x5728;table&#x6570;&#x7EC4;&#x7684;&#x54EA;&#x4E2A;&#x7D22;&#x5F15;&#x5904;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x975E;&#x5E38;&#x5DE7;&#x5999;&#xFF0C;&#x5B83;&#x901A;&#x8FC7;h &amp; (table.length -1)&#x6765;&#x5F97;&#x5230;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x4FDD;&#x5B58;&#x4F4D;&#xFF0C;&#x800C;HashMap&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x603B;&#x662F;2&#x7684;n&#x6B21;&#x65B9;&#xFF0C;&#x8FD9;&#x662F;HashMap&#x5728;&#x901F;&#x5EA6;&#x4E0A;&#x7684;&#x4F18;&#x5316;&#x3002;&#x5F53;length&#x603B;&#x662F;2&#x7684;n&#x6B21;&#x65B9;&#x65F6;&#xFF0C;h&amp; (length-1)&#x8FD0;&#x7B97;&#x7B49;&#x4EF7;&#x4E8E;&#x5BF9;length&#x53D6;&#x6A21;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;h%length&#xFF0C;&#x4F46;&#x662F;&amp;&#x6BD4;%&#x5177;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x6548;&#x7387;&#x3002;</p>
<p>&#x5728;JDK1.8&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x4F18;&#x5316;&#x4E86;&#x9AD8;&#x4F4D;&#x8FD0;&#x7B97;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;hashCode()&#x7684;&#x9AD8;16&#x4F4D;&#x5F02;&#x6216;&#x4F4E;16&#x4F4D;&#x5B9E;&#x73B0;&#x7684;&#xFF1A;(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4ECE;&#x901F;&#x5EA6;&#x3001;&#x529F;&#x6548;&#x3001;&#x8D28;&#x91CF;&#x6765;&#x8003;&#x8651;&#x7684;&#xFF0C;&#x8FD9;&#x4E48;&#x505A;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x7EC4;table&#x7684;length&#x6BD4;&#x8F83;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E5F;&#x80FD;&#x4FDD;&#x8BC1;&#x8003;&#x8651;&#x5230;&#x9AD8;&#x4F4E;Bit&#x90FD;&#x53C2;&#x4E0E;&#x5230;Hash&#x7684;&#x8BA1;&#x7B97;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x4E0D;&#x4F1A;&#x6709;&#x592A;&#x5927;&#x7684;&#x5F00;&#x9500;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#x4E0B;&#xFF0C;n&#x4E3A;table&#x7684;&#x957F;&#x5EA6;&#x3002;</p>
<p><img src="../_images/java_map_3.png" alt="map_3"></p>
<h5 id="2-&#x5206;&#x6790;hashmap&#x7684;put&#x65B9;&#x6CD5;">2. &#x5206;&#x6790;HashMap&#x7684;put&#x65B9;&#x6CD5;</h5>
<p>HashMap&#x7684;put&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x56FE;&#x6765;&#x7406;&#x89E3;&#xFF0C;&#x81EA;&#x5DF1;&#x6709;&#x5174;&#x8DA3;&#x53EF;&#x4EE5;&#x53BB;&#x5BF9;&#x6BD4;&#x6E90;&#x7801;&#x66F4;&#x6E05;&#x695A;&#x5730;&#x7814;&#x7A76;&#x5B66;&#x4E60;&#x3002;</p>
<p><img src="../_images/java_map_4.png" alt="map_4"></p>
<p>&#x2460;.&#x5224;&#x65AD;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x7EC4;table[i]&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#x6216;&#x4E3A;null&#xFF0C;&#x5426;&#x5219;&#x6267;&#x884C;resize()&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#xFF1B; 
&#x2461;.&#x6839;&#x636E;&#x952E;&#x503C;key&#x8BA1;&#x7B97;hash&#x503C;&#x5F97;&#x5230;&#x63D2;&#x5165;&#x7684;&#x6570;&#x7EC4;&#x7D22;&#x5F15;i&#xFF0C;&#x5982;&#x679C;table[i]==null&#xFF0C;&#x76F4;&#x63A5;&#x65B0;&#x5EFA;&#x8282;&#x70B9;&#x6DFB;&#x52A0;&#xFF0C;&#x8F6C;&#x5411;&#x2465;&#xFF0C;&#x5982;&#x679C;table[i]&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x8F6C;&#x5411;&#x2462;&#xFF1B; 
&#x2462;.&#x5224;&#x65AD;table[i]&#x7684;&#x9996;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x5426;&#x548C;key&#x4E00;&#x6837;&#xFF0C;&#x5982;&#x679C;&#x76F8;&#x540C;&#x76F4;&#x63A5;&#x8986;&#x76D6;value&#xFF0C;&#x5426;&#x5219;&#x8F6C;&#x5411;&#x2463;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x76F8;&#x540C;&#x6307;&#x7684;&#x662F;hashCode&#x4EE5;&#x53CA;equals&#xFF1B; 
&#x2463;.&#x5224;&#x65AD;table[i] &#x662F;&#x5426;&#x4E3A;treeNode&#xFF0C;&#x5373;table[i] &#x662F;&#x5426;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x5728;&#x6811;&#x4E2D;&#x63D2;&#x5165;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5426;&#x5219;&#x8F6C;&#x5411;&#x2464;&#xFF1B; 
&#x2464;.&#x904D;&#x5386;table[i]&#xFF0C;&#x5224;&#x65AD;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x662F;&#x5426;&#x5927;&#x4E8E;8&#xFF0C;&#x5927;&#x4E8E;8&#x7684;&#x8BDD;&#x628A;&#x94FE;&#x8868;&#x8F6C;&#x6362;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5728;&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;&#x6267;&#x884C;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x884C;&#x94FE;&#x8868;&#x7684;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#xFF1B;&#x904D;&#x5386;&#x8FC7;&#x7A0B;&#x4E2D;&#x82E5;&#x53D1;&#x73B0;key&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x76F4;&#x63A5;&#x8986;&#x76D6;value&#x5373;&#x53EF;&#xFF1B; 
&#x2465;.&#x63D2;&#x5165;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5224;&#x65AD;&#x5B9E;&#x9645;&#x5B58;&#x5728;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;size&#x662F;&#x5426;&#x8D85;&#x591A;&#x4E86;&#x6700;&#x5927;&#x5BB9;&#x91CF;threshold&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#xFF0C;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x3002;</p>
<p>JDK1.8HashMap&#x7684;put&#x65B9;&#x6CD5;&#x6E90;&#x7801;&#x5982;&#x4E0B;:</p>
<pre><code> 1 public V put(K key, V value) {
 2     // &#x5BF9;key&#x7684;hashCode()&#x505A;hash
 3     return putVal(hash(key), key, value, false, true);
 4 }
 5 
 6 final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
 7                boolean evict) {
 8     Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;
 9     // &#x6B65;&#x9AA4;&#x2460;&#xFF1A;tab&#x4E3A;&#x7A7A;&#x5219;&#x521B;&#x5EFA;
10     if ((tab = table) == null || (n = tab.length) == 0)
11         n = (tab = resize()).length;
12     // &#x6B65;&#x9AA4;&#x2461;&#xFF1A;&#x8BA1;&#x7B97;index&#xFF0C;&#x5E76;&#x5BF9;null&#x505A;&#x5904;&#x7406; 
13     if ((p = tab[i = (n - 1) &amp; hash]) == null) 
14         tab[i] = newNode(hash, key, value, null);
15     else {
16         Node&lt;K,V&gt; e; K k;
17         // &#x6B65;&#x9AA4;&#x2462;&#xFF1A;&#x8282;&#x70B9;key&#x5B58;&#x5728;&#xFF0C;&#x76F4;&#x63A5;&#x8986;&#x76D6;value
18         if (p.hash == hash &amp;&amp;
19             ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))
20             e = p;
21         // &#x6B65;&#x9AA4;&#x2463;&#xFF1A;&#x5224;&#x65AD;&#x8BE5;&#x94FE;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;
22         else if (p instanceof TreeNode)
23             e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);
24         // &#x6B65;&#x9AA4;&#x2464;&#xFF1A;&#x8BE5;&#x94FE;&#x4E3A;&#x94FE;&#x8868;
25         else {
26             for (int binCount = 0; ; ++binCount) {
27                 if ((e = p.next) == null) {
28                     p.next = newNode(hash, key,value,null);
                        //&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x5927;&#x4E8E;8&#x8F6C;&#x6362;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x8FDB;&#x884C;&#x5904;&#x7406;
29                     if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st  
30                         treeifyBin(tab, hash);
31                     break;
32                 }
                    // key&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x76F4;&#x63A5;&#x8986;&#x76D6;value
33                 if (e.hash == hash &amp;&amp;
34                     ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) 
35                            break;
36                 p = e;
37             }
38         }
39         
40         if (e != null) { // existing mapping for key
41             V oldValue = e.value;
42             if (!onlyIfAbsent || oldValue == null)
43                 e.value = value;
44             afterNodeAccess(e);
45             return oldValue;
46         }
47     }

48     ++modCount;
49     // &#x6B65;&#x9AA4;&#x2465;&#xFF1A;&#x8D85;&#x8FC7;&#x6700;&#x5927;&#x5BB9;&#x91CF; &#x5C31;&#x6269;&#x5BB9;
50     if (++size &gt; threshold)
51         resize();
52     afterNodeInsertion(evict);
53     return null;
54 }
</code></pre><h5 id="3-&#x6269;&#x5BB9;&#x673A;&#x5236;">3. &#x6269;&#x5BB9;&#x673A;&#x5236;</h5>
<p>&#x6269;&#x5BB9;(resize)&#x5C31;&#x662F;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x5BB9;&#x91CF;&#xFF0C;&#x5411;HashMap&#x5BF9;&#x8C61;&#x91CC;&#x4E0D;&#x505C;&#x7684;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF0C;&#x800C;HashMap&#x5BF9;&#x8C61;&#x5185;&#x90E8;&#x7684;&#x6570;&#x7EC4;&#x65E0;&#x6CD5;&#x88C5;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x5BF9;&#x8C61;&#x5C31;&#x9700;&#x8981;&#x6269;&#x5927;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x88C5;&#x5165;&#x66F4;&#x591A;&#x7684;&#x5143;&#x7D20;&#x3002;&#x5F53;&#x7136;Java&#x91CC;&#x7684;&#x6570;&#x7EC4;&#x662F;&#x65E0;&#x6CD5;&#x81EA;&#x52A8;&#x6269;&#x5BB9;&#x7684;&#xFF0C;&#x65B9;&#x6CD5;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x4EE3;&#x66FF;&#x5DF2;&#x6709;&#x7684;&#x5BB9;&#x91CF;&#x5C0F;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x5C31;&#x50CF;&#x6211;&#x4EEC;&#x7528;&#x4E00;&#x4E2A;&#x5C0F;&#x6876;&#x88C5;&#x6C34;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x88C5;&#x66F4;&#x591A;&#x7684;&#x6C34;&#xFF0C;&#x5C31;&#x5F97;&#x6362;&#x5927;&#x6C34;&#x6876;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5206;&#x6790;&#x4E0B;resize&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x9274;&#x4E8E;JDK1.8&#x878D;&#x5165;&#x4E86;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x4E3A;&#x4E86;&#x4FBF;&#x4E8E;&#x7406;&#x89E3;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x4F7F;&#x7528;JDK1.7&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x597D;&#x7406;&#x89E3;&#x4E00;&#x4E9B;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x533A;&#x522B;&#x4E0D;&#x5927;&#xFF0C;&#x5177;&#x4F53;&#x533A;&#x522B;&#x540E;&#x6587;&#x518D;&#x8BF4;&#x3002;</p>
<pre><code>1 void resize(int newCapacity) {   //&#x4F20;&#x5165;&#x65B0;&#x7684;&#x5BB9;&#x91CF;
2     Entry[] oldTable = table;    //&#x5F15;&#x7528;&#x6269;&#x5BB9;&#x524D;&#x7684;Entry&#x6570;&#x7EC4;
3     int oldCapacity = oldTable.length;         
4     if (oldCapacity == MAXIMUM_CAPACITY) {  //&#x6269;&#x5BB9;&#x524D;&#x7684;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x6700;&#x5927;(2^30)&#x4E86;
5         threshold = Integer.MAX_VALUE; //&#x4FEE;&#x6539;&#x9608;&#x503C;&#x4E3A;int&#x7684;&#x6700;&#x5927;&#x503C;(2^31-1)&#xFF0C;&#x8FD9;&#x6837;&#x4EE5;&#x540E;&#x5C31;&#x4E0D;&#x4F1A;&#x6269;&#x5BB9;&#x4E86;
6         return;
7     }
8  
9     Entry[] newTable = new Entry[newCapacity];  //&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Entry&#x6570;&#x7EC4;
10     transfer(newTable);                         //&#xFF01;&#xFF01;&#x5C06;&#x6570;&#x636E;&#x8F6C;&#x79FB;&#x5230;&#x65B0;&#x7684;Entry&#x6570;&#x7EC4;&#x91CC;
11     table = newTable;                           //HashMap&#x7684;table&#x5C5E;&#x6027;&#x5F15;&#x7528;&#x65B0;&#x7684;Entry&#x6570;&#x7EC4;
12     threshold = (int)(newCapacity * loadFactor);//&#x4FEE;&#x6539;&#x9608;&#x503C;
13 }
</code></pre><p>&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5BB9;&#x91CF;&#x66F4;&#x5927;&#x7684;&#x6570;&#x7EC4;&#x6765;&#x4EE3;&#x66FF;&#x5DF2;&#x6709;&#x7684;&#x5BB9;&#x91CF;&#x5C0F;&#x7684;&#x6570;&#x7EC4;&#xFF0C;transfer()&#x65B9;&#x6CD5;&#x5C06;&#x539F;&#x6709;Entry&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;&#x62F7;&#x8D1D;&#x5230;&#x65B0;&#x7684;Entry&#x6570;&#x7EC4;&#x91CC;&#x3002;</p>
<pre><code>1 void transfer(Entry[] newTable) {
2     Entry[] src = table;                   //src&#x5F15;&#x7528;&#x4E86;&#x65E7;&#x7684;Entry&#x6570;&#x7EC4;
3     int newCapacity = newTable.length;
4     for (int j = 0; j &lt; src.length; j++) { //&#x904D;&#x5386;&#x65E7;&#x7684;Entry&#x6570;&#x7EC4;
5         Entry&lt;K,V&gt; e = src[j];             //&#x53D6;&#x5F97;&#x65E7;Entry&#x6570;&#x7EC4;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;
6         if (e != null) {
7             src[j] = null;//&#x91CA;&#x653E;&#x65E7;Entry&#x6570;&#x7EC4;&#x7684;&#x5BF9;&#x8C61;&#x5F15;&#x7528;&#xFF08;for&#x5FAA;&#x73AF;&#x540E;&#xFF0C;&#x65E7;&#x7684;Entry&#x6570;&#x7EC4;&#x4E0D;&#x518D;&#x5F15;&#x7528;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#xFF09;
8             do {
9                 Entry&lt;K,V&gt; next = e.next;
10                 int i = indexFor(e.hash, newCapacity); //&#xFF01;&#xFF01;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;
11                 e.next = newTable[i]; //&#x6807;&#x8BB0;[1]
12                 newTable[i] = e;      //&#x5C06;&#x5143;&#x7D20;&#x653E;&#x5728;&#x6570;&#x7EC4;&#x4E0A;
13                 e = next;             //&#x8BBF;&#x95EE;&#x4E0B;&#x4E00;&#x4E2A;Entry&#x94FE;&#x4E0A;&#x7684;&#x5143;&#x7D20;
14             } while (e != null);
15         }
16     }
17 }
</code></pre><p>newTable[i]&#x7684;&#x5F15;&#x7528;&#x8D4B;&#x7ED9;&#x4E86;e.next&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x5355;&#x94FE;&#x8868;&#x7684;&#x5934;&#x63D2;&#x5165;&#x65B9;&#x5F0F;&#xFF0C;&#x540C;&#x4E00;&#x4F4D;&#x7F6E;&#x4E0A;&#x65B0;&#x5143;&#x7D20;&#x603B;&#x4F1A;&#x88AB;&#x653E;&#x5728;&#x94FE;&#x8868;&#x7684;&#x5934;&#x90E8;&#x4F4D;&#x7F6E;&#xFF1B;&#x8FD9;&#x6837;&#x5148;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x4E0A;&#x7684;&#x5143;&#x7D20;&#x7EC8;&#x4F1A;&#x88AB;&#x653E;&#x5230;Entry&#x94FE;&#x7684;&#x5C3E;&#x90E8;(&#x5982;&#x679C;&#x53D1;&#x751F;&#x4E86;hash&#x51B2;&#x7A81;&#x7684;&#x8BDD;&#xFF09;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x548C;Jdk1.8&#x6709;&#x533A;&#x522B;&#xFF0C;&#x4E0B;&#x6587;&#x8BE6;&#x89E3;&#x3002;&#x5728;&#x65E7;&#x6570;&#x7EC4;&#x4E2D;&#x540C;&#x4E00;&#x6761;Entry&#x94FE;&#x4E0A;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x901A;&#x8FC7;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x540E;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x88AB;&#x653E;&#x5230;&#x4E86;&#x65B0;&#x6570;&#x7EC4;&#x7684;&#x4E0D;&#x540C;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#x8BF4;&#x660E;&#x4E0B;&#x6269;&#x5BB9;&#x8FC7;&#x7A0B;&#x3002;&#x5047;&#x8BBE;&#x4E86;&#x6211;&#x4EEC;&#x7684;hash&#x7B97;&#x6CD5;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7528;key mod &#x4E00;&#x4E0B;&#x8868;&#x7684;&#x5927;&#x5C0F;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#xFF09;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4;table&#x7684;size=2&#xFF0C; &#x6240;&#x4EE5;key = 3&#x3001;7&#x3001;5&#xFF0C;put&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x4E3A; 5&#x3001;7&#x3001;3&#x3002;&#x5728;mod 2&#x4EE5;&#x540E;&#x90FD;&#x51B2;&#x7A81;&#x5728;table[1]&#x8FD9;&#x91CC;&#x4E86;&#x3002;&#x8FD9;&#x91CC;&#x5047;&#x8BBE;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50; loadFactor=1&#xFF0C;&#x5373;&#x5F53;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x5B9E;&#x9645;&#x5927;&#x5C0F;size &#x5927;&#x4E8E; table&#x7684;&#x5B9E;&#x9645;&#x5927;&#x5C0F;&#x65F6;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E09;&#x4E2A;&#x6B65;&#x9AA4;&#x662F;&#x54C8;&#x5E0C;&#x6876;&#x6570;&#x7EC4; resize&#x6210;4&#xFF0C;&#x7136;&#x540E;&#x6240;&#x6709;&#x7684;Node&#x91CD;&#x65B0;rehash&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<p><img src="../_images/java_map_5.png" alt="map_5"></p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x4E0B;JDK1.8&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#x4F18;&#x5316;&#x3002;&#x7ECF;&#x8FC7;&#x89C2;&#x6D4B;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;2&#x6B21;&#x5E42;&#x7684;&#x6269;&#x5C55;(&#x6307;&#x957F;&#x5EA6;&#x6269;&#x4E3A;&#x539F;&#x6765;2&#x500D;)&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x5143;&#x7D20;&#x7684;&#x4F4D;&#x7F6E;&#x8981;&#x4E48;&#x662F;&#x5728;&#x539F;&#x4F4D;&#x7F6E;&#xFF0C;&#x8981;&#x4E48;&#x662F;&#x5728;&#x539F;&#x4F4D;&#x7F6E;&#x518D;&#x79FB;&#x52A8;2&#x6B21;&#x5E42;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x770B;&#x4E0B;&#x56FE;&#x53EF;&#x4EE5;&#x660E;&#x767D;&#x8FD9;&#x53E5;&#x8BDD;&#x7684;&#x610F;&#x601D;&#xFF0C;n&#x4E3A;table&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x56FE;&#xFF08;a&#xFF09;&#x8868;&#x793A;&#x6269;&#x5BB9;&#x524D;&#x7684;key1&#x548C;key2&#x4E24;&#x79CD;key&#x786E;&#x5B9A;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x56FE;&#xFF08;b&#xFF09;&#x8868;&#x793A;&#x6269;&#x5BB9;&#x540E;key1&#x548C;key2&#x4E24;&#x79CD;key&#x786E;&#x5B9A;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x5176;&#x4E2D;hash1&#x662F;key1&#x5BF9;&#x5E94;&#x7684;&#x54C8;&#x5E0C;&#x4E0E;&#x9AD8;&#x4F4D;&#x8FD0;&#x7B97;&#x7ED3;&#x679C;&#x3002;</p>
<p><img src="../_images/java_map_6.png" alt="map_6"></p>
<p>&#x5143;&#x7D20;&#x5728;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;hash&#x4E4B;&#x540E;&#xFF0C;&#x56E0;&#x4E3A;n&#x53D8;&#x4E3A;2&#x500D;&#xFF0C;&#x90A3;&#x4E48;n-1&#x7684;mask&#x8303;&#x56F4;&#x5728;&#x9AD8;&#x4F4D;&#x591A;1bit(&#x7EA2;&#x8272;)&#xFF0C;&#x56E0;&#x6B64;&#x65B0;&#x7684;index&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x6837;&#x7684;&#x53D8;&#x5316;&#xFF1A;</p>
<p><img src="../_images/java_map_7.png" alt="map_7"></p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x6269;&#x5145;HashMap&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x50CF;JDK1.7&#x7684;&#x5B9E;&#x73B0;&#x90A3;&#x6837;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;hash&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x770B;&#x770B;&#x539F;&#x6765;&#x7684;hash&#x503C;&#x65B0;&#x589E;&#x7684;&#x90A3;&#x4E2A;bit&#x662F;1&#x8FD8;&#x662F;0&#x5C31;&#x597D;&#x4E86;&#xFF0C;&#x662F;0&#x7684;&#x8BDD;&#x7D22;&#x5F15;&#x6CA1;&#x53D8;&#xFF0C;&#x662F;1&#x7684;&#x8BDD;&#x7D22;&#x5F15;&#x53D8;&#x6210;&#x201C;&#x539F;&#x7D22;&#x5F15;+oldCap&#x201D;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x4E0B;&#x56FE;&#x4E3A;16&#x6269;&#x5145;&#x4E3A;32&#x7684;resize&#x793A;&#x610F;&#x56FE;&#xFF1A;</p>
<p><img src="../_images/java_map_8.png" alt="map_8"></p>
<p>&#x8FD9;&#x4E2A;&#x8BBE;&#x8BA1;&#x786E;&#x5B9E;&#x975E;&#x5E38;&#x7684;&#x5DE7;&#x5999;&#xFF0C;&#x65E2;&#x7701;&#x53BB;&#x4E86;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;hash&#x503C;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x800C;&#x4E14;&#x540C;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x65B0;&#x589E;&#x7684;1bit&#x662F;0&#x8FD8;&#x662F;1&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;&#x968F;&#x673A;&#x7684;&#xFF0C;&#x56E0;&#x6B64;resize&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5747;&#x5300;&#x7684;&#x628A;&#x4E4B;&#x524D;&#x7684;&#x51B2;&#x7A81;&#x7684;&#x8282;&#x70B9;&#x5206;&#x6563;&#x5230;&#x65B0;&#x7684;bucket&#x4E86;&#x3002;&#x8FD9;&#x4E00;&#x5757;&#x5C31;&#x662F;JDK1.8&#x65B0;&#x589E;&#x7684;&#x4F18;&#x5316;&#x70B9;&#x3002;&#x6709;&#x4E00;&#x70B9;&#x6CE8;&#x610F;&#x533A;&#x522B;&#xFF0C;JDK1.7&#x4E2D;rehash&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x65E7;&#x94FE;&#x8868;&#x8FC1;&#x79FB;&#x65B0;&#x94FE;&#x8868;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x65B0;&#x8868;&#x7684;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x94FE;&#x8868;&#x5143;&#x7D20;&#x4F1A;&#x5012;&#x7F6E;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x4E0A;&#x56FE;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;JDK1.8&#x4E0D;&#x4F1A;&#x5012;&#x7F6E;&#x3002;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x7814;&#x7A76;&#x4E0B;JDK1.8&#x7684;resize&#x6E90;&#x7801;&#xFF0C;&#x5199;&#x7684;&#x5F88;&#x8D5E;&#xFF0C;&#x5982;&#x4E0B;:</p>
<pre><code>1 final Node&lt;K,V&gt;[] resize() {
 2     Node&lt;K,V&gt;[] oldTab = table;
 3     int oldCap = (oldTab == null) ? 0 : oldTab.length;
 4     int oldThr = threshold;
 5     int newCap, newThr = 0;
 6     if (oldCap &gt; 0) {
 7         // &#x8D85;&#x8FC7;&#x6700;&#x5927;&#x503C;&#x5C31;&#x4E0D;&#x518D;&#x6269;&#x5145;&#x4E86;&#xFF0C;&#x5C31;&#x53EA;&#x597D;&#x968F;&#x4F60;&#x78B0;&#x649E;&#x53BB;&#x5427;
 8         if (oldCap &gt;= MAXIMUM_CAPACITY) {
 9             threshold = Integer.MAX_VALUE;
10             return oldTab;
11         }
12         // &#x6CA1;&#x8D85;&#x8FC7;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5C31;&#x6269;&#x5145;&#x4E3A;&#x539F;&#x6765;&#x7684;2&#x500D;
13         else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp;
14                  oldCap &gt;= DEFAULT_INITIAL_CAPACITY)
15             newThr = oldThr &lt;&lt; 1; // double threshold
16     }
17     else if (oldThr &gt; 0) // initial capacity was placed in threshold
18         newCap = oldThr;
19     else {               // zero initial threshold signifies using defaults
20         newCap = DEFAULT_INITIAL_CAPACITY;
21         newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);
22     }
23     // &#x8BA1;&#x7B97;&#x65B0;&#x7684;resize&#x4E0A;&#x9650;
24     if (newThr == 0) {
25 
26         float ft = (float)newCap * loadFactor;
27         newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?
28                   (int)ft : Integer.MAX_VALUE);
29     }
30     threshold = newThr;
31     @SuppressWarnings({&quot;rawtypes&quot;&#xFF0C;&quot;unchecked&quot;})
32         Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap];
33     table = newTab;
34     if (oldTab != null) {
35         // &#x628A;&#x6BCF;&#x4E2A;bucket&#x90FD;&#x79FB;&#x52A8;&#x5230;&#x65B0;&#x7684;buckets&#x4E2D;
36         for (int j = 0; j &lt; oldCap; ++j) {
37             Node&lt;K,V&gt; e;
38             if ((e = oldTab[j]) != null) {
39                 oldTab[j] = null;
40                 if (e.next == null)
41                     newTab[e.hash &amp; (newCap - 1)] = e;
42                 else if (e instanceof TreeNode)
43                     ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap);
44                 else { // &#x94FE;&#x8868;&#x4F18;&#x5316;&#x91CD;hash&#x7684;&#x4EE3;&#x7801;&#x5757;
45                     Node&lt;K,V&gt; loHead = null, loTail = null;
46                     Node&lt;K,V&gt; hiHead = null, hiTail = null;
47                     Node&lt;K,V&gt; next;
48                     do {
49                         next = e.next;
50                         // &#x539F;&#x7D22;&#x5F15;
51                         if ((e.hash &amp; oldCap) == 0) {
52                             if (loTail == null)
53                                 loHead = e;
54                             else
55                                 loTail.next = e;
56                             loTail = e;
57                         }
58                         // &#x539F;&#x7D22;&#x5F15;+oldCap
59                         else {
60                             if (hiTail == null)
61                                 hiHead = e;
62                             else
63                                 hiTail.next = e;
64                             hiTail = e;
65                         }
66                     } while ((e = next) != null);
67                     // &#x539F;&#x7D22;&#x5F15;&#x653E;&#x5230;bucket&#x91CC;
68                     if (loTail != null) {
69                         loTail.next = null;
70                         newTab[j] = loHead;
71                     }
72                     // &#x539F;&#x7D22;&#x5F15;+oldCap&#x653E;&#x5230;bucket&#x91CC;
73                     if (hiTail != null) {
74                         hiTail.next = null;
75                         newTab[j + oldCap] = hiHead;
76                     }
77                 }
78             }
79         }
80     }
81     return newTab;
82 }
</code></pre><h4 id="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;">&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;</h4>
<p>&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x5E94;&#x8BE5;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;HashMap&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;ConcurrentHashMap&#x3002;&#x90A3;&#x4E48;&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;HashMap&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4E0B;&#x9762;&#x4E3E;&#x4F8B;&#x5B50;&#x8BF4;&#x660E;&#x5728;&#x5E76;&#x53D1;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#x4F7F;&#x7528;HashMap&#x53EF;&#x80FD;&#x9020;&#x6210;&#x6B7B;&#x5FAA;&#x73AF;&#x3002;&#x4EE3;&#x7801;&#x4F8B;&#x5B50;&#x5982;&#x4E0B;(&#x4FBF;&#x4E8E;&#x7406;&#x89E3;&#xFF0C;&#x4ECD;&#x7136;&#x4F7F;&#x7528;JDK1.7&#x7684;&#x73AF;&#x5883;)&#xFF1A;</p>
<pre><code>public class HashMapInfiniteLoop {  

    private static HashMap&lt;Integer,String&gt; map = new HashMap&lt;Integer,String&gt;(2&#xFF0C;0.75f);  
    public static void main(String[] args) {  
        map.put(5&#xFF0C; &quot;C&quot;);  

        new Thread(&quot;Thread1&quot;) {  
            public void run() {  
                map.put(7, &quot;B&quot;);  
                System.out.println(map);  
            };  
        }.start();  
        new Thread(&quot;Thread2&quot;) {  
            public void run() {  
                map.put(3, &quot;A);  
                System.out.println(map);  
            };  
        }.start();        
    }  
}
</code></pre><p>&#x5176;&#x4E2D;&#xFF0C;map&#x521D;&#x59CB;&#x5316;&#x4E3A;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x4E3A;2&#x7684;&#x6570;&#x7EC4;&#xFF0C;loadFactor=0.75&#xFF0C;threshold=2*0.75=1&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5F53;put&#x7B2C;&#x4E8C;&#x4E2A;key&#x7684;&#x65F6;&#x5019;&#xFF0C;map&#x5C31;&#x9700;&#x8981;&#x8FDB;&#x884C;resize&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#x8BA9;&#x7EBF;&#x7A0B;1&#x548C;&#x7EBF;&#x7A0B;2&#x540C;&#x65F6;debug&#x5230;transfer&#x65B9;&#x6CD5;(3.3&#x5C0F;&#x8282;&#x4EE3;&#x7801;&#x5757;)&#x7684;&#x9996;&#x884C;&#x3002;&#x6CE8;&#x610F;&#x6B64;&#x65F6;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x3002;&#x653E;&#x5F00;thread1&#x7684;&#x65AD;&#x70B9;&#x81F3;transfer&#x65B9;&#x6CD5;&#x7684;&#x201C;Entry next = e.next;&#x201D; &#x8FD9;&#x4E00;&#x884C;&#xFF1B;&#x7136;&#x540E;&#x653E;&#x5F00;&#x7EBF;&#x7A0B;2&#x7684;&#x7684;&#x65AD;&#x70B9;&#xFF0C;&#x8BA9;&#x7EBF;&#x7A0B;2&#x8FDB;&#x884C;resize&#x3002;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#x3002;</p>
<p><img src="../_images/java_map_9.png" alt="map_9"></p>
<p>&#x6CE8;&#x610F;&#xFF0C;Thread1&#x7684; e &#x6307;&#x5411;&#x4E86;key(3)&#xFF0C;&#x800C;next&#x6307;&#x5411;&#x4E86;key(7)&#xFF0C;&#x5176;&#x5728;&#x7EBF;&#x7A0B;&#x4E8C;rehash&#x540E;&#xFF0C;&#x6307;&#x5411;&#x4E86;&#x7EBF;&#x7A0B;&#x4E8C;&#x91CD;&#x7EC4;&#x540E;&#x7684;&#x94FE;&#x8868;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x4E00;&#x88AB;&#x8C03;&#x5EA6;&#x56DE;&#x6765;&#x6267;&#x884C;&#xFF0C;&#x5148;&#x662F;&#x6267;&#x884C; newTalbe[i] = e&#xFF0C; &#x7136;&#x540E;&#x662F;e = next&#xFF0C;&#x5BFC;&#x81F4;&#x4E86;e&#x6307;&#x5411;&#x4E86;key(7)&#xFF0C;&#x800C;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x7684;next = e.next&#x5BFC;&#x81F4;&#x4E86;next&#x6307;&#x5411;&#x4E86;key(3)&#x3002;</p>
<p><img src="../_images/java_map_10.png" alt="map_10"></p>
<p>e.next = newTable[i] &#x5BFC;&#x81F4; key(3).next &#x6307;&#x5411;&#x4E86; key(7)&#x3002;&#x6CE8;&#x610F;&#xFF1A;&#x6B64;&#x65F6;&#x7684;key(7).next &#x5DF2;&#x7ECF;&#x6307;&#x5411;&#x4E86;key(3)&#xFF0C; &#x73AF;&#x5F62;&#x94FE;&#x8868;&#x5C31;&#x8FD9;&#x6837;&#x51FA;&#x73B0;&#x4E86;&#x3002;</p>
<p><img src="../_images/java_map_11.png" alt="map_11"></p>
<p>&#x4E8E;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x7528;&#x7EBF;&#x7A0B;&#x4E00;&#x8C03;&#x7528;map.get(11)&#x65F6;&#xFF0C;&#x60B2;&#x5267;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x2014;&#x2014;Infinite Loop&#x3002;</p>
<h4 id="jdk18&#x4E0E;jdk17&#x7684;&#x6027;&#x80FD;&#x5BF9;&#x6BD4;">JDK1.8&#x4E0E;JDK1.7&#x7684;&#x6027;&#x80FD;&#x5BF9;&#x6BD4;</h4>
<p>HashMap&#x4E2D;&#xFF0C;&#x5982;&#x679C;key&#x7ECF;&#x8FC7;hash&#x7B97;&#x6CD5;&#x5F97;&#x51FA;&#x7684;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x5168;&#x90E8;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x5373;Hash&#x7B97;&#x6CD5;&#x975E;&#x5E38;&#x597D;&#xFF0C;&#x90A3;&#x6837;&#x7684;&#x8BDD;&#xFF0C;getKey&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5C31;&#x662F;O(1)&#xFF0C;&#x5982;&#x679C;Hash&#x7B97;&#x6CD5;&#x6280;&#x672F;&#x7684;&#x7ED3;&#x679C;&#x78B0;&#x649E;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x5047;&#x5982;Hash&#x7B97;&#x6781;&#x5176;&#x5DEE;&#xFF0C;&#x6240;&#x6709;&#x7684;Hash&#x7B97;&#x6CD5;&#x7ED3;&#x679C;&#x5F97;&#x51FA;&#x7684;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x4E00;&#x6837;&#xFF0C;&#x90A3;&#x6837;&#x6240;&#x6709;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x90FD;&#x96C6;&#x4E2D;&#x5230;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x4E2D;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x4E00;&#x4E2A;&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;&#xFF0C;<strong>&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x522B;&#x4E3A;O(n)&#x548C;O(lgn)</strong>&#x3002; &#x9274;&#x4E8E;JDK1.8&#x505A;&#x4E86;&#x591A;&#x65B9;&#x9762;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x603B;&#x4F53;&#x6027;&#x80FD;&#x4F18;&#x4E8E;JDK1.7&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4ECE;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#x7528;&#x4F8B;&#x5B50;&#x8BC1;&#x660E;&#x8FD9;&#x4E00;&#x70B9;&#x3002;</p>
<h5 id="hash&#x8F83;&#x5747;&#x5300;&#x7684;&#x60C5;&#x51B5;">Hash&#x8F83;&#x5747;&#x5300;&#x7684;&#x60C5;&#x51B5;</h5>
<p>&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x503C;&#x7684;hashCode&#x90FD;&#x4E0D;&#x4F1A;&#x76F8;&#x540C;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;value&#x5F53;&#x505A;hashcode&#x3002;</p>
<p>&#x5728;&#x6D4B;&#x8BD5;&#x4E2D;&#x4F1A;&#x67E5;&#x627E;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x5EA6;&#x91CF;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA1;&#x7B97;getKey&#x7684;&#x5E73;&#x5747;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;get&#x65B9;&#x6CD5;&#xFF0C;&#x8BA1;&#x7B97;&#x603B;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x9664;&#x4EE5;key&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;&#x5E73;&#x5747;&#x503C;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x6BD4;&#x8F83;&#xFF0C;&#x7EDD;&#x5BF9;&#x503C;&#x53EF;&#x80FD;&#x4F1A;&#x53D7;&#x5F88;&#x591A;&#x73AF;&#x5883;&#x56E0;&#x7D20;&#x7684;&#x5F71;&#x54CD;&#x3002;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="../_images/java_map_12.png" alt="map_12"></p>
<p>&#x901A;&#x8FC7;&#x89C2;&#x6D4B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x53EF;&#x77E5;&#xFF0C;JDK1.8&#x7684;&#x6027;&#x80FD;&#x8981;&#x9AD8;&#x4E8E;JDK1.7 15%&#x4EE5;&#x4E0A;&#xFF0C;&#x5728;&#x67D0;&#x4E9B;size&#x7684;&#x533A;&#x57DF;&#x4E0A;&#xFF0C;&#x751A;&#x81F3;&#x9AD8;&#x4E8E;100%&#x3002;&#x7531;&#x4E8E;Hash&#x7B97;&#x6CD5;&#x8F83;&#x5747;&#x5300;&#xFF0C;JDK1.8&#x5F15;&#x5165;&#x7684;&#x7EA2;&#x9ED1;&#x6811;&#x6548;&#x679C;&#x4E0D;&#x660E;&#x663E;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x770B;Hash&#x4E0D;&#x5747;&#x5300;&#x7684;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<h5 id="hash&#x6781;&#x4E0D;&#x5747;&#x5300;&#x7684;&#x60C5;&#x51B5;">Hash&#x6781;&#x4E0D;&#x5747;&#x5300;&#x7684;&#x60C5;&#x51B5;</h5>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x53C8;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5DEE;&#x7684;Key&#xFF0C;&#x5B83;&#x4EEC;&#x6240;&#x6709;&#x7684;&#x5B9E;&#x4F8B;&#x90FD;&#x8FD4;&#x56DE;&#x76F8;&#x540C;&#x7684;hashCode&#x503C;&#x3002;&#x8FD9;&#x662F;&#x4F7F;&#x7528;HashMap&#x6700;&#x574F;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="../_images/java_map_13.png" alt="map_13"></p>
<p>&#x4ECE;&#x8868;&#x4E2D;&#x7ED3;&#x679C;&#x4E2D;&#x53EF;&#x77E5;&#xFF0C;&#x968F;&#x7740;size&#x7684;&#x53D8;&#x5927;&#xFF0C;JDK1.7&#x7684;&#x82B1;&#x8D39;&#x65F6;&#x95F4;&#x662F;&#x589E;&#x957F;&#x7684;&#x8D8B;&#x52BF;&#xFF0C;&#x800C;JDK1.8&#x662F;&#x660E;&#x663E;&#x7684;&#x964D;&#x4F4E;&#x8D8B;&#x52BF;&#xFF0C;&#x5E76;&#x4E14;&#x5448;&#x73B0;&#x5BF9;&#x6570;&#x589E;&#x957F;&#x7A33;&#x5B9A;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x592A;&#x957F;&#x7684;&#x65F6;&#x5019;&#xFF0C;HashMap&#x4F1A;&#x52A8;&#x6001;&#x7684;&#x5C06;&#x5B83;&#x66FF;&#x6362;&#x6210;&#x4E00;&#x4E2A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x8FD9;&#x8BDD;&#x7684;&#x8BDD;&#x4F1A;&#x5C06;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4ECE;O(n)&#x964D;&#x4E3A;O(logn)&#x3002;hash&#x7B97;&#x6CD5;&#x5747;&#x5300;&#x548C;&#x4E0D;&#x5747;&#x5300;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x660E;&#x663E;&#x4E5F;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x660E;&#x4E00;&#x4E2A;&#x597D;&#x7684;hash&#x7B97;&#x6CD5;&#x7684;&#x91CD;&#x8981;&#x6027;&#x3002;</p>
<h4 id="&#x5C0F;&#x7ED3;">&#x5C0F;&#x7ED3;</h4>
<ul>
<li>&#x6269;&#x5BB9;&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x522B;&#x8017;&#x6027;&#x80FD;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x7A0B;&#x5E8F;&#x5458;&#x5728;&#x4F7F;&#x7528;HashMap&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F30;&#x7B97;map&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65F6;&#x5019;&#x7ED9;&#x4E00;&#x4E2A;&#x5927;&#x81F4;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x907F;&#x514D;map&#x8FDB;&#x884C;&#x9891;&#x7E41;&#x7684;&#x6269;&#x5BB9;&#x3002;</li>
<li>&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x662F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5927;&#x4E8E;1&#xFF0C;&#x4F46;&#x662F;&#x5EFA;&#x8BAE;&#x4E0D;&#x8981;&#x8F7B;&#x6613;&#x4FEE;&#x6539;&#xFF0C;&#x9664;&#x975E;&#x60C5;&#x51B5;&#x975E;&#x5E38;&#x7279;&#x6B8A;&#x3002;</li>
<li>HashMap&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4E0D;&#x8981;&#x5728;&#x5E76;&#x53D1;&#x7684;&#x73AF;&#x5883;&#x4E2D;&#x540C;&#x65F6;&#x64CD;&#x4F5C;HashMap&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;ConcurrentHashMap&#x3002;</li>
<li>JDK1.8&#x5F15;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x5927;&#x7A0B;&#x5EA6;&#x4F18;&#x5316;&#x4E86;HashMap&#x7684;&#x6027;&#x80FD;&#x3002;</li>
</ul>
<h3 id="3linkedhashmap&#x4E86;&#x89E3;&#x57FA;&#x672C;&#x539F;&#x7406;&#x3001;&#x54EA;&#x4E24;&#x79CD;&#x6709;&#x5E8F;&#x3001;&#x5982;&#x4F55;&#x7528;&#x5B83;&#x5B9E;&#x73B0;lru">3.LinkedHashMap&#x4E86;&#x89E3;&#x57FA;&#x672C;&#x539F;&#x7406;&#x3001;&#x54EA;&#x4E24;&#x79CD;&#x6709;&#x5E8F;&#x3001;&#x5982;&#x4F55;&#x7528;&#x5B83;&#x5B9E;&#x73B0;LRU</h3>
<h4 id="&#x6982;&#x8FF0;">&#x6982;&#x8FF0;</h4>
<p>HashMap &#x662F; Java Collection Framework &#x7684;&#x91CD;&#x8981;&#x6210;&#x5458;&#xFF0C;&#x4E5F;&#x662F;Map&#x65CF;(&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;)&#x4E2D;&#x6211;&#x4EEC;&#x6700;&#x4E3A;&#x5E38;&#x7528;&#x7684;&#x4E00;&#x79CD;&#x3002;&#x4E0D;&#x8FC7;&#x9057;&#x61BE;&#x7684;&#x662F;&#xFF0C;HashMap&#x662F;&#x65E0;&#x5E8F;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x8FED;&#x4EE3;HashMap&#x6240;&#x5F97;&#x5230;&#x7684;&#x5143;&#x7D20;&#x987A;&#x5E8F;&#x5E76;&#x4E0D;&#x662F;&#x5B83;&#x4EEC;&#x6700;&#x521D;&#x653E;&#x7F6E;&#x5230;HashMap&#x7684;&#x987A;&#x5E8F;&#x3002;</p>
<p>HashMap&#x7684;&#x8FD9;&#x4E00;&#x7F3A;&#x70B9;&#x5F80;&#x5F80;&#x4F1A;&#x9020;&#x6210;&#x8BF8;&#x591A;&#x4E0D;&#x4FBF;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x6709;&#x4E9B;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x786E;&#x9700;&#x8981;&#x7528;&#x5230;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x4FDD;&#x6301;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x7684;Map&#x3002;&#x5E86;&#x5E78;&#x7684;&#x662F;&#xFF0C;JDK&#x4E3A;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5B83;&#x4E3A;HashMap&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B; &#x2014;&#x2014; LinkedHashMap&#x3002;&#x867D;&#x7136;LinkedHashMap&#x589E;&#x52A0;&#x4E86;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#x4E0A;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x901A;&#x8FC7;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4FDD;&#x8BC1;&#x4E86;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x3002;</p>
<p>&#x7279;&#x522B;&#x5730;&#xFF0C;<strong>&#x8BE5;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x53EF;&#x4EE5;&#x662F;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;</strong>&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6839;&#x636E;&#x94FE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x987A;&#x5E8F;&#x53EF;&#x4EE5;&#x5C06;LinkedHashMap&#x5206;&#x4E3A;&#xFF1A;<strong>&#x4FDD;&#x6301;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x7684;LinkedHashMap&#x548C;&#x4FDD;&#x6301;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x7684;LinkedHashMap&#xFF0C;&#x5176;&#x4E2D;LinkedHashMap&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;&#x6309;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x7684;</strong>&#x3002;</p>
<p>&#x66F4;&#x76F4;&#x89C2;&#x5730;&#xFF0C;&#x4E0B;&#x56FE;&#x5F88;&#x597D;&#x5730;&#x8FD8;&#x539F;&#x4E86;LinkedHashMap&#x7684;&#x539F;&#x8C8C;&#xFF1A;HashMap&#x548C;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5BC6;&#x5207;&#x914D;&#x5408;&#x548C;&#x5206;&#x5DE5;&#x5408;&#x4F5C;&#x9020;&#x5C31;&#x4E86;LinkedHashMap&#x3002;&#x7279;&#x522B;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;next&#x7528;&#x4E8E;&#x7EF4;&#x62A4;HashMap&#x5404;&#x4E2A;&#x6876;&#x4E2D;&#x7684;Entry&#x94FE;&#xFF0C;before&#x3001;after&#x7528;&#x4E8E;&#x7EF4;&#x62A4;LinkedHashMap&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x867D;&#x7136;&#x5B83;&#x4EEC;&#x7684;&#x4F5C;&#x7528;&#x5BF9;&#x8C61;&#x90FD;&#x662F;Entry&#xFF0C;&#x4F46;&#x662F;&#x5404;&#x81EA;&#x5206;&#x79BB;&#xFF0C;&#x662F;&#x4E24;&#x7801;&#x4E8B;&#x513F;&#x3002;</p>
<p><img src="../_images/java_linkedhm_1.png" alt="linkedhm_1"></p>
<p>&#x5176;&#x4E2D;&#xFF0C;HashMap&#x4E0E;LinkedHashMap&#x7684;Entry&#x7ED3;&#x6784;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="../_images/java_linkedhm_2.png" alt="linkedhm_2"></p>
<p>&#x7279;&#x522B;&#x5730;&#xFF0C;&#x7531;&#x4E8E;LinkedHashMap&#x662F;HashMap&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x6240;&#x4EE5;LinkedHashMap&#x81EA;&#x7136;&#x4F1A;&#x62E5;&#x6709;HashMap&#x7684;&#x6240;&#x6709;&#x7279;&#x6027;&#x3002;&#x6BD4;&#x5982;&#xFF0C;LinkedHashMap&#x4E5F;&#x6700;&#x591A;&#x53EA;&#x5141;&#x8BB8;&#x4E00;&#x6761;Entry&#x7684;&#x952E;&#x4E3A;Null(&#x591A;&#x6761;&#x4F1A;&#x8986;&#x76D6;)&#xFF0C;&#x4F46;&#x5141;&#x8BB8;&#x591A;&#x6761;Entry&#x7684;&#x503C;&#x4E3A;Null&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;LinkedHashMap &#x4E5F;&#x662F; Map &#x7684;&#x4E00;&#x4E2A;&#x975E;&#x540C;&#x6B65;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x6B64;&#x5916;&#xFF0C;LinkedHashMap&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9E;&#x73B0;LRU (Least recently used, &#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;)&#x7B97;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4F1A;&#x5728;&#x4E0B;&#x6587;&#x7684;&#x7279;&#x522B;&#x8C08;&#x5230;&#x3002;</p>
<h4 id="linkedhashmap-&#x5728;-jdk-&#x4E2D;&#x7684;&#x5B9A;&#x4E49;">LinkedHashMap &#x5728; JDK &#x4E2D;&#x7684;&#x5B9A;&#x4E49;</h4>
<h4 id="&#x6210;&#x5458;&#x53D8;&#x91CF;">&#x6210;&#x5458;&#x53D8;&#x91CF;</h4>
<p>LinkedHashMap&#x7EE7;&#x627F;&#x4E8E;HashMap, &#x4E0E;HashMap&#x76F8;&#x6BD4;&#xFF0C;LinkedHashMap&#x589E;&#x52A0;&#x4E86;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x4FDD;&#x8BC1;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#xFF0C;&#x5206;&#x522B;&#x662F; <strong>&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5934;&#x7ED3;&#x70B9;header &#x548C; &#x6807;&#x5FD7;&#x4F4D;accessOrder (&#x503C;&#x4E3A;true&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x8FED;&#x4EE3;&#xFF1B;&#x503C;&#x4E3A;false&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x6309;&#x7167;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x8FED;&#x4EE3;)</strong>&#x3002;</p>
<pre><code>/**
 * The head of the doubly linked list.
 */
private transient Entry&lt;K,V&gt; header;  // &#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x8868;&#x5934;&#x5143;&#x7D20;

/**
 * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt;
 * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order.
 *
 * @serial
 */
private final boolean accessOrder;  //true&#x8868;&#x793A;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x8FED;&#x4EE3;&#xFF0C;false&#x65F6;&#x8868;&#x793A;&#x6309;&#x7167;&#x63D2;&#x5165;&#x987A;&#x5E8F;
</code></pre><h4 id="&#x6210;&#x5458;&#x65B9;&#x6CD5;">&#x6210;&#x5458;&#x65B9;&#x6CD5;</h4>
<p>LinkedHashMap&#x4E2D;&#x5E76;&#x589E;&#x52A0;&#x6CA1;&#x6709;&#x989D;&#x5916;&#x65B9;&#x6CD5;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;LinkedHashMap&#x4E0E;HashMap&#x5728;&#x64CD;&#x4F5C;&#x4E0A;&#x5927;&#x81F4;&#x76F8;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x4E0A;&#x7565;&#x6709;&#x4E0D;&#x540C;&#x7F62;&#x4E86;&#x3002;</p>
<h4 id="&#x57FA;&#x672C;&#x5143;&#x7D20;-entry">&#x57FA;&#x672C;&#x5143;&#x7D20; Entry</h4>
<p>LinkedHashMap&#x91C7;&#x7528;&#x7684;hash&#x7B97;&#x6CD5;&#x548C;HashMap&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#x4E86;Entry&#x3002;LinkedHashMap&#x4E2D;&#x7684;Entry&#x589E;&#x52A0;&#x4E86;&#x4E24;&#x4E2A;&#x6307;&#x9488; before &#x548C; after&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x7528;&#x4E8E;&#x7EF4;&#x62A4;&#x53CC;&#x5411;&#x94FE;&#x63A5;&#x5217;&#x8868;&#x3002;&#x7279;&#x522B;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;next&#x7528;&#x4E8E;&#x7EF4;&#x62A4;HashMap&#x5404;&#x4E2A;&#x6876;&#x4E2D;Entry&#x7684;&#x8FDE;&#x63A5;&#x987A;&#x5E8F;&#xFF0C;before&#x3001;after&#x7528;&#x4E8E;&#x7EF4;&#x62A4;Entry&#x63D2;&#x5165;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x7684;&#xFF0C;&#x6E90;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>private static class Entry&lt;K,V&gt; extends HashMap.Entry&lt;K,V&gt; {

    // These fields comprise the doubly linked list used for iteration.
    Entry&lt;K,V&gt; before, after;

    Entry(int hash, K key, V value, HashMap.Entry&lt;K,V&gt; next) {
        super(hash, key, value, next);
    }
    ...
}
</code></pre><h4 id="&#x6784;&#x9020;&#x51FD;&#x6570;">&#x6784;&#x9020;&#x51FD;&#x6570;</h4>
<p>LinkedHashMap &#x4E00;&#x5171;&#x63D0;&#x4F9B;&#x4E86;&#x4E94;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x5728;HashMap&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x9664;&#x4E86;&#x9ED8;&#x8BA4;&#x7A7A;&#x53C2;&#x6570;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5305;&#x542B;&#x4E86;&#x5927;&#x90E8;&#x5206;&#x5176;&#x4ED6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x5217;&#x4E3E;&#x4E86;&#x3002;</p>
<p>LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)</p>
<p>&#x521D;&#x59CB;&#x5BB9;&#x91CF; &#x548C;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x662F;&#x5F71;&#x54CD;HashMap&#x6027;&#x80FD;&#x7684;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#x3002;&#x540C;&#x6837;&#x5730;&#xFF0C;&#x5B83;&#x4EEC;&#x4E5F;&#x662F;&#x5F71;&#x54CD;LinkedHashMap&#x6027;&#x80FD;&#x7684;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#x3002;&#x6B64;&#x5916;&#xFF0C;LinkedHashMap &#x589E;&#x52A0;&#x4E86;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5934;&#x7ED3;&#x70B9; header&#x548C;&#x6807;&#x5FD7;&#x4F4D; accessOrder&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x4FDD;&#x8BC1;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x3002;</p>
<p>&#x8BE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x610F;&#x5728;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x4E0E;&#x6307;&#x5B9A; Map &#x5177;&#x6709;&#x76F8;&#x540C;&#x6620;&#x5C04;&#x7684; LinkedHashMap&#xFF0C;&#x5176; &#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x4E0D;&#x5C0F;&#x4E8E; 16 (&#x5177;&#x4F53;&#x4F9D;&#x8D56;&#x4E8E;&#x6307;&#x5B9A;Map&#x7684;&#x5927;&#x5C0F;)&#xFF0C;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x662F; 0.75&#xFF0C;&#x662F; Java Collection Framework &#x89C4;&#x8303;&#x63A8;&#x8350;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x5176;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>/**
 * Constructs an insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance with
 * the same mappings as the specified map.  The &lt;tt&gt;LinkedHashMap&lt;/tt&gt;
 * instance is created with a default load factor (0.75) and an initial
 * capacity sufficient to hold the mappings in the specified map.
 *
 * @param  m the map whose mappings are to be placed in this map
 * @throws NullPointerException if the specified map is null
 */
public LinkedHashMap(Map&lt;? extends K, ? extends V&gt; m) {
    super(m);       // &#x8C03;&#x7528;HashMap&#x5BF9;&#x5E94;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;
    accessOrder = false;    // &#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x7684;&#x9ED8;&#x8BA4;&#x503C;
}
</code></pre><h5 id="init-&#x65B9;&#x6CD5;">init &#x65B9;&#x6CD5;</h5>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x4E94;&#x79CD;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x65E0;&#x8BBA;&#x91C7;&#x7528;&#x4F55;&#x79CD;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;LinkedHashMap&#xFF0C;&#x5176;&#x90FD;&#x4F1A;&#x8C03;&#x7528;HashMap&#x76F8;&#x5E94;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x4E0D;&#x7BA1;&#x8C03;&#x7528;HashMap&#x7684;&#x54EA;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;HashMap&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x90FD;&#x4F1A;&#x5728;&#x6700;&#x540E;&#x8C03;&#x7528;&#x4E00;&#x4E2A;init()&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5728;HashMap&#x4E2D;&#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x5728;LinkedHashMap&#x4E2D;&#x91CD;&#x5199;&#x4E86;&#x5B83;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x5B83;&#x6240;&#x7EF4;&#x62A4;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x3002;&#x4F8B;&#x5982;&#xFF0C;HashMap&#x7684;&#x53C2;&#x6570;&#x4E3A;&#x7A7A;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4EE5;&#x53CA;init&#x65B9;&#x6CD5;&#x7684;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>/**
 * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the default initial capacity
 * (16) and the default load factor (0.75).
 */
public HashMap() {
    this.loadFactor = DEFAULT_LOAD_FACTOR;
    threshold = (int)(DEFAULT_INITIAL_CAPACITY * DEFAULT_LOAD_FACTOR);
    table = new Entry[DEFAULT_INITIAL_CAPACITY];
    init();
}
</code></pre><pre><code>/** 
* Initialization hook for subclasses. This method is called 
* in all constructors and pseudo-constructors (clone, readObject) 
* after HashMap has been initialized but before any entries have 
* been inserted. (In the absence of this method, readObject would 
* require explicit knowledge of subclasses.) */ 
void init() { }
</code></pre><p>&#x5728;LinkedHashMap&#x4E2D;&#xFF0C;&#x5B83;&#x91CD;&#x5199;&#x4E86;init&#x65B9;&#x6CD5;&#x4EE5;&#x4FBF;&#x521D;&#x59CB;&#x5316;&#x53CC;&#x5411;&#x5217;&#x8868;&#xFF0C;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>/** 
* Called by superclass constructors and pseudoconstructors (clone, 
* readObject) before any entries are inserted into the map. Initializes 
* the chain. 
*/ 
void init() { 
    header = new Entry&lt;K,V&gt;(-1, null, null, null); 
    header.before = header.after = header; 
}
</code></pre><p>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x521B;&#x5EFA;LinkedHashMap&#x7684;&#x540C;&#x65F6;&#x5C31;&#x4F1A;&#x4E0D;&#x77E5;&#x4E0D;&#x89C9;&#x5730;&#x5BF9;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<h4 id="linkedhashmap-&#x7684;&#x5FEB;&#x901F;&#x5B58;&#x53D6;">LinkedHashMap &#x7684;&#x5FEB;&#x901F;&#x5B58;&#x53D6;</h4>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x5728;HashMap&#x4E2D;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E24;&#x4E2A;&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#xFF1A;put(Key,Value) &#x548C; get(Key)&#x3002;&#x540C;&#x6837;&#x5730;&#xFF0C;&#x5728; LinkedHashMap &#x4E2D;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E5F;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;put(Key,Value)&#x65B9;&#x6CD5;&#x800C;&#x8A00;&#xFF0C;LinkedHashMap&#x5B8C;&#x5168;&#x7EE7;&#x627F;&#x4E86;HashMap&#x7684; put(Key,Value) &#x65B9;&#x6CD5;&#xFF0C;<strong>&#x53EA;&#x662F;&#x5BF9;put(Key,Value)&#x65B9;&#x6CD5;&#x6240;&#x8C03;&#x7528;&#x7684;recordAccess&#x65B9;&#x6CD5;&#x548C;addEntry&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5199;&#xFF1B;&#x5BF9;&#x4E8E;get(Key)&#x65B9;&#x6CD5;&#x800C;&#x8A00;&#xFF0C;LinkedHashMap&#x5219;&#x76F4;&#x63A5;&#x5BF9;&#x5B83;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5199;</strong>&#x3002;</p>
<h5 id="linkedhashmap-&#x7684;&#x5B58;&#x50A8;&#x5B9E;&#x73B0;--putkey-vlaue">LinkedHashMap &#x7684;&#x5B58;&#x50A8;&#x5B9E;&#x73B0; : put(key, vlaue)</h5>
<p>LinkedHashMap&#x6CA1;&#x6709;&#x5BF9; put(key,vlaue) &#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x76F4;&#x63A5;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x5B8C;&#x5168;&#x7EE7;&#x627F;&#x4E86;HashMap&#x7684; put(Key,Value) &#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>public V put(K key, V value) {

    //&#x5F53;key&#x4E3A;null&#x65F6;&#xFF0C;&#x8C03;&#x7528;putForNullKey&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x952E;&#x503C;&#x5BF9;&#x4FDD;&#x5B58;&#x5230;table&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E; 
    if (key == null)
        return putForNullKey(value); 

    //&#x6839;&#x636E;key&#x7684;hashCode&#x8BA1;&#x7B97;hash&#x503C;
    int hash = hash(key.hashCode());           

    //&#x8BA1;&#x7B97;&#x8BE5;&#x952E;&#x503C;&#x5BF9;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#xFF08;&#x54EA;&#x4E2A;&#x6876;&#xFF09;
    int i = indexFor(hash, table.length);              

    //&#x5728;table&#x7684;&#x7B2C;i&#x4E2A;&#x6876;&#x4E0A;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#xFF0C;&#x5BFB;&#x627E; key &#x4FDD;&#x5B58;&#x7684;&#x4F4D;&#x7F6E;
    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {      
        Object k;
        //&#x5224;&#x65AD;&#x8BE5;&#x6761;&#x94FE;&#x4E0A;&#x662F;&#x5426;&#x5B58;&#x5728;hash&#x503C;&#x76F8;&#x540C;&#x4E14;key&#x503C;&#x76F8;&#x7B49;&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x82E5;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8986;&#x76D6; value&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x65E7;value
        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {
            V oldValue = e.value;
            e.value = value;
            e.recordAccess(this); // LinkedHashMap&#x91CD;&#x5199;&#x4E86;Entry&#x4E2D;&#x7684;recordAccess&#x65B9;&#x6CD5;--- (1)    
            return oldValue;    // &#x8FD4;&#x56DE;&#x65E7;&#x503C;
        }
    }

    modCount++; //&#x4FEE;&#x6539;&#x6B21;&#x6570;&#x589E;&#x52A0;1&#xFF0C;&#x5FEB;&#x901F;&#x5931;&#x8D25;&#x673A;&#x5236;

    //&#x539F;Map&#x4E2D;&#x65E0;&#x8BE5;&#x6620;&#x5C04;&#xFF0C;&#x5C06;&#x8BE5;&#x6DFB;&#x52A0;&#x81F3;&#x8BE5;&#x94FE;&#x7684;&#x94FE;&#x5934;
    addEntry(hash, key, value, i);  // LinkedHashMap&#x91CD;&#x5199;&#x4E86;HashMap&#x4E2D;&#x7684;createEntry&#x65B9;&#x6CD5; ---- (2)    
    return null;
}
</code></pre><p>&#x4E0A;&#x8FF0;&#x6E90;&#x7801;&#x53CD;&#x6620;&#x4E86;LinkedHashMap&#x4E0E;HashMap&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x7279;&#x522B;&#x5730;&#xFF0C;&#x5728;LinkedHashMap&#x4E2D;&#xFF0C;&#x5B83;&#x5BF9;addEntry&#x65B9;&#x6CD5;&#x548C;Entry&#x7684;recordAccess&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5199;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5BF9;&#x6BD4;&#x5730;&#x770B;&#x4E00;&#x4E0B;LinkedHashMap &#x548C;HashMap&#x7684;addEntry&#x65B9;&#x6CD5;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code>/**
 * This override alters behavior of superclass put method. It causes newly
 * allocated entry to get inserted at the end of the linked list and
 * removes the eldest entry if appropriate.
 *
 * LinkedHashMap&#x4E2D;&#x7684;addEntry&#x65B9;&#x6CD5;
 */
void addEntry(int hash, K key, V value, int bucketIndex) {   

    //&#x521B;&#x5EFA;&#x65B0;&#x7684;Entry&#xFF0C;&#x5E76;&#x63D2;&#x5165;&#x5230;LinkedHashMap&#x4E2D;  
    createEntry(hash, key, value, bucketIndex);  // &#x91CD;&#x5199;&#x4E86;HashMap&#x4E2D;&#x7684;createEntry&#x65B9;&#x6CD5;

    //&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x8282;&#x70B9;&#xFF08;header&#x540E;&#x7684;&#x90A3;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x4E3A;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x8FD9;&#x662F;&#x7528;&#x6765;&#x652F;&#x6301;LRU&#x7B97;&#x6CD5;&#x7684;
    Entry&lt;K,V&gt; eldest = header.after;  
    //&#x5982;&#x679C;&#x6709;&#x5FC5;&#x8981;&#xFF0C;&#x5219;&#x5220;&#x9664;&#x6389;&#x8BE5;&#x8FD1;&#x671F;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#x8282;&#x70B9;&#xFF0C;  
    //&#x8FD9;&#x8981;&#x770B;&#x5BF9;removeEldestEntry&#x7684;&#x8986;&#x5199;,&#x7531;&#x4E8E;&#x9ED8;&#x8BA4;&#x4E3A;false&#xFF0C;&#x56E0;&#x6B64;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#x7684;&#x3002;  
    if (removeEldestEntry(eldest)) {  
        removeEntryForKey(eldest.key);  
    } else {  
        //&#x6269;&#x5BB9;&#x5230;&#x539F;&#x6765;&#x7684;2&#x500D;  
        if (size &gt;= threshold)  
            resize(2 * table.length);  
    }  
} 

-------------------------------&#x6211;&#x662F;&#x5206;&#x5272;&#x7EBF;------------------------------------

 /**
 * Adds a new entry with the specified key, value and hash code to
 * the specified bucket.  It is the responsibility of this
 * method to resize the table if appropriate.
 *
 * Subclass overrides this to alter the behavior of put method.
 * 
 * HashMap&#x4E2D;&#x7684;addEntry&#x65B9;&#x6CD5;
 */
void addEntry(int hash, K key, V value, int bucketIndex) {
    //&#x83B7;&#x53D6;bucketIndex&#x5904;&#x7684;Entry
    Entry&lt;K,V&gt; e = table[bucketIndex];

    //&#x5C06;&#x65B0;&#x521B;&#x5EFA;&#x7684; Entry &#x653E;&#x5165; bucketIndex &#x7D22;&#x5F15;&#x5904;&#xFF0C;&#x5E76;&#x8BA9;&#x65B0;&#x7684; Entry &#x6307;&#x5411;&#x539F;&#x6765;&#x7684; Entry 
    table[bucketIndex] = new Entry&lt;K,V&gt;(hash, key, value, e);

    //&#x82E5;HashMap&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#x8D85;&#x8FC7;&#x6781;&#x9650;&#x4E86;&#xFF0C;&#x5219;&#x5BB9;&#x91CF;&#x6269;&#x5927;&#x4E24;&#x500D;
    if (size++ &gt;= threshold)
        resize(2 * table.length);
}
</code></pre><p>&#x7531;&#x4E8E;LinkedHashMap&#x672C;&#x8EAB;&#x7EF4;&#x62A4;&#x4E86;&#x63D2;&#x5165;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x56E0;&#x6B64;&#x5176;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x505A;&#x7F13;&#x5B58;&#xFF0C;14~19&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#x7528;&#x6765;&#x652F;&#x6301;LRU&#x7B97;&#x6CD5;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x6682;&#x65F6;&#x4E0D;&#x7528;&#x53BB;&#x5173;&#x5FC3;&#x5B83;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5728;LinkedHashMap&#x7684;addEntry&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x5B83;&#x91CD;&#x5199;&#x4E86;HashMap&#x4E2D;&#x7684;createEntry&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x770B;&#x4E00;&#x4E0B;createEntry&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre><code>void createEntry(int hash, K key, V value, int bucketIndex) { 
    // &#x5411;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x63D2;&#x5165;Entry&#xFF0C;&#x8FD9;&#x70B9;&#x4E0E;HashMap&#x4E2D;&#x76F8;&#x540C; 
    //&#x521B;&#x5EFA;&#x65B0;&#x7684;Entry&#x5E76;&#x5C06;&#x5176;&#x94FE;&#x5165;&#x5230;&#x6570;&#x7EC4;&#x5BF9;&#x5E94;&#x6876;&#x7684;&#x94FE;&#x8868;&#x7684;&#x5934;&#x7ED3;&#x70B9;&#x5904;&#xFF0C; 
    HashMap.Entry&lt;K,V&gt; old = table[bucketIndex];  
    Entry&lt;K,V&gt; e = new Entry&lt;K,V&gt;(hash, key, value, old);  
    table[bucketIndex] = e;     

    //&#x5728;&#x6BCF;&#x6B21;&#x5411;&#x54C8;&#x5E0C;&#x8868;&#x63D2;&#x5165;Entry&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x5C06;&#x5176;&#x63D2;&#x5165;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;  
    //&#x8FD9;&#x6837;&#x5C31;&#x6309;&#x7167;Entry&#x63D2;&#x5165;LinkedHashMap&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6765;&#x8FED;&#x4EE3;&#x5143;&#x7D20;(LinkedHashMap&#x6839;&#x636E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x91CD;&#x5199;&#x4E86;&#x8FED;&#x4EE3;&#x5668;)
    //&#x540C;&#x65F6;&#xFF0C;&#x65B0;put&#x8FDB;&#x6765;&#x7684;Entry&#x662F;&#x6700;&#x8FD1;&#x8BBF;&#x95EE;&#x7684;Entry&#xFF0C;&#x628A;&#x5176;&#x653E;&#x5728;&#x94FE;&#x8868;&#x672B;&#x5C3E; &#xFF0C;&#x4E5F;&#x7B26;&#x5408;LRU&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;  
    e.addBefore(header);  
    size++;  
}
</code></pre><p>&#x7531;&#x4EE5;&#x4E0A;&#x6E90;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x5728;LinkedHashMap&#x4E2D;&#x5411;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x63D2;&#x5165;&#x65B0;Entry&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x4F1A;&#x901A;&#x8FC7;Entry&#x7684;addBefore&#x65B9;&#x6CD5;&#x5C06;&#x5176;&#x94FE;&#x5165;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#x3002;&#x5176;&#x4E2D;&#xFF0C;addBefore&#x65B9;&#x6CD5;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>//&#x5728;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#xFF0C;&#x5C06;&#x5F53;&#x524D;&#x7684;Entry&#x63D2;&#x5165;&#x5230;existingEntry(header)&#x7684;&#x524D;&#x9762;  
private void addBefore(Entry&lt;K,V&gt; existingEntry) {  
    after  = existingEntry;  
    before = existingEntry.before;  
    before.after = this;  
    after.before = this;  
}
</code></pre><p>&#x5230;&#x6B64;&#x4E3A;&#x6B62;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x6790;&#x4E86;&#x5728;LinkedHashMap&#x4E2D;put&#x4E00;&#x6761;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x5B8C;&#x6574;&#x8FC7;&#x7A0B;&#x3002;&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x76F8;&#x6BD4;HashMap&#x800C;&#x8A00;&#xFF0C;LinkedHashMap&#x5728;&#x5411;&#x54C8;&#x5E0C;&#x8868;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x5C06;&#x5176;&#x94FE;&#x5165;&#x5230;&#x5B83;&#x6240;&#x7EF4;&#x62A4;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x8BBE;&#x5B9A;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x3002;</p>
<h5 id="linkedhashmap-&#x7684;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;--resize">LinkedHashMap &#x7684;&#x6269;&#x5BB9;&#x64CD;&#x4F5C; : resize()</h5>
<p>&#x5728;HashMap&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x968F;&#x7740;HashMap&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x53D1;&#x751F;&#x78B0;&#x649E;&#x7684;&#x6982;&#x7387;&#x5C06;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x5B50;&#x94FE;&#x957F;&#x5EA6;&#x5C31;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x957F;&#xFF0C;&#x8FD9;&#x6837;&#x52BF;&#x5FC5;&#x4F1A;&#x5F71;&#x54CD;HashMap&#x7684;&#x5B58;&#x53D6;&#x901F;&#x5EA6;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;HashMap&#x7684;&#x6548;&#x7387;&#xFF0C;&#x7CFB;&#x7EDF;&#x5FC5;&#x987B;&#x8981;&#x5728;&#x67D0;&#x4E2A;&#x4E34;&#x754C;&#x70B9;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x5904;&#x7406;&#xFF0C;&#x8BE5;&#x4E34;&#x754C;&#x70B9;&#x5C31;&#x662F;HashMap&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#x5728;&#x6570;&#x503C;&#x4E0A;&#x7B49;&#x4E8E;threshold&#xFF08;table&#x6570;&#x7EC4;&#x957F;&#x5EA6;*&#x52A0;&#x8F7D;&#x56E0;&#x5B50;&#xFF09;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x4E0D;&#x5F97;&#x4E0D;&#x8BF4;&#xFF0C;&#x6269;&#x5BB9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x8017;&#x65F6;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x5728;&#x65B0;table&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x5E76;&#x8FDB;&#x884C;&#x590D;&#x5236;&#x5904;&#x7406;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x63D0;&#x524D;&#x9884;&#x77E5;HashMap&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x6784;&#x9020;HashMap&#x65F6;&#x9884;&#x8BBE;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#x80FD;&#x591F;&#x6709;&#x6548;&#x7684;&#x63D0;&#x9AD8;HashMap&#x7684;&#x6027;&#x80FD;&#x3002;</p>
<p>&#x540C;&#x6837;&#x7684;&#x95EE;&#x9898;&#x4E5F;&#x5B58;&#x5728;&#x4E8E;LinkedHashMap&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;LinkedHashMap&#x672C;&#x6765;&#x5C31;&#x662F;&#x4E00;&#x4E2A;HashMap&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x8FD8;&#x5C06;&#x6240;&#x6709;Entry&#x8282;&#x70B9;&#x94FE;&#x5165;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#x3002;LinkedHashMap&#x5B8C;&#x5168;&#x7EE7;&#x627F;&#x4E86;HashMap&#x7684;resize()&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x662F;&#x5BF9;&#x5B83;&#x6240;&#x8C03;&#x7528;&#x7684;transfer&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5199;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x770B;resize()&#x65B9;&#x6CD5;&#x6E90;&#x7801;&#xFF1A;</p>
<pre><code>void resize(int newCapacity) {
    Entry[] oldTable = table;
    int oldCapacity = oldTable.length;

    // &#x82E5; oldCapacity &#x5DF2;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x76F4;&#x63A5;&#x5C06; threshold &#x8BBE;&#x4E3A; Integer.MAX_VALUE
    if (oldCapacity == MAXIMUM_CAPACITY) {  
        threshold = Integer.MAX_VALUE;
        return;             // &#x76F4;&#x63A5;&#x8FD4;&#x56DE;
    }

    // &#x5426;&#x5219;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x7684;&#x6570;&#x7EC4;
    Entry[] newTable = new Entry[newCapacity];

    //&#x5C06;&#x6BCF;&#x6761;Entry&#x91CD;&#x65B0;&#x54C8;&#x5E0C;&#x5230;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x4E2D;
    transfer(newTable);  //LinkedHashMap&#x5BF9;&#x5B83;&#x6240;&#x8C03;&#x7528;&#x7684;transfer&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5199;

    table = newTable;
    threshold = (int)(newCapacity * loadFactor);  // &#x91CD;&#x65B0;&#x8BBE;&#x5B9A; threshold
}
</code></pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;Map&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x7684;&#x6838;&#x5FC3;&#x5728;&#x4E8E;&#x91CD;&#x54C8;&#x5E0C;&#x3002;&#x6240;&#x8C13;&#x91CD;&#x54C8;&#x5E0C;&#x662F;&#x6307;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x539F;HashMap&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x5728;&#x65B0;table&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x5E76;&#x8FDB;&#x884C;&#x590D;&#x5236;&#x5904;&#x7406;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x9274;&#x4E8E;&#x6027;&#x80FD;&#x548C;LinkedHashMap&#x81EA;&#x8EAB;&#x7279;&#x70B9;&#x7684;&#x8003;&#x91CF;&#xFF0C;LinkedHashMap&#x5BF9;&#x91CD;&#x54C8;&#x5E0C;&#x8FC7;&#x7A0B;(transfer&#x65B9;&#x6CD5;)&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5199;&#xFF0C;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>/**
 * Transfers all entries to new table array.  This method is called
 * by superclass resize.  It is overridden for performance, as it is
 * faster to iterate using our linked list.
 */
void transfer(HashMap.Entry[] newTable) {
    int newCapacity = newTable.length;
    // &#x4E0E;HashMap&#x76F8;&#x6BD4;&#xFF0C;&#x501F;&#x52A9;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x7279;&#x70B9;&#x8FDB;&#x884C;&#x91CD;&#x54C8;&#x5E0C;&#x4F7F;&#x5F97;&#x4EE3;&#x7801;&#x66F4;&#x52A0;&#x7B80;&#x6D01;
    for (Entry&lt;K,V&gt; e = header.after; e != header; e = e.after) {
        int index = indexFor(e.hash, newCapacity);   // &#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;Entry&#x6240;&#x5728;&#x7684;&#x6876;
        // &#x5C06;&#x5176;&#x94FE;&#x5165;&#x6876;&#x4E2D;&#x7684;&#x94FE;&#x8868;
        e.next = newTable[index];
        newTable[index] = e;   
    }
}
</code></pre><h5 id="linkedhashmap-&#x7684;&#x8BFB;&#x53D6;&#x5B9E;&#x73B0;-&#xFF1A;getobject-key">LinkedHashMap &#x7684;&#x8BFB;&#x53D6;&#x5B9E;&#x73B0; &#xFF1A;get(Object key)</h5>
<p>&#x76F8;&#x5BF9;&#x4E8E;LinkedHashMap&#x7684;&#x5B58;&#x50A8;&#x800C;&#x8A00;&#xFF0C;&#x8BFB;&#x53D6;&#x5C31;&#x663E;&#x5F97;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x4E86;&#x3002;LinkedHashMap&#x4E2D;&#x91CD;&#x5199;&#x4E86;HashMap&#x4E2D;&#x7684;get&#x65B9;&#x6CD5;&#xFF0C;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>public V get(Object key) {
    // &#x6839;&#x636E;key&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;Entry&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x7684;Entry&#xFF0C;&#x5219;&#x8FD4;&#x56DE;null
    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)getEntry(key); 
    if (e == null)      // &#x82E5;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x6837;&#x7684;Entry&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;
        return null;
    e.recordAccess(this);
    return e.value;
}

/**
    * Returns the entry associated with the specified key in the
    * HashMap.  Returns null if the HashMap contains no mapping
    * for the key.
    * 
    * HashMap &#x4E2D;&#x7684;&#x65B9;&#x6CD5;
    *     
    */
final Entry&lt;K,V&gt; getEntry(Object key) {
    if (size == 0) {
        return null;
    }

    int hash = (key == null) ? 0 : hash(key);
    for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)];
            e != null;
            e = e.next) {
        Object k;
        if (e.hash == hash &amp;&amp;
            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))
            return e;
    }
    return null;
}
</code></pre><p>&#x5728;LinkedHashMap&#x7684;get&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;HashMap&#x4E2D;&#x7684;getEntry&#x65B9;&#x6CD5;&#x83B7;&#x53D6;Entry&#x5BF9;&#x8C61;&#x3002;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684;recordAccess&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x94FE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x6392;&#x5E8F;&#x89C4;&#x5219;&#x662F;&#x6309;&#x7167;&#x63D2;&#x5165;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x7684;&#x8BDD;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x505A;&#xFF1B;&#x5982;&#x679C;&#x94FE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x6392;&#x5E8F;&#x89C4;&#x5219;&#x662F;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x5C06;e&#x79FB;&#x5230;&#x94FE;&#x8868;&#x7684;&#x672B;&#x5C3E;&#x5904;&#xFF0C;&#x7B14;&#x8005;&#x4F1A;&#x5728;&#x540E;&#x6587;&#x4E13;&#x95E8;&#x9610;&#x8FF0;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<h4 id="linkedhashmap-&#x4E0E;-lruleast-recently-used&#xFF0C;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x7B97;&#x6CD5;">LinkedHashMap &#x4E0E; LRU(Least recently used&#xFF0C;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;)&#x7B97;&#x6CD5;</h4>
<p>LinkedHashMap&#x533A;&#x522B;&#x4E8E;HashMap&#x6700;&#x5927;&#x7684;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x70B9;&#x662F;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x6709;&#x5E8F;&#x7684;&#xFF0C;&#x800C;&#x540E;&#x8005;&#x662F;&#x65E0;&#x5E8F;&#x7684;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;LinkedHashMap&#x589E;&#x52A0;&#x4E86;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x4FDD;&#x8BC1;&#x987A;&#x5E8F;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5934;&#x7ED3;&#x70B9;header&#x548C;&#x6807;&#x5FD7;&#x4F4D;accessOrder&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;header&#x662F;LinkedHashMap&#x6240;&#x7EF4;&#x62A4;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5934;&#x7ED3;&#x70B9;&#xFF0C;&#x800C;accessOrder&#x7528;&#x4E8E;&#x51B3;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;accessOrder&#x6807;&#x5FD7;&#x4F4D;&#x7684;&#x4F5C;&#x7528;&#x53EF;&#x4E0D;&#x50CF;&#x6211;&#x4EEC;&#x63CF;&#x8FF0;&#x7684;&#x8FD9;&#x6837;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x4ED4;&#x7EC6;&#x5206;&#x6790;&#x4E00;&#x6CE2;~</p>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;<strong>&#x5F53;accessOrder&#x6807;&#x5FD7;&#x4F4D;&#x4E3A;true&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6392;&#x5217;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x867D;&#x7136;Entry&#x63D2;&#x5165;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#x4F9D;&#x7136;&#x662F;&#x6309;&#x7167;&#x5176;put&#x5230;LinkedHashMap&#x4E2D;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x4F46;put&#x548C;get&#x65B9;&#x6CD5;&#x5747;&#x6709;&#x8C03;&#x7528;recordAccess&#x65B9;&#x6CD5;&#xFF08;put&#x65B9;&#x6CD5;&#x5728;key&#x76F8;&#x540C;&#x65F6;&#x4F1A;&#x8C03;&#x7528;&#xFF09;&#x3002;</p>
<p><strong>recordAccess&#x65B9;&#x6CD5;&#x5224;&#x65AD;accessOrder&#x662F;&#x5426;&#x4E3A;true&#xFF0C;&#x5982;&#x679C;&#x662F;&#xFF0C;&#x5219;&#x5C06;&#x5F53;&#x524D;&#x8BBF;&#x95EE;&#x7684;Entry&#xFF08;put&#x8FDB;&#x6765;&#x7684;Entry&#x6216;get&#x51FA;&#x6765;&#x7684;Entry&#xFF09;&#x79FB;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#xFF08;key&#x4E0D;&#x76F8;&#x540C;&#x65F6;&#xFF0C;put&#x65B0;Entry&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;addEntry&#xFF0C;&#x5B83;&#x4F1A;&#x8C03;&#x7528;createEntry&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x540C;&#x6837;&#x5C06;&#x65B0;&#x63D2;&#x5165;&#x7684;&#x5143;&#x7D20;&#x653E;&#x5165;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;&#x65E2;&#x7B26;&#x5408;&#x63D2;&#x5165;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x53C8;&#x7B26;&#x5408;&#x8BBF;&#x95EE;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x65F6;&#x8BE5;Entry&#x4E5F;&#x88AB;&#x8BBF;&#x95EE;&#x4E86;&#xFF09;</strong>&#xFF1B;</p>
<p>&#x5F53;&#x6807;&#x5FD7;&#x4F4D;accessOrder&#x7684;&#x503C;&#x4E3A;false&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x6309;&#x7167;Entry&#x63D2;&#x5165;LinkedHashMap&#x5230;&#x4E2D;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x5373;&#x6BCF;&#x6B21;put&#x5230;LinkedHashMap&#x4E2D;&#x7684;Entry&#x90FD;&#x653E;&#x5728;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;&#x8FD9;&#x6837;&#x904D;&#x5386;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x65F6;&#xFF0C;Entry&#x7684;&#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x4FBF;&#x548C;&#x63D2;&#x5165;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x81F4;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5B58;&#x50A8;&#x987A;&#x5E8F;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x6807;&#x5FD7;&#x4F4D;accessOrder&#x7684;&#x503C;&#x4E3A;false&#x65F6;&#xFF0C;&#x867D;&#x7136;&#x4E5F;&#x4F1A;&#x8C03;&#x7528;recordAccess&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x3002;</p>
<h5 id="put&#x64CD;&#x4F5C;&#x4E0E;&#x6807;&#x5FD7;&#x4F4D;accessorder">put&#x64CD;&#x4F5C;&#x4E0E;&#x6807;&#x5FD7;&#x4F4D;accessOrder</h5>
<pre><code>/ &#x5C06;key/value&#x6DFB;&#x52A0;&#x5230;LinkedHashMap&#x4E2D;      
public V put(K key, V value) {      
    // &#x82E5;key&#x4E3A;null&#xFF0C;&#x5219;&#x5C06;&#x8BE5;&#x952E;&#x503C;&#x5BF9;&#x6DFB;&#x52A0;&#x5230;table[0]&#x4E2D;&#x3002;      
    if (key == null)      
        return putForNullKey(value);      
    // &#x82E5;key&#x4E0D;&#x4E3A;null&#xFF0C;&#x5219;&#x8BA1;&#x7B97;&#x8BE5;key&#x7684;&#x54C8;&#x5E0C;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;&#x8BE5;&#x54C8;&#x5E0C;&#x503C;&#x5BF9;&#x5E94;&#x7684;&#x94FE;&#x8868;&#x4E2D;&#x3002;      
    int hash = hash(key.hashCode());      
    int i = indexFor(hash, table.length);      
    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {      
        Object k;      
        // &#x82E5;key&#x5BF9;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x7528;&#x65B0;&#x7684;value&#x53D6;&#x4EE3;&#x65E7;&#x7684;value     
        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {      
            V oldValue = e.value;      
            e.value = value;      
            e.recordAccess(this);      
            return oldValue;      
        }      
    }      

    // &#x82E5;key&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x5C06;key/value&#x952E;&#x503C;&#x5BF9;&#x6DFB;&#x52A0;&#x5230;table&#x4E2D;      
    modCount++;    
    //&#x5C06;key/value&#x952E;&#x503C;&#x5BF9;&#x6DFB;&#x52A0;&#x5230;table[i]&#x5904;    
    addEntry(hash, key, value, i);      
    return null;      
}
</code></pre><p>&#x4ECE;&#x4E0A;&#x8FF0;&#x6E90;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5F53;&#x8981;put&#x8FDB;&#x6765;&#x7684;Entry&#x7684;key&#x5728;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x5DF2;&#x7ECF;&#x5728;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;Entry&#x7684;recordAccess&#x65B9;&#x6CD5;&#xFF1B;&#x5F53;&#x8BE5;key&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x5219;&#x4F1A;&#x8C03;&#x7528;addEntry&#x65B9;&#x6CD5;&#x5C06;&#x65B0;&#x7684;Entry&#x63D2;&#x5165;&#x5230;&#x5BF9;&#x5E94;&#x6876;&#x7684;&#x5355;&#x94FE;&#x8868;&#x7684;&#x5934;&#x90E8;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;recordAccess&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre><code>/**
* This method is invoked by the superclass whenever the value
* of a pre-existing entry is read by Map.get or modified by Map.set.
* If the enclosing Map is access-ordered, it moves the entry
* to the end of the list; otherwise, it does nothing.
*/
void recordAccess(HashMap&lt;K,V&gt; m) {  
    LinkedHashMap&lt;K,V&gt; lm = (LinkedHashMap&lt;K,V&gt;)m;  
    //&#x5982;&#x679C;&#x94FE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x5219;&#x5C06;&#x5F53;&#x524D;&#x8BBF;&#x95EE;&#x7684;Entry&#x79FB;&#x5230;&#x53CC;&#x5411;&#x5FAA;&#x73AF;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;  
    //&#x5982;&#x679C;&#x662F;&#x6309;&#x7167;&#x63D2;&#x5165;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x5219;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x4E8B;&#x60C5;&#x3002;  
    if (lm.accessOrder) {  
        lm.modCount++;  
        //&#x79FB;&#x9664;&#x5F53;&#x524D;&#x8BBF;&#x95EE;&#x7684;Entry  
        remove();  
        //&#x5C06;&#x5F53;&#x524D;&#x8BBF;&#x95EE;&#x7684;Entry&#x63D2;&#x5165;&#x5230;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;  
        addBefore(lm.header);  
      }  
  }
</code></pre><p>LinkedHashMap&#x91CD;&#x5199;&#x4E86;HashMap&#x4E2D;&#x7684;recordAccess&#x65B9;&#x6CD5;&#xFF08;HashMap&#x4E2D;&#x8BE5;&#x65B9;&#x6CD5;&#x4E3A;&#x7A7A;&#xFF09;&#xFF0C;&#x5F53;&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x7684;put&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x5728;&#x53D1;&#x73B0;key&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF1B;&#x5F53;&#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x7684;get&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x8C03;&#x7528;&#x5230;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x8BE5;&#x65B9;&#x6CD5;&#x63D0;&#x4F9B;&#x4E86;LRU&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5B83;&#x5C06;&#x6700;&#x8FD1;&#x4F7F;&#x7528;&#x7684;Entry&#x653E;&#x5230;&#x53CC;&#x5411;&#x5FAA;&#x73AF;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;accessOrder&#x4E3A;true&#x65F6;&#xFF0C;get&#x65B9;&#x6CD5;&#x548C;put&#x65B9;&#x6CD5;&#x90FD;&#x4F1A;&#x8C03;&#x7528;recordAccess&#x65B9;&#x6CD5;&#x4F7F;&#x5F97;&#x6700;&#x8FD1;&#x4F7F;&#x7528;&#x7684;Entry&#x79FB;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x672B;&#x5C3E;&#xFF1B;&#x5F53;accessOrder&#x4E3A;&#x9ED8;&#x8BA4;&#x503C;false&#x65F6;&#xFF0C;&#x4ECE;&#x6E90;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;recordAccess&#x65B9;&#x6CD5;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x4F1A;&#x505A;&#x3002;</p>
<h5 id="get&#x64CD;&#x4F5C;&#x4E0E;&#x6807;&#x5FD7;&#x4F4D;accessorder">get&#x64CD;&#x4F5C;&#x4E0E;&#x6807;&#x5FD7;&#x4F4D;accessOrder</h5>
<pre><code>public V get(Object key) {
    // &#x6839;&#x636E;key&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;Entry&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x7684;Entry&#xFF0C;&#x5219;&#x8FD4;&#x56DE;null
    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)getEntry(key); 
    if (e == null)      // &#x82E5;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x6837;&#x7684;Entry&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;
        return null;
    e.recordAccess(this);
    return e.value;
}
</code></pre><p>&#x5728;LinkedHashMap&#x4E2D;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E00;&#x6837;&#x4E5F;&#x4F1A;&#x8C03;&#x7528;recordAccess&#x65B9;&#x6CD5;</p>
<h5 id="linkedlistmap&#x4E0E;lru&#x5C0F;&#x7ED3;">LinkedListMap&#x4E0E;LRU&#x5C0F;&#x7ED3;</h5>
<p>&#x4F7F;&#x7528;LinkedHashMap&#x5B9E;&#x73B0;LRU&#x7684;&#x5FC5;&#x8981;&#x524D;&#x63D0;&#x662F;&#x5C06;accessOrder&#x6807;&#x5FD7;&#x4F4D;&#x8BBE;&#x4E3A;true&#x4EE5;&#x4FBF;&#x5F00;&#x542F;&#x6309;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x7684;&#x6A21;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;put&#x65B9;&#x6CD5;&#x8FD8;&#x662F;get&#x65B9;&#x6CD5;&#xFF0C;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x76EE;&#x6807;Entry&#x6210;&#x4E3A;&#x6700;&#x8FD1;&#x8BBF;&#x95EE;&#x7684;Entry&#xFF0C;&#x56E0;&#x6B64;&#x5C31;&#x628A;&#x8BE5;Entry&#x52A0;&#x5165;&#x5230;&#x4E86;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x672B;&#x5C3E;&#xFF1A;get&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x8C03;&#x7528;recordAccess&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#xFF1B;</p>
<p>put&#x65B9;&#x6CD5;&#x5728;&#x8986;&#x76D6;&#x5DF2;&#x6709;key&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x8C03;&#x7528;recordAccess&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x5728;&#x63D2;&#x5165;&#x65B0;&#x7684;Entry&#x65F6;&#xFF0C;&#x5219;&#x662F;&#x901A;&#x8FC7;createEntry&#x4E2D;&#x7684;addBefore&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x4FBF;&#x628A;&#x6700;&#x8FD1;&#x4F7F;&#x7528;&#x7684;Entry&#x653E;&#x5165;&#x5230;&#x4E86;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x540E;&#x9762;&#x3002;&#x591A;&#x6B21;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x524D;&#x9762;&#x7684;Entry&#x4FBF;&#x662F;&#x6700;&#x8FD1;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x5F53;&#x8282;&#x70B9;&#x4E2A;&#x6570;&#x6EE1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5220;&#x9664;&#x6700;&#x524D;&#x9762;&#x7684;Entry(head&#x540E;&#x9762;&#x7684;&#x90A3;&#x4E2A;Entry)&#x5373;&#x53EF;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5C31;&#x662F;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x7684;Entry&#x3002;</p>
<h5 id="&#x4F7F;&#x7528;linkedhashmap&#x5B9E;&#x73B0;lru&#x7B97;&#x6CD5;">&#x4F7F;&#x7528;LinkedHashMap&#x5B9E;&#x73B0;LRU&#x7B97;&#x6CD5;</h5>
<p>&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF0C;&#x7B14;&#x8005;&#x4F7F;&#x7528;LinkedHashMap&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B26;&#x5408;LRU&#x7B97;&#x6CD5;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x8BE5;&#x7ED3;&#x6784;&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x7F13;&#x5B58;6&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x4F46;&#x5143;&#x7D20;&#x591A;&#x4F59;&#x516D;&#x4E2A;&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x6700;&#x8FD1;&#x6700;&#x4E45;&#x6CA1;&#x6709;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code>public class LRU&lt;K,V&gt; extends LinkedHashMap&lt;K, V&gt; implements Map&lt;K, V&gt;{

    private static final long serialVersionUID = 1L;

    public LRU(int initialCapacity,
             float loadFactor,
                        boolean accessOrder) {
        super(initialCapacity, loadFactor, accessOrder);
    }

    /** 
     * @description &#x91CD;&#x5199;LinkedHashMap&#x4E2D;&#x7684;removeEldestEntry&#x65B9;&#x6CD5;&#xFF0C;&#x5F53;LRU&#x4E2D;&#x5143;&#x7D20;&#x591A;&#x4F59;6&#x4E2A;&#x65F6;&#xFF0C;
     *              &#x5220;&#x9664;&#x6700;&#x4E0D;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x5143;&#x7D20;
     * @author rico       
     * @created 2017&#x5E74;5&#x6708;12&#x65E5; &#x4E0A;&#x5348;11:32:51      
     * @param eldest
     * @return     
     * @see java.util.LinkedHashMap#removeEldestEntry(java.util.Map.Entry)     
     */  
    @Override
    protected boolean removeEldestEntry(java.util.Map.Entry&lt;K, V&gt; eldest) {
        // TODO Auto-generated method stub
        if(size() &gt; 6){
            return true;
        }
        return false;
    }

    public static void main(String[] args) {

        LRU&lt;Character, Integer&gt; lru = new LRU&lt;Character, Integer&gt;(
                16, 0.75f, true);

        String s = &quot;abcdefghijkl&quot;;
        for (int i = 0; i &lt; s.length(); i++) {
            lru.put(s.charAt(i), i);
        }
        System.out.println(&quot;LRU&#x4E2D;key&#x4E3A;h&#x7684;Entry&#x7684;&#x503C;&#x4E3A;&#xFF1A; &quot; + lru.get(&apos;h&apos;));
        System.out.println(&quot;LRU&#x7684;&#x5927;&#x5C0F; &#xFF1A;&quot; + lru.size());
        System.out.println(&quot;LRU &#xFF1A;&quot; + lru);
    }
}
</code></pre><p>&#x4E0B;&#x56FE;&#x662F;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="../_images/java_linkedhm_3.png" alt="linkedhm_3"></p>
<h4 id="jdk18&#x7684;&#x6539;&#x52A8;">JDK1.8&#x7684;&#x6539;&#x52A8;</h4>
<p>&#x539F;&#x6587;&#x662F;&#x57FA;&#x4E8E;JDK1.6&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;JDK1.8&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4E86;&#x6539;&#x52A8;&#x3002; &#x9996;&#x5148;&#x5B83;&#x5220;&#x9664;&#x4E86;addentry&#xFF0C;createenrty&#x7B49;&#x65B9;&#x6CD5;&#xFF08;&#x4E8B;&#x5B9E;&#x4E0A;&#x662F;hashmap&#x7684;&#x6539;&#x52A8;&#x5F71;&#x54CD;&#x4E86;&#x5B83;&#x800C;&#x5DF2;&#xFF09;&#x3002;</p>
<p>linkedhashmap&#x540C;&#x6837;&#x4F7F;&#x7528;&#x4E86;&#x5927;&#x90E8;&#x5206;hashmap&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x65B9;&#x6CD5;&#x3002; &#x65B0;&#x7248;&#x672C;linkedhashmap&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;&#x5BF9;hashmap&#x5185;&#x7F6E;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#x91CD;&#x5199;&#x6765;&#x5B9E;&#x73B0;lru&#x7684;&#x3002;</p>
<p>hashmap&#x4E0D;&#x63D0;&#x4F9B;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code>void afterNodeAccess(Node&lt;K,V&gt; p) { }
void afterNodeInsertion(boolean evict) { }
void afterNodeRemoval(Node&lt;K,V&gt; p) { }
</code></pre><p>linkedhashmap&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code>void afterNodeAccess(Node&lt;K,V&gt; e) { // move node to last
        LinkedHashMap.Entry&lt;K,V&gt; last;
        if (accessOrder &amp;&amp; (last = tail) != e) {
            LinkedHashMap.Entry&lt;K,V&gt; p =
                (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;
            p.after = null;
            if (b == null)
                head = a;
            else
                b.after = a;
            if (a != null)
                a.before = b;
            else
                last = b;
            if (last == null)
                head = p;
            else {
                p.before = last;
                last.after = p;
            }
            tail = p;
            ++modCount;
        }
    }
</code></pre><p>&#x5904;&#x7406;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x540E;&#x7684;&#x60C5;&#x51B5;</p>
<pre><code>void afterNodeInsertion(boolean evict) { // possibly remove eldest
    LinkedHashMap.Entry&lt;K,V&gt; first;
    if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) {
        K key = first.key;
        removeNode(hash(key), key, null, false, true);
    }
</code></pre><p>&#x5904;&#x7406;&#x5143;&#x7D20;&#x88AB;&#x5220;&#x9664;&#x540E;&#x7684;&#x60C5;&#x51B5;</p>
<pre><code>void afterNodeRemoval(Node&lt;K,V&gt; e) { // unlink
    LinkedHashMap.Entry&lt;K,V&gt; p =
        (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;
    p.before = p.after = null;
    if (b == null)
        head = a;
    else
        b.after = a;
    if (a == null)
        tail = b;
    else
        a.before = b;
}
}
</code></pre><p>&#x53E6;&#x5916;1.8&#x7684;hashmap&#x5728;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;8&#x65F6;&#x81EA;&#x52A8;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x4F1A;&#x6309;&#x987A;&#x5E8F;&#x63D2;&#x5165;&#x94FE;&#x8868;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x6765;&#x5B9A;&#x4E49;&#x8282;&#x70B9;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x3002;</p>
<p>1.8&#x7684;linkedhashmap&#x540C;&#x6837;&#x4F1A;&#x4F7F;&#x7528;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#xFF0C;&#x5F53;&#x53D8;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x4EE5;&#x540E;&#xFF0C;&#x8282;&#x70B9;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x540C;&#x6837;&#x662F;&#x63D2;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x5176;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x6027;&#x8D28;&#x6CA1;&#x6709;&#x6539;&#x8868;&#xFF0C;&#x53EA;&#x662F;&#x539F;&#x6765;hashmap&#x7684;&#x94FE;&#x8868;&#x53D8;&#x6210;&#x4E86;&#x7EA2;&#x9ED1;&#x6811;&#x800C;&#x5DF2;&#xFF0C;&#x5728;&#x6B64;&#x4E0D;&#x8981;&#x6DF7;&#x6DC6;&#x3002;</p>
<h4 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h4>
<p>&#x672C;&#x6587;&#x4ECE;linkedhashmap&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4EE5;&#x53CA;&#x6E90;&#x7801;&#x5206;&#x6790;&#xFF0C;&#x5230;&#x6700;&#x540E;&#x7684;LRU&#x7F13;&#x5B58;&#x5B9E;&#x73B0;&#xFF0C;&#x6BD4;&#x8F83;&#x6DF1;&#x5165;&#x5730;&#x5256;&#x6790;&#x4E86;linkedhashmap&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;&#x3002; &#x603B;&#x7ED3;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;</p>
<ul>
<li><p>1 linkedhashmap&#x5728;hashmap&#x7684;&#x6570;&#x7EC4;&#x52A0;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x8282;&#x70B9;&#x8FDE;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x3002;</p>
</li>
<li><p>2 &#x5F53;&#x4E3B;&#x52A8;&#x4F20;&#x5165;&#x7684;accessOrder&#x53C2;&#x6570;&#x4E3A;false&#x65F6;, &#x4F7F;&#x7528;put&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x65B0;&#x52A0;&#x5165;&#x5143;&#x7D20;&#x4E0D;&#x4F1A;&#x88AB;&#x52A0;&#x5165;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;get&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x65F6;&#x4E5F;&#x4E0D;&#x4F1A;&#x628A;&#x5143;&#x7D20;&#x653E;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5C3E;&#x90E8;&#x3002;</p>
</li>
<li><p>3 &#x5F53;&#x4E3B;&#x52A8;&#x4F20;&#x5165;&#x7684;accessOrder&#x53C2;&#x6570;&#x4E3A;true&#x65F6;&#xFF0C;&#x4F7F;&#x7528;put&#x65B9;&#x6CD5;&#x65B0;&#x52A0;&#x5165;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x9047;&#x5230;&#x4E86;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;key&#x503C;&#x76F8;&#x540C;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x4E86;&#x66FF;&#x6362;&#xFF0C;&#x5C31;&#x4F1A;&#x88AB;&#x653E;&#x5728;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;&#x5F53;&#x5143;&#x7D20;&#x8D85;&#x8FC7;&#x4E0A;&#x9650;&#x4E14;removeEldestEntry&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;true&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x6700;&#x65E9;&#x5143;&#x7D20;&#x4EE5;&#x4FBF;&#x65B0;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B2;&#x7A81;&#x76F4;&#x63A5;&#x653E;&#x5165;&#xFF0C;&#x540C;&#x6837;&#x52A0;&#x5165;&#x5230;&#x94FE;&#x8868;&#x5C3E;&#x90E8;&#x3002;&#x4F7F;&#x7528;get&#x65B9;&#x6CD5;&#x65F6;&#x4F1A;&#x628A;get&#x5230;&#x7684;&#x5143;&#x7D20;&#x653E;&#x5165;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5C3E;&#x90E8;&#x3002;</p>
</li>
<li><p>4 linkedhashmap&#x7684;&#x6269;&#x5BB9;&#x6BD4;hashmap&#x6765;&#x7684;&#x65B9;&#x4FBF;&#xFF0C;&#x56E0;&#x4E3A;hashmap&#x9700;&#x8981;&#x5C06;&#x539F;&#x6765;&#x7684;&#x6BCF;&#x4E2A;&#x94FE;&#x8868;&#x7684;&#x5143;&#x7D20;&#x5206;&#x522B;&#x5728;&#x65B0;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x53CD;&#x5411;&#x63D2;&#x5165;&#x94FE;&#x5316;&#xFF0C;&#x800C;linkedhashmap&#x7684;&#x5143;&#x7D20;&#x90FD;&#x8FDE;&#x5728;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FED;&#x4EE3;&#x7136;&#x540E;&#x63D2;&#x5165;&#x3002;</p>
</li>
<li><p>5 linkedhashmap&#x7684;removeEldestEntry&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;false&#xFF0C;&#x8981;&#x5B9E;&#x73B0;lru&#x5F88;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#x96C6;&#x5408;&#x6EE1;&#x65F6;&#x8981;&#x5C06;&#x6700;&#x4E45;&#x672A;&#x8BBF;&#x95EE;&#x7684;&#x5143;&#x7D20;&#x5220;&#x9664;&#xFF0C;&#x5728;linkedhashmap&#x4E2D;&#x8FD9;&#x4E2A;&#x5143;&#x7D20;&#x5C31;&#x662F;&#x5934;&#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5143;&#x7D20;&#x3002;&#x5B9E;&#x73B0;LRU&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;&#x7EE7;&#x627F;linkedhashmap&#x5E76;&#x91CD;&#x5199;removeEldestEntry&#x65B9;&#x6CD5;&#x6765;&#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#x5927;&#x5C0F;&#x3002;jdk&#x4E2D;&#x5B9E;&#x73B0;&#x4E86;LRUCache&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
</li>
</ul>
<h3 id="4treemap&#x4E86;&#x89E3;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3001;&#x4E86;&#x89E3;&#x5176;key&#x5BF9;&#x8C61;&#x4E3A;&#x4EC0;&#x4E48;&#x5FC5;&#x987B;&#x8981;&#x5B9E;&#x73B0;compare&#x63A5;&#x53E3;&#x3001;&#x5982;&#x4F55;&#x7528;&#x5B83;&#x5B9E;&#x73B0;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;">4.TreeMap&#x4E86;&#x89E3;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3001;&#x4E86;&#x89E3;&#x5176;key&#x5BF9;&#x8C61;&#x4E3A;&#x4EC0;&#x4E48;&#x5FC5;&#x987B;&#x8981;&#x5B9E;&#x73B0;Compare&#x63A5;&#x53E3;&#x3001;&#x5982;&#x4F55;&#x7528;&#x5B83;&#x5B9E;&#x73B0;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;</h3>
<p>&#x4E0E;HashMap&#x76F8;&#x6BD4;&#xFF0C;TreeMap&#x662F;&#x4E00;&#x4E2A;&#x80FD;&#x6BD4;&#x8F83;&#x5143;&#x7D20;&#x5927;&#x5C0F;&#x7684;Map&#x96C6;&#x5408;&#xFF0C;&#x4F1A;&#x5BF9;&#x4F20;&#x5165;&#x7684;key&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x5C0F;&#x6392;&#x5E8F;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5143;&#x7D20;&#x7684;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x96C6;&#x5408;&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6BD4;&#x8F83;&#x5668;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF1B;</p>
<p>&#x4E0D;&#x540C;&#x4E8E;HashMap&#x7684;&#x54C8;&#x5E0C;&#x6620;&#x5C04;&#xFF0C;TreeMap&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4E86;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#xFF0C;&#x81F3;&#x4E8E;&#x5177;&#x4F53;&#x5F62;&#x6001;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x9897;&#x5012;&#x8FC7;&#x6765;&#x7684;&#x6811;---&#x6839;&#x5728;&#x4E0A;--&#x53F6;&#x5728;&#x4E0B;&#x3002;&#x5982;&#x679C;&#x7528;&#x8BA1;&#x7B97;&#x673A;&#x672F;&#x8BED;&#x6765;&#x8BF4;&#x7684;&#x8BDD;&#xFF0C;TreeMap&#x5B9E;&#x73B0;&#x4E86;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x9897;&#x4E8C;&#x53C9;&#x6811;&#x3002;</p>
<p><img src="../_images/java_treemap_1.png" alt="treemap_1"></p>
<p>TreeMap&#x7EE7;&#x627F;&#x4E8E;AbstractMap&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;Map, Cloneable, NavigableMap, Serializable&#x63A5;&#x53E3;&#x3002;</p>
<p>(1)TreeMap &#x7EE7;&#x627F;&#x4E8E;AbstractMap&#xFF0C;&#x800C;AbstractMap&#x5B9E;&#x73B0;&#x4E86;Map&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;Map&#x63A5;&#x53E3;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x5176;&#x5B50;&#x7C7B;&#x7EE7;&#x627F;&#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF1B;</p>
<p>(2)TreeMap &#x5B9E;&#x73B0;&#x4E86;Map&#x63A5;&#x53E3;&#xFF0C;&#x6210;&#x4E3A;Map&#x6846;&#x67B6;&#x4E2D;&#x7684;&#x4E00;&#x5458;&#xFF0C;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x7740;key--value&#x5F62;&#x5F0F;&#x7684;&#x5143;&#x7D20;&#xFF1B;</p>
<p>(3)TreeMap &#x5B9E;&#x73B0;&#x4E86;NavigableMap&#x63A5;&#x53E3;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x62E5;&#x6709;&#x4E86;&#x66F4;&#x5F3A;&#x7684;&#x5143;&#x7D20;&#x641C;&#x7D22;&#x80FD;&#x529B;&#xFF1B;</p>
<p>(4)TreeMap &#x5B9E;&#x73B0;&#x4E86;Cloneable&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;clone()&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x88AB;&#x514B;&#x9686;&#xFF1B;</p>
<p>(5)TreeMap &#x5B9E;&#x73B0;&#x4E86;Java.io.Serializable&#x63A5;&#x53E3;&#xFF0C;&#x652F;&#x6301;&#x5E8F;&#x5217;&#x5316;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;Hessian&#x534F;&#x8BAE;&#x8FDB;&#x884C;&#x4F20;&#x8F93;&#xFF1B;</p>
<p>&#x5BF9;&#x4E8E;Cloneable, Serializable&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x719F;&#x6089;&#x4E0D;&#x8FC7;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;Java&#x96C6;&#x5408;&#x6846;&#x67B6;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x7C7B;&#x90FD;&#x4F1A;&#x5B9E;&#x73B0;&#x8FD9;2&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x800C;NavigableMap&#x63A5;&#x53E3;&#x662F;&#x5E72;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x529F;&#x80FD;&#xFF1F;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x901A;&#x8FC7;NavigableMap&#x7684;&#x6E90;&#x7801;&#x6765;&#x770B;&#x4E0B;&#xFF01;</p>
<p>&#x6211;&#x4EEC;&#x9996;&#x5148;&#x4ECB;&#x7ECD;&#x4E0B;NavigableMap&#x4F53;&#x7CFB;&#x4E2D;&#x7684;<strong>SortedMap</strong>&#x63A5;&#x53E3;&#xFF1A;</p>
<p>&#x5BF9;&#x4E8E;SortedMap&#x6765;&#x8BF4;&#xFF0C;&#x8BE5;&#x7C7B;&#x662F;TreeMap&#x4F53;&#x7CFB;&#x4E2D;&#x7684;&#x7236;&#x63A5;&#x53E3;&#xFF0C;&#x4E5F;&#x662F;&#x533A;&#x522B;&#x4E8E;HashMap&#x4F53;&#x7CFB;&#x6700;&#x5173;&#x952E;&#x7684;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x5C31;&#x662F;SortedMap&#x63A5;&#x53E3;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5; <strong>Comparator&lt;? super K&gt; comparator()</strong>&#xFF1B;</p>
<p>&#x8BE5;&#x65B9;&#x6CD5;&#x51B3;&#x5B9A;&#x4E86;TreeMap&#x4F53;&#x7CFB;&#x7684;&#x8D70;&#x5411;&#xFF0C;&#x6709;&#x4E86;&#x6BD4;&#x8F83;&#x5668;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x63D2;&#x5165;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x4E86;&#xFF1B;</p>
<pre><code>public interface SortedMap&lt;K,V&gt; extends Map&lt;K,V&gt; {

    //&#x8FD4;&#x56DE;&#x5143;&#x7D20;&#x6BD4;&#x8F83;&#x5668;&#x3002;&#x5982;&#x679C;&#x662F;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;null&#xFF1B;
    Comparator&lt;? super K&gt; comparator();

    //&#x8FD4;&#x56DE;&#x4ECE;fromKey&#x5230;toKey&#x7684;&#x96C6;&#x5408;&#xFF1A;&#x542B;&#x5934;&#x4E0D;&#x542B;&#x5C3E;
    java.util.SortedMap&lt;K,V&gt; subMap(K fromKey, K toKey);

    //&#x8FD4;&#x56DE;&#x4ECE;&#x5934;&#x5230;toKey&#x7684;&#x96C6;&#x5408;&#xFF1A;&#x4E0D;&#x5305;&#x542B;toKey
    java.util.SortedMap&lt;K,V&gt; headMap(K toKey);

    //&#x8FD4;&#x56DE;&#x4ECE;fromKey&#x5230;&#x7ED3;&#x5C3E;&#x7684;&#x96C6;&#x5408;&#xFF1A;&#x5305;&#x542B;fromKey
    java.util.SortedMap&lt;K,V&gt; tailMap(K fromKey);

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    K firstKey();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    K lastKey();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x6240;&#x6709;key&#x7684;&#x96C6;&#x5408;&#xFF1A;
    Set&lt;K&gt; keySet();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x6240;&#x6709;value&#x7684;&#x96C6;&#x5408;&#xFF1A;
    Collection&lt;V&gt; values();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x6620;&#x5C04;&#xFF1A;
    Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet();
}
</code></pre><p>&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;SortedMap&#x63A5;&#x53E3;&#xFF0C;&#x800C;NavigableMap&#x63A5;&#x53E3;&#x53C8;&#x662F;&#x5BF9;SortedMap&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x6269;&#x5C55;&#xFF1A;&#x4E3B;&#x8981;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x96C6;&#x5408;&#x5185;&#x5143;&#x7D20;&#x7684;&#x641C;&#x7D22;&#x83B7;&#x53D6;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x67D0;&#x4E00;&#x533A;&#x95F4;&#x5185;&#x7684;&#x5143;&#x7D20;&#x3001;&#x8FD4;&#x56DE;&#x5C0F;&#x4E8E;&#x5927;&#x4E8E;&#x67D0;&#x4E00;&#x503C;&#x7684;&#x5143;&#x7D20;&#x7B49;&#x7C7B;&#x4F3C;&#x64CD;&#x4F5C;&#x3002;</p>
<pre><code>public interface NavigableMap&lt;K,V&gt; extends SortedMap&lt;K,V&gt; {

    //&#x8FD4;&#x56DE;&#x5C0F;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    Map.Entry&lt;K,V&gt; lowerEntry(K key);

    //&#x8FD4;&#x56DE;&#x5C0F;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x952E;&#xFF1A;
    K lowerKey(K key);

    //&#x8FD4;&#x56DE;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    Map.Entry&lt;K,V&gt; floorEntry(K key);

    //&#x8FD4;&#x56DE;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x952E;&#xFF1A;
    K floorKey(K key);

    //&#x8FD4;&#x56DE;&#x5927;&#x4E8E;&#x6216;&#x8005;&#x7B49;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    Map.Entry&lt;K,V&gt; ceilingEntry(K key);

    //&#x8FD4;&#x56DE;&#x5927;&#x4E8E;&#x6216;&#x8005;&#x7B49;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x952E;&#xFF1A;
    K ceilingKey(K key);

    //&#x8FD4;&#x56DE;&#x5927;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    Map.Entry&lt;K,V&gt; higherEntry(K key);

    //&#x8FD4;&#x56DE;&#x5927;&#x4E8E;key&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x952E;&#xFF1A;
    K higherKey(K key);

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    Map.Entry&lt;K,V&gt; firstEntry();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF1A;
    Map.Entry&lt;K,V&gt; lastEntry();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664;&#xFF1A;
    Map.Entry&lt;K,V&gt; pollFirstEntry();

    //&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664;&#xFF1A;
    Map.Entry&lt;K,V&gt; pollLastEntry();

    //&#x8FD4;&#x56DE;&#x5012;&#x5E8F;&#x7684;Map&#x96C6;&#x5408;&#xFF1A;
    java.util.NavigableMap&lt;K,V&gt; descendingMap();

    NavigableSet&lt;K&gt; navigableKeySet();

    //&#x8FD4;&#x56DE;Map&#x96C6;&#x5408;&#x4E2D;&#x5012;&#x5E8F;&#x7684;Key&#x7EC4;&#x6210;&#x7684;Set&#x96C6;&#x5408;&#xFF1A;
    NavigableSet&lt;K&gt; descendingKeySet();

    java.util.NavigableMap&lt;K,V&gt; subMap(K fromKey, boolean fromInclusive,
                                       K toKey, boolean toInclusive);

    java.util.NavigableMap&lt;K,V&gt; headMap(K toKey, boolean inclusive);

    java.util.NavigableMap&lt;K,V&gt; tailMap(K fromKey, boolean inclusive);

    SortedMap&lt;K,V&gt; subMap(K fromKey, K toKey);

    SortedMap&lt;K,V&gt; headMap(K toKey);

    SortedMap&lt;K,V&gt; tailMap(K fromKey);
}
</code></pre><p>&#x5176;&#x5B9E;&#xFF0C;NavigableMap&#x7684;&#x76EE;&#x7684;&#x5F88;&#x7B80;&#x5355;&#x3001;&#x5F88;&#x76F4;&#x63A5;&#xFF0C;&#x5C31;&#x662F;&#x589E;&#x5F3A;&#x4E86;&#x5BF9;&#x96C6;&#x5408;&#x5185;&#x5143;&#x7D20;&#x7684;&#x641C;&#x7D22;&#x3001;&#x83B7;&#x53D6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5F53;&#x5B50;&#x7C7B;TreeMap&#x5B9E;&#x73B0;&#x65F6;&#xFF0C;&#x81EA;&#x7136;&#x83B7;&#x53D6;&#x4EE5;&#x4E0A;&#x7684;&#x529F;&#x80FD;&#xFF1B;</p>
<p>TreeMap&#x5177;&#x6709;&#x5982;&#x4E0B;&#x7279;&#x70B9;&#xFF1A;</p>
<ul>
<li><p>&#x4E0D;&#x5141;&#x8BB8;&#x51FA;&#x73B0;&#x91CD;&#x590D;&#x7684;key&#xFF1B;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x63D2;&#x5165;null&#x952E;&#xFF0C;null&#x503C;&#xFF1B;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF1B;</p>
</li>
<li><p>&#x65E0;&#x5E8F;&#x96C6;&#x5408;&#xFF08;&#x63D2;&#x5165;&#x548C;&#x904D;&#x5386;&#x987A;&#x5E8F;&#x4E0D;&#x4E00;&#x81F4;&#xFF09;&#xFF1B;</p>
</li>
</ul>
<h4 id="treemap&#x57FA;&#x672C;&#x64CD;&#x4F5C;">TreeMap&#x57FA;&#x672C;&#x64CD;&#x4F5C;</h4>
<pre><code>public class TreeMapTest {
    public static void main(String[] agrs){
        //&#x521B;&#x5EFA;TreeMap&#x5BF9;&#x8C61;&#xFF1A;
        TreeMap&lt;String,Integer&gt; treeMap = new TreeMap&lt;String,Integer&gt;();
        System.out.println(&quot;&#x521D;&#x59CB;&#x5316;&#x540E;,TreeMap&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x4E3A;&#xFF1A;&quot; + treeMap.size());

        //&#x65B0;&#x589E;&#x5143;&#x7D20;:
        treeMap.put(&quot;hello&quot;,1);
        treeMap.put(&quot;world&quot;,2);
        treeMap.put(&quot;test&quot;,6);
        System.out.println(&quot;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x540E;,TreeMap&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x4E3A;&#xFF1A;&quot; + treeMap.size());

        //&#x904D;&#x5386;&#x5143;&#x7D20;&#xFF1A;
        Set&lt;Map.Entry&lt;String,Integer&gt;&gt; entrySet = treeMap.entrySet();
        for(Map.Entry&lt;String,Integer&gt; entry : entrySet){
            String key = entry.getKey();
            Integer value = entry.getValue();
            System.out.println(&quot;TreeMap&#x5143;&#x7D20;&#x7684;key:&quot;+key+&quot;,value:&quot;+value);
        }

        //&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;key&#xFF1A;
        Set&lt;String&gt; keySet = treeMap.keySet();
        for(String strKey:keySet){
            System.out.println(&quot;TreeMap&#x96C6;&#x5408;&#x4E2D;&#x7684;key:&quot;+strKey);
        }

        //&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;value:
        Collection&lt;Integer&gt; valueList = treeMap.values();
        for(Integer intValue:valueList){
            System.out.println(&quot;TreeMap&#x96C6;&#x5408;&#x4E2D;&#x7684;value:&quot; + intValue);
        }

        //&#x83B7;&#x53D6;&#x5143;&#x7D20;&#xFF1A;
        Integer getValue = treeMap.get(&quot;test&quot;);//&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x5185;&#x5143;&#x7D20;key&#x4E3A;&quot;test&quot;&#x7684;&#x503C;
        String firstKey = treeMap.firstKey();//&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x5185;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;
        String lastKey =treeMap.lastKey();//&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x5185;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;
        String lowerKey =treeMap.lowerKey(&quot;test&quot;);//&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x5185;&#x7684;key&#x5C0F;&#x4E8E;&quot;test&quot;&#x7684;key
        String ceilingKey =treeMap.ceilingKey(&quot;test&quot;);//&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x5185;&#x7684;key&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&quot;test&quot;&#x7684;key
        SortedMap&lt;String,Integer&gt; sortedMap =treeMap.subMap(&quot;a&quot;,&quot;my&quot;);//&#x83B7;&#x53D6;&#x96C6;&#x5408;&#x7684;key&#x4ECE;&quot;a&quot;&#x5230;&quot;test&quot;&#x7684;&#x5143;&#x7D20;

        //&#x5220;&#x9664;&#x5143;&#x7D20;&#xFF1A;
        Integer removeValue = treeMap.remove(&quot;test&quot;);//&#x5220;&#x9664;&#x96C6;&#x5408;&#x4E2D;key&#x4E3A;&quot;test&quot;&#x7684;&#x5143;&#x7D20;
        treeMap.clear(); //&#x6E05;&#x7A7A;&#x96C6;&#x5408;&#x5143;&#x7D20;&#xFF1A;

        //&#x5224;&#x65AD;&#x65B9;&#x6CD5;&#xFF1A;
        boolean isEmpty = treeMap.isEmpty();//&#x5224;&#x65AD;&#x96C6;&#x5408;&#x662F;&#x5426;&#x4E3A;&#x7A7A;
        boolean isContain = treeMap.containsKey(&quot;test&quot;);//&#x5224;&#x65AD;&#x96C6;&#x5408;&#x7684;key&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;&quot;test&quot;
    }
}
</code></pre><h4 id="treemap&#x6392;&#x5E8F;">TreeMap&#x6392;&#x5E8F;</h4>
<h5 id="&#xFF08;1&#xFF09;&#x4F7F;&#x7528;&#x5143;&#x7D20;&#x81EA;&#x7136;&#x6392;&#x5E8F;&#x5B9E;&#x73B0;comparable&#x63A5;&#x53E3;">&#xFF08;1&#xFF09;&#x4F7F;&#x7528;&#x5143;&#x7D20;&#x81EA;&#x7136;&#x6392;&#x5E8F;(&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;)</h5>
<p>&#x5728;&#x4F7F;&#x7528;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x533A;&#x5206;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;&#x4E00;&#x79CD;&#x662F;Jdk&#x5B9A;&#x4E49;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x5BF9;&#x8C61;&#xFF1B;</p>
<pre><code>public class SortedTest implements Comparable&lt;SortedTest&gt; {
    private int age;
    public SortedTest(int age){
        this.age = age;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    //&#x81EA;&#x5B9A;&#x4E49;&#x5BF9;&#x8C61;&#xFF0C;&#x5B9E;&#x73B0;compareTo(T o)&#x65B9;&#x6CD5;&#xFF1A;
    public int compareTo(SortedTest sortedTest) {
        int num = this.age - sortedTest.getAge();
        //&#x4E3A;0&#x65F6;&#x5019;&#xFF0C;&#x4E24;&#x8005;&#x76F8;&#x540C;&#xFF1A;
        if(num==0){
            return 0;
        //&#x5927;&#x4E8E;0&#x65F6;&#xFF0C;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x5C0F;&#xFF1A;
        }else if(num&gt;0){
            return 1;
        //&#x5C0F;&#x4E8E;0&#x65F6;&#xFF0C;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x5927;&#xFF1A;
        }else{
            return -1;
        }
    }
}

public class TreeMapTest {
    public static void main(String[] agrs){
        //&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6BD4;&#x8F83;
        naturalSort();
    }
     //&#x81EA;&#x7136;&#x6392;&#x5E8F;&#x987A;&#x5E8F;&#xFF1A;
    public static void naturalSort(){
        //&#x7B2C;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;Integer&#x5BF9;&#x8C61;
        TreeMap&lt;Integer,String&gt; treeMapFirst = new TreeMap&lt;Integer, String&gt;();
        treeMapFirst.put(1,&quot;sorted test&quot;);
        treeMapFirst.put(6,&quot;sorted test&quot;);
        treeMapFirst.put(3,&quot;sorted test&quot;);
        System.out.println(treeMapFirst.toString());

        //&#x7B2C;&#x4E8C;&#x79CD;&#x60C5;&#x51B5;:SortedTest&#x5BF9;&#x8C61;
        TreeMap&lt;SortedTest,String&gt; treeMapSecond = new TreeMap&lt;SortedTest, String&gt;();
        treeMapSecond.put(new SortedTest(10),&quot;sorted test&quot;);
        treeMapSecond.put(new SortedTest(1),&quot;sorted test&quot;);
        treeMapSecond.put(new SortedTest(13),&quot;sorted test&quot;);
        System.out.println(treeMapSecond.toString());
    }
}
</code></pre><p>&#x5728;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6BD4;&#x8F83;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x8BA9;&#x88AB;&#x6BD4;&#x8F83;&#x7684;&#x5143;&#x7D20;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#xFF0C;&#x5426;&#x5219;&#x5728;&#x5411;&#x96C6;&#x5408;&#x91CC;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x65F6;&#x62A5;&#xFF1A;&quot;java.lang.ClassCastException: com.jiaboyan.collection.map.SortedTest cannot be cast to java.lang.Comparable&quot;&#x5F02;&#x5E38;&#xFF1B;</p>
<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x8C03;&#x7528;put()&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4F1A;&#x5C06;&#x4F20;&#x5165;&#x7684;&#x5143;&#x7D20;&#x8F6C;&#x5316;&#x6210;Comparable&#x7C7B;&#x578B;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x4F60;&#x4F20;&#x5165;&#x7684;&#x5143;&#x7D20;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#x65F6;&#xFF0C;&#x5C31;&#x65E0;&#x6CD5;&#x8F6C;&#x6362;&#xFF0C;&#x904D;&#x4F1A;&#x62A5;&#x9519;&#xFF1B;</p>
<h5 id="&#xFF08;2&#xFF09;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x6392;&#x5E8F;&#x5B9E;&#x73B0;comparator&#x63A5;&#x53E3;">&#xFF08;2&#xFF09;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x6392;&#x5E8F;(&#x5B9E;&#x73B0;Comparator&#x63A5;&#x53E3;)</h5>
<p>&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x6392;&#x5E8F;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x521B;&#x5EFA;TreeMap&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5C06;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x5BF9;&#x8C61;&#x4F20;&#x5165;&#x5230;TreeMap&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#xFF1B;</p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x5BF9;&#x8C61;&#xFF0C;&#x9700;&#x8981;&#x5B9E;&#x73B0;Comparator&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x6BD4;&#x8F83;&#x65B9;&#x6CD5;compare(T o1,T o2)&#xFF1B;</p>
<p>&#x503C;&#x5F97;&#x4E00;&#x63D0;&#x7684;&#x662F;&#xFF0C;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x6392;&#x5E8F;&#x7684;&#x8BDD;&#xFF0C;&#x88AB;&#x6BD4;&#x8F83;&#x7684;&#x5BF9;&#x8C61;&#x65E0;&#x9700;&#x518D;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#x4E86;&#xFF1B;</p>
<pre><code>public class SortedTest {
    private int age;
    public SortedTest(int age){
        this.age = age;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
}
public class SortedTestComparator implements Comparator&lt;SortedTest&gt; {
    //&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#xFF1A;&#x5B9E;&#x73B0;compare(T o1,T o2)&#x65B9;&#x6CD5;&#xFF1A;
    public int compare(SortedTest sortedTest1, SortedTest sortedTest2) {
        int num = sortedTest1.getAge() - sortedTest2.getAge();
        if(num==0){//&#x4E3A;0&#x65F6;&#x5019;&#xFF0C;&#x4E24;&#x8005;&#x76F8;&#x540C;&#xFF1A;
            return 0;
        }else if(num&gt;0){//&#x5927;&#x4E8E;0&#x65F6;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x53C2;&#x6570;&#x5C0F;&#xFF1A;
            return 1;
        }else{//&#x5C0F;&#x4E8E;0&#x65F6;&#xFF0C;&#x524D;&#x9762;&#x7684;&#x53C2;&#x6570;&#x5C0F;&#xFF1A;
            return -1;
        }
    }
}

public class TreeMapTest {
    public static void main(String[] agrs){
        //&#x81EA;&#x5B9A;&#x4E49;&#x987A;&#x5E8F;&#x6BD4;&#x8F83;
        customSort();
    }
    //&#x81EA;&#x5B9A;&#x4E49;&#x6392;&#x5E8F;&#x987A;&#x5E8F;:
    public static void customSort(){
        TreeMap&lt;SortedTest,String&gt; treeMap = new TreeMap&lt;SortedTest, String&gt;(new SortedTestComparator());
        treeMap.put(new SortedTest(10),&quot;hello&quot;);
        treeMap.put(new SortedTest(21),&quot;my&quot;);
        treeMap.put(new SortedTest(7),&quot;world&quot;);
        System.out.println(treeMap.toString());
    }
}
</code></pre><h4 id="&#x6570;&#x636E;&#x7ED3;&#x6784;">&#x6570;&#x636E;&#x7ED3;&#x6784;</h4>
<p>&#x6811;&#x53EA;&#x662F;&#x4E00;&#x79CD;&#x7B80;&#x79F0;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x8FD8;&#x662F;&#x4EA4;&#x7531;&#x5176;&#x5B50;&#x6811;&#x6765;&#x5B8C;&#x6210;&#xFF1B;&#x8FD9;&#x5176;&#x4E2D;&#x5C31;&#x5305;&#x62EC;&#xFF1A;&#x4E8C;&#x53C9;&#x6811;&#x3001;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#x3001;&#x7EA2;&#x9ED1;&#x6811;&#x3001;B&#x6811;&#x3001;&#x54C8;&#x592B;&#x66FC;&#x6811;&#x7B49;&#x3002;&#x5728;&#x672C;&#x7AE0;&#x8282;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x5176;&#x4E2D;&#x7684;&#x4E24;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;---&#x4E8C;&#x53C9;&#x6811;&#x3001;&#x7EA2;&#x9ED1;&#x6811;&#xFF1B;</p>
<p><img src="../_images/java_treemap_2.png" alt="treemap_2"></p>
<h5 id="&#x6811;&#x7684;&#x76F8;&#x5173;&#x672F;&#x8BED;">&#x6811;&#x7684;&#x76F8;&#x5173;&#x672F;&#x8BED;</h5>
<p><strong>&#x8282;&#x70B9;(Nood)</strong>&#xFF1A;&#x6811;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x53EB;&#x505A;&#x8282;&#x70B9;&#xFF0C;&#x53C8;&#x6216;&#x8005;&#x79F0;&#x4E3A;&#x7ED3;&#x70B9;&#xFF1B;&#x56FE;&#x4E2D;A&#x3001;B&#x3001;C&#x3001;D&#x7B49;&#x90FD;&#x79F0;&#x4E4B;&#x4E3A;&#x8282;&#x70B9;&#xFF1B;</p>
<p><strong>&#x6839;&#x8282;&#x70B9;(&#x6811;&#x6839;-Root)</strong>&#xFF1A;&#x5728;&#x6811;&#x4E2D;&#xFF0C;&#x6700;&#x9876;&#x7AEF;&#x7684;&#x8282;&#x70B9;&#x79F0;&#x4E4B;&#x4E3A;&#x6839;&#x8282;&#x70B9;(&#x6811;&#x6839;-Root)&#xFF1B;A&#x8282;&#x70B9;&#x5C31;&#x662F;&#x6574;&#x4E2A;&#x6811;&#x7684;&#x6839;&#x8282;&#x70B9;&#xFF1B;</p>
<p><strong>&#x5B50;&#x6811;</strong>&#xFF1A;&#x9664;&#x4E86;&#x6839;&#x8282;&#x70B9;&#x4E4B;&#x5916;&#xFF0C;&#x5176;&#x4F59;&#x8282;&#x70B9;&#x81EA;&#x7531;&#x7EC4;&#x5408;&#x6210;&#x7684;&#x6811;&#xFF0C;&#x79F0;&#x4E4B;&#x4E3A;&#x5B50;&#x6811;&#xFF0C;&#x5B50;&#x6811;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#xFF1B;&#x5176;&#x4E2D;&#xFF0C;Q&#x8282;&#x70B9;&#x53EF;&#x79F0;&#x4E4B;&#x4E3A;&#x5B50;&#x6811;&#xFF0C;B&#x3001;D&#x3001;G&#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x7ED3;&#x5408;&#x4E5F;&#x53EF;&#x4EE5;&#x79F0;&#x4E4B;&#x4E3A;&#x5B50;&#x6811;&#xFF1B;</p>
<p><strong>&#x53F6;&#x5B50;&#x8282;&#x70B9;(&#x53F6;&#x8282;&#x70B9;)</strong>&#xFF1A;&#x6CA1;&#x6709;&#x5B69;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x79F0;&#x4E4B;&#x4E3A;&#x53F6;&#x5B50;&#x8282;&#x70B9;(&#x53F6;&#x8282;&#x70B9;),&#x4E5F;&#x5C31;&#x662F;&#x8BE5;&#x8282;&#x70B9;&#x4E0B;&#x9762;&#x6CA1;&#x6709;&#x5B50;&#x8282;&#x70B9;&#x4E86;&#xFF1B;&#x56FE;&#x4E2D;D&#x3001;G&#x3001;Q&#x3001;V&#x79F0;&#x4E4B;&#x4E3A;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF1B;</p>
<p><strong>&#x7236;&#x8282;&#x70B9;</strong>&#xFF1A;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x9762;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x8BE5;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1B;B&#x8282;&#x70B9;&#x662F;D&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF0C;C&#x8282;&#x70B9;&#x662F;Q&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1B;</p>
<p><strong>&#x6811;&#x7684;&#x9AD8;&#x5EA6;</strong>&#xFF1A;&#x4ECE;&#x53F6;&#x5B50;&#x8282;&#x70B9;(&#x6B64;&#x65F6;&#x9AD8;&#x5EA6;&#x4E3A;1)&#x5F00;&#x59CB;&#x81EA;&#x5E95;&#x5411;&#x4E0A;&#x9010;&#x5C42;&#x589E;&#x52A0;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x503C;&#x79F0;&#x4E4B;&#x4E3A;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#xFF1B;&#x622A;&#x56FE;&#x4E2D;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x4E3A;4&#xFF08;V&#x3001;H&#x3001;C&#x3001;A&#xFF09;;</p>
<p><strong>&#x6811;&#x7684;&#x6DF1;&#x5EA6;</strong>&#xFF1A;&#x4ECE;&#x6839;&#x8282;&#x70B9;(&#x6B64;&#x65F6;&#x6DF1;&#x5EA6;&#x4E3A;1)&#x5F00;&#x59CB;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x9010;&#x5C42;&#x589E;&#x52A0;&#xFF0C;&#x6700;&#x7EC8;&#x5F97;&#x5230;&#x7684;&#x503C;&#x79F0;&#x4E4B;&#x4E3A;&#x6811;&#x7684;&#x6DF1;&#x5EA6;&#xFF1B;&#x622A;&#x56FE;&#x4E2D;&#x6811;&#x7684;&#x6DF1;&#x5EA6;&#x4E3A;4(A&#x3001;C&#x3001;H&#x3001;V);</p>
<h5 id="&#x4E8C;&#x53C9;&#x6811;">&#x4E8C;&#x53C9;&#x6811;</h5>
<p>&#x4E8C;&#x53C9;&#x6811;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E5F;&#x6CA1;&#x6709;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x96C6;&#x5408;&#xFF1B;&#x4E8C;&#x53C9;&#x6811;&#x89C4;&#x5B9A;&#x4E86;&#x5728;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4E0B;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x62E5;&#x6709;&#x4E24;&#x4E2A;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x4E00;&#x5DE6;&#x4E00;&#x53F3;&#xFF1B;&#x5176;&#x4E2D;&#xFF0C;&#x5DE6;&#x8282;&#x70B9;&#x53EF;&#x4EE5;&#x79F0;&#x4E3A;&#x5DE6;&#x5B50;&#x6811;&#xFF0C;&#x53F3;&#x8282;&#x70B9;&#x79F0;&#x4E3A;&#x53F3;&#x5B50;&#x6811;&#xFF1B;&#x4F46;&#x6CA1;&#x6709;&#x8981;&#x6C42;&#x5DE6;&#x5B50;&#x6811;&#x4E2D;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x7684;&#x503C;&#x8981;&#x5C0F;&#x4E8E;&#x53F3;&#x5B50;&#x6811;&#x4E2D;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x7684;&#x503C;&#x3002;</p>
<p>&#x4E8C;&#x53C9;&#x6811;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code>public class TreeNode {

    //&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF1A;
    private int data;
    //&#x6307;&#x5411;&#x5DE6;&#x5B69;&#x5B50;&#x7684;&#x6307;&#x9488;&#xFF1A;
    private TreeNode leftTreeNode;
    //&#x6307;&#x5411;&#x53F3;&#x5B69;&#x5B50;&#x7684;&#x6307;&#x9488;&#xFF1A;
    private TreeNode rightTreeNode;
    //&#x6307;&#x5411;&#x7236;&#x8282;&#x70B9;&#x7684;&#x6307;&#x9488;
    private TreeNode parentNode;

    public TreeNode(int data, TreeNode leftTreeNode,
                    TreeNode rightTreeNode, TreeNode parentNode) {
        this.data = data;
        this.leftTreeNode = leftTreeNode;
        this.rightTreeNode = rightTreeNode;
        this.parentNode = parentNode;
    }
    public int getData() {
        return data;
    }
    public void setData(int data) {
        this.data = data;
    }
    public TreeNode getLeftTreeNode() {
        return leftTreeNode;
    }
    public void setLeftTreeNode(TreeNode leftTreeNode) {
        this.leftTreeNode = leftTreeNode;
    }
    public TreeNode getRightTreeNode() {
        return rightTreeNode;
    }
    public void setRightTreeNode(TreeNode rightTreeNode) {
        this.rightTreeNode = rightTreeNode;
    }
    public TreeNode getParentNode() {return parentNode;}
    public void setParentNode(TreeNode parentNode) {this.parentNode = parentNode;}
}
</code></pre><h5 id="&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;">&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;</h5>
<p>&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x89C4;&#x5B9A;&#xFF1A;</p>
<pre><code>&#x5982;&#x679C;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x7684;&#x5DE6;&#x5B50;&#x6811;&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x5DE6;&#x5B50;&#x6811;&#x4E0A;&#x7684;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x7684;&#x503C;&#x90FD;&#x5C0F;&#x4E8E;&#x6839;&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF1B;

&#x5982;&#x679C;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x7684;&#x53F3;&#x5B50;&#x6811;&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x53F3;&#x5B50;&#x6811;&#x4E0A;&#x7684;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x7684;&#x503C;&#x90FD;&#x5927;&#x4E8E;&#x6839;&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF1B;
</code></pre><p>&#x5982;&#x679C;&#x67E5;&#x627E;&#x7684;&#x5143;&#x7D20;&#x5927;&#x4E8E;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x5728;&#x6811;&#x7684;&#x53F3;&#x8FB9;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#xFF1B;&#x5982;&#x679C;&#x5C0F;&#x4E8E;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x5728;&#x6811;&#x7684;&#x5DE6;&#x8FB9;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x3002;&#x5982;&#x679C;&#x7B49;&#x4E8E;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF1B;&#x6240;&#x4EE5;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x7684;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x8FDC;&#x8FDC;&#x9AD8;&#x4E8E;&#x4E8C;&#x53C9;&#x6811;&#x3002;</p>
<h5 id="&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF08;avl&#x6811;&#xFF09;">&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF08;AVL&#x6811;&#xFF09;</h5>
<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x4E8C;&#x53C9;&#x6811;&#x7684;&#x5DE6;&#x5B50;&#x6811;&#x4E3A;&#x7A7A;&#xFF0C;&#x53EA;&#x6709;&#x53F3;&#x5B50;&#x6811;&#xFF0C;&#x4E14;&#x53F3;&#x5B50;&#x6811;&#x4E2D;&#x53C8;&#x53EA;&#x6709;&#x53F3;&#x8282;&#x70B9;&#xFF08;&#x5DE6;&#x8282;&#x70B9;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x4E8C;&#x53C9;&#x6811;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x4E0D;&#x6298;&#x4E0D;&#x6263;&#x7684;&#x94FE;&#x8868;&#x3002;&#x5BF9;&#x4E8E;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x6765;&#x8BF4;&#xFF0C;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x4E5F;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x539F;&#x6709;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x53D8;&#x6210;&#x4E86;&#x987A;&#x5E8F;&#x67E5;&#x627E;&#x3002;&#x5373;&#x5143;&#x7D20;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x662F;1&#x3001;2&#x3001;3&#x3001;4&#x3001;5&#x3001;6&#x7684;&#x8BDD;&#xFF0C;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x9488;&#x5BF9;&#x8FD9;&#x4E00;&#x60C5;&#x51B5;&#xFF0C;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#x51FA;&#x73B0;&#x4E86;&#xFF08;&#x53C8;&#x79F0;&#x4E3A;AVL&#x6811;&#xFF09;&#xFF0C;&#x5B83;&#x8981;&#x6C42;&#x5DE6;&#x53F3;&#x5B50;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x5DEE;&#x7684;&#x7EDD;&#x5BF9;&#x503C;&#x4E0D;&#x80FD;&#x5927;&#x4E8E;1&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5DE6;&#x53F3;&#x5B50;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x5DEE;&#x53EA;&#x80FD;&#x4E3A;-1&#x3001;0&#x3001;1&#x3002;</p>
<h5 id="&#x7EA2;&#x9ED1;&#x6811;">&#x7EA2;&#x9ED1;&#x6811;</h5>
<p>&#x7EC8;&#x4E8E;&#x8BF4;&#x5230;&#x4E86;&#x4ECA;&#x5929;&#x7684;&#x91CD;&#x4E2D;&#x4E4B;&#x91CD;--&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x76F8;&#x6BD4;&#x4E8E;&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x96BE;&#x5EA6;&#x6709;&#x6240;&#x589E;&#x52A0;&#x3002;</p>
<p>&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x4F9D;&#x65E7;&#x4E00;&#x9897;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#xFF0C;&#x5B83;&#x6EE1;&#x8DB3;&#x4E86;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x5373;&#x5DE6;&#x5B50;&#x6811;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x7684;&#x503C;&#x6C38;&#x8FDC;&#x5C0F;&#x4E8E;&#x53F3;&#x5B50;&#x6811;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x7684;&#x503C;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x81F4;&#x547D;&#x7684;&#x5F31;&#x70B9;&#xFF0C;&#x5373;&#x5DE6;&#x5B50;&#x6811;(&#x53F3;&#x5B50;&#x6811;)&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;&#xFF0C;&#x800C;&#x63D2;&#x5165;&#x7684;&#x8282;&#x70B9;&#x5168;&#x90E8;&#x96C6;&#x4E2D;&#x5230;&#x4E86;&#x6811;&#x7684;&#x53E6;&#x4E00;&#x7AEF;&#xFF0C;&#x81F4;&#x4F7F;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x5931;&#x53BB;&#x4E86;&#x5E73;&#x8861;&#xFF0C;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x4E0B;&#x964D;&#xFF0C;&#x4ECE;&#x800C;&#x5931;&#x53BB;&#x4E86;&#x4F7F;&#x7528;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x7684;&#x610F;&#x4E49;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x7EF4;&#x62A4;&#x6811;&#x7684;&#x5E73;&#x8861;&#x6027;&#xFF0C;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF08;AVL&#x6811;&#xFF09;&#x51FA;&#x73B0;&#x4E86;&#xFF0C;&#x5B83;&#x7528;&#x5DE6;&#x53F3;&#x5B50;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x5DEE;&#x6765;&#x4FDD;&#x6301;&#x7740;&#x6811;&#x7684;&#x5E73;&#x8861;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x672C;&#x8282;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x7528;&#x7684;&#x662F;&#x8282;&#x70B9;&#x7684;&#x989C;&#x8272;&#x6765;&#x7EF4;&#x6301;&#x6811;&#x7684;&#x5E73;&#x8861;&#x3002;</p>
<p>&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5373;&#x7EA2;&#x989C;&#x8272;&#x548C;&#x9ED1;&#x989C;&#x8272;&#x5E76;&#x5B58;&#x7684;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x63D2;&#x5165;&#x7684;&#x5143;&#x7D20;&#x8282;&#x70B9;&#x4F1A;&#x88AB;&#x8D4B;&#x4E3A;&#x7EA2;&#x8272;&#x6216;&#x8005;&#x9ED1;&#x8272;&#xFF0C;&#x5F85;&#x6240;&#x6709;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x5B8C;&#x6210;&#x540E;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x9897;&#x5B8C;&#x6574;&#x7684;&#x7EA2;&#x9ED1;&#x6811;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="../_images/java_treemap_3.jpg" alt="treemap_3"></p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x4F60;&#x4E0D;&#x8981;&#x60F3;&#x5F53;&#x7136;&#x7684;&#x4EE5;&#x4E3A;&#x53EA;&#x662F;&#x7ED9;&#x4E8C;&#x53C9;&#x6811;&#x7684;&#x9636;&#x6BB5;&#x968F;&#x610F;&#x8D4B;&#x4E3A;&#x9ED1;&#x8272;&#x6216;&#x8005;&#x7EA2;&#x8272;&#xFF0C;&#x5C31;&#x53EF;&#x4FDD;&#x8BC1;&#x6811;&#x7684;&#x5E73;&#x8861;&#x3002;&#x4E8B;&#x60C5;&#x8FDC;&#x6CA1;&#x6709;&#x4F60;&#x60F3;&#x8C61;&#x7684;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#x3002;</p>
<p>&#x4E00;&#x9897;&#x7EA2;&#x9ED1;&#x6811;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x4E00;&#x4E0B;&#x51E0;&#x70B9;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p>1.&#x6811;&#x4E2D;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5FC5;&#x987B;&#x662F;&#x6709;&#x989C;&#x8272;&#x7684;&#xFF0C;&#x8981;&#x4E48;&#x7EA2;&#x8272;&#xFF0C;&#x8981;&#x4E48;&#x9ED1;&#x8272;&#xFF1B;</p>
</li>
<li><p>2.&#x6811;&#x4E2D;&#x7684;&#x6839;&#x8282;&#x70B9;&#x5FC5;&#x987B;&#x662F;&#x9ED1;&#x8272;&#x7684;&#xFF1B;</p>
</li>
<li><p>3.&#x6811;&#x4E2D;&#x7684;&#x53F6;&#x8282;&#x70B9;&#x5FC5;&#x987B;&#x662F;&#x9ED1;&#x8272;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6811;&#x5C3E;&#x7684;NIL&#x8282;&#x70B9;&#x6216;&#x8005;&#x4E3A;null&#x7684;&#x8282;&#x70B9;&#xFF1B;</p>
</li>
<li><p>4.&#x6811;&#x4E2D;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x5982;&#x679C;&#x662F;&#x7EA2;&#x8272;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x4E24;&#x4E2A;&#x5B50;&#x8282;&#x70B9;&#x4E00;&#x70B9;&#x662F;&#x9ED1;&#x8272;&#x7684;&#xFF1B;</p>
</li>
<li><p>5.&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x5230;&#x53F6;&#x8282;&#x70B9;&#xFF08;&#x6811;&#x6700;&#x4E0B;&#x9762;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x7684;&#x6BCF;&#x4E00;&#x6761;&#x8DEF;&#x5F84;&#x6240;&#x5305;&#x542B;&#x7684;&#x9ED1;&#x8272;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x4E00;&#x5B9A;&#x76F8;&#x540C;&#xFF1B;</p>
</li>
</ul>
<p>&#x79D1;&#x666E;&#xFF1A;NIL&#x8282;&#x70B9;&#x662F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5047;&#x60F3;&#x7684;&#x6216;&#x662F;&#x65E0;&#x5B9E;&#x5728;&#x610F;&#x4E49;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x6240;&#x6709;&#x5E94;&#x8BE5;&#x6307;&#x5411;NULL&#x7684;&#x6307;&#x9488;&#xFF0C;&#x90FD;&#x770B;&#x6210;&#x6307;&#x5411;&#x4E86;NIL&#x8282;&#x70B9;&#x3002;&#x5305;&#x62EC;&#x53F6;&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x6307;&#x9488;&#x6216;&#x662F;&#x6839;&#x8282;&#x70B9;&#x7684;&#x7236;&#x6307;&#x9488;&#xFF08;&#x5747;&#x662F;&#x6307;&#x5411;null&#x7684;&#xFF09;</p>
<p>&#x9664;&#x4E86;&#x7ED9;&#x8282;&#x70B9;&#x8D4B;&#x989C;&#x8272;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x4F1A;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5DE6;&#x65CB;&#x3001;&#x53F3;&#x65CB;&#x64CD;&#x4F5C;&#xFF0C;&#x4EE5;&#x6765;&#x7EF4;&#x6301;&#x6811;&#x7684;&#x5E73;&#x8861;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5DE6;&#x65CB;&#x3001;&#x53F3;&#x65CB;&#x53C8;&#x4EC0;&#x4E48;&#xFF1F;</p>
<h6 id="&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;">&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;</h6>
<pre><code>public class TreeNode {
    //&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF1A;
    private int data;
    //&#x8282;&#x70B9;&#x7684;&#x989C;&#x8272;&#xFF1A;
    private String color;
    //&#x6307;&#x5411;&#x5DE6;&#x5B69;&#x5B50;&#x7684;&#x6307;&#x9488;&#xFF1A;
    private TreeNode leftTreeNode;
    //&#x6307;&#x5411;&#x53F3;&#x5B69;&#x5B50;&#x7684;&#x6307;&#x9488;&#xFF1A;
    private TreeNode rightTreeNode;
    //&#x6307;&#x5411;&#x7236;&#x8282;&#x70B9;&#x7684;&#x6307;&#x9488;
    private TreeNode parentNode;

    public TreeNode(int data, String color, TreeNode leftTreeNode,
                    TreeNode rightTreeNode, TreeNode parentNode) {
        this.data = data;
        this.color = color;
        this.leftTreeNode = leftTreeNode;
        this.rightTreeNode = rightTreeNode;
        this.parentNode = parentNode;
    }
    public int getData() {
        return data;
    }
    public void setData(int data) {
        this.data = data;
    }
    public String getColor() {return color;}
    public void setColor(String color) {this.color = color;}
    public TreeNode getLeftTreeNode() {
        return leftTreeNode;
    }
    public void setLeftTreeNode(TreeNode leftTreeNode) {
        this.leftTreeNode = leftTreeNode;
    }
    public TreeNode getRightTreeNode() {
        return rightTreeNode;
    }
    public void setRightTreeNode(TreeNode rightTreeNode) {
        this.rightTreeNode = rightTreeNode;
    }
    public TreeNode getParentNode() {return parentNode;}
    public void setParentNode(TreeNode parentNode) {this.parentNode = parentNode;}
}
</code></pre><h6 id="&#x65CB;&#x8F6C;">&#x65CB;&#x8F6C;</h6>
<p>&#x4E0A;&#x9762;&#x8BF4;&#x8FC7;&#xFF0C;&#x4E3A;&#x4E86;&#x7EF4;&#x62A4;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x5E73;&#x8861;&#xFF0C;&#x4E0D;&#x53EA;&#x662F;&#x7ED9;&#x8282;&#x70B9;&#x7740;&#x8272;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x8FD8;&#x6709;&#x66F4;&#x590D;&#x6742;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#x3002;</p>
<p>&#x800C;&#x8FD9;&#x66F4;&#x590D;&#x6742;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#x5C31;&#x662F;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x65CB;&#x8F6C;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x4E2D;&#x65CB;&#x8F6C;&#x64CD;&#x4F5C;&#x53C8;&#x5206;&#x4E3A;&#x5DE6;&#x65CB;&#x3001;&#x53F3;&#x65CB;&#x4E24;&#x79CD;&#xFF1B;</p>
<p>&#x5BF9;&#x4E8E;&#x6811;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x5C31;&#x662F;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x800C;&#x5DF2;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;&#x6216;&#x8005;&#x5220;&#x9664;&#x4E4B;&#x540E;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x53D1;&#x751F;&#x4E86;&#x6539;&#x53D8;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x4E0D;&#x6EE1;&#x8DB3;&#x4EE5;&#x4E0A;&#x7684;5&#x70B9;&#x8981;&#x6C42;&#xFF0C;&#x4E5F;&#x5C31;&#x4E0D;&#x662F;&#x4E00;&#x9897;&#x7EA2;&#x9ED1;&#x6811;&#x4E86;&#x3002;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5BF9;&#x8282;&#x70B9;&#x7684;&#x65CB;&#x8F6C;&#xFF0C;&#x4F7F;&#x5176;&#x91CD;&#x65B0;&#x6210;&#x4E3A;&#x4E00;&#x9897;&#x7EA2;&#x9ED1;&#x6811;&#x3002;</p>
<h6 id="1&#x5DE6;&#x65CB;">1.&#x5DE6;&#x65CB;</h6>
<p>&#x5DE6;&#x65CB;&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#x5C31;&#x662F;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5411;&#x5DE6;&#x65CB;&#x8F6C;&#x5904;&#x7406;&#xFF1B;</p>
<p><img src="../_images/java_treemap_4.png" alt="treemap_4"></p>
<p>&#x5BF9;&#x8282;&#x70B9;X&#x8FDB;&#x884C;&#x5411;&#x5DE6;&#x8FDB;&#x884C;&#x65CB;&#x8F6C;&#xFF0C;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#xFF1B;</p>
<p>&#x8FD9;&#x4E2A;&#x5DE6;&#x65CB;&#x4E2D;&#x7684;&#x5DE6;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x88AB;&#x65CB;&#x8F6C;&#x7684;&#x8282;&#x70B9;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x5DE6;&#x8282;&#x70B9;&#xFF1B;</p>
<p>&#x5176;&#x4E2D;&#xFF0C;&#x5982;&#x679C;Y&#x7684;&#x7684;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#x4E0D;&#x4E3A;null&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x8D4B;&#x503C;X&#x7684;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF1B;</p>
<h6 id="2&#x53F3;&#x65CB;">2.&#x53F3;&#x65CB;</h6>
<p>&#x53F3;&#x65CB;&#xFF0C;&#x540C;&#x7406;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5411;&#x53F3;&#x65CB;&#x8F6C;&#x5904;&#x7406;&#xFF1B;</p>
<p><img src="../_images/java_treemap_5.png" alt="treemap_5"></p>
<p>&#x5BF9;&#x8282;&#x70B9;Y&#x8FDB;&#x884C;&#x5411;&#x53F3;&#x8FDB;&#x884C;&#x65CB;&#x8F6C;&#xFF0C;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF1B;</p>
<p>&#x8FD9;&#x4E2A;&#x53F3;&#x65CB;&#x4E2D;&#x7684;&#x53F3;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x88AB;&#x65CB;&#x8F6C;&#x7684;&#x8282;&#x70B9;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x53F3;&#x8282;&#x70B9;&#xFF1B;</p>
<p>&#x5176;&#x4E2D;&#xFF0C;&#x5982;&#x679C;X&#x8282;&#x70B9;&#x7684;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x4E0D;&#x4E3A;null&#xFF0C;&#x5219;&#x8D4B;&#x503C;&#x7ED9;Y&#x7684;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#xFF1B;</p>
<h6 id="&#x7EA2;&#x9ED1;&#x6811;&#x8282;&#x70B9;&#x6DFB;&#x52A0;">&#x7EA2;&#x9ED1;&#x6811;&#x8282;&#x70B9;&#x6DFB;&#x52A0;</h6>
<p>&#x5728;&#x5C06;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x63D2;&#x5165;&#x5230;&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;&#xFF0C;&#x9996;&#x9009;&#x9700;&#x8981;&#x5C06;&#x7EA2;&#x9ED1;&#x6811;&#x5F53;&#x505A;&#x4E00;&#x9897;&#x4E8C;&#x53C9;&#x6811;&#x67E5;&#x627E;&#x6811;&#x6765;&#x5BF9;&#x5F85;&#xFF0C;&#x5C06;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x4E3A;&#x65B0;&#x63D2;&#x5165;&#x7684;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x7740;&#x8272;&#xFF1B;&#x6700;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x65CB;&#x8F6C;&#x548C;&#x91CD;&#x65B0;&#x7740;&#x8272;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x4FEE;&#x6B63;&#x6811;&#x7684;&#x5E73;&#x8861;&#xFF0C;&#x4F7F;&#x5176;&#x6210;&#x4E3A;&#x4E00;&#x9897;&#x7EA2;&#x9ED1;&#x6811;&#xFF1B;</p>
<p>&#xFF08;1&#xFF09;&#x5BF9;&#x4E8E;&#x7EA2;&#x9ED1;&#x6811;&#x6765;&#x8BF4;&#xFF0C;&#x5176;&#x5E95;&#x5C42;&#x4F9D;&#x65E7;&#x662F;&#x4E00;&#x9897;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x63D2;&#x5165;&#x65B0;&#x7684;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x5B83;&#x4F9D;&#x65E7;&#x4F1A;&#x5BF9;&#x8BE5;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x6BD4;&#x8F83;&#xFF0C;&#x5C06;&#x5176;&#x9001;&#x5165;&#x5230;&#x5DE6;&#x5B50;&#x6811;&#x6216;&#x8005;&#x662F;&#x53F3;&#x5B50;&#x6811;&#x4E2D;&#x3002;</p>
<p>&#xFF08;2&#xFF09;&#x5728;&#x5C06;&#x65B0;&#x8282;&#x70B9;&#x5B89;&#x7F6E;&#x597D;&#x4EE5;&#x540E;&#xFF0C;&#x5728;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x7740;&#x8272;&#x5904;&#x7406;&#xFF0C;&#x5FC5;&#x987B;&#x7740;&#x6210;&#x7EA2;&#x8272;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x51FA;&#xFF0C;&#x5F53;&#x5C06;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x7740;&#x6210;&#x7EA2;&#x8272;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8FDD;&#x80CC;&#x4EE5;&#x4E0A;&#x89C4;&#x8303;&#x7684;&#x6761;&#x6570;&#x6700;&#x5C11;&#xFF0C;&#x6062;&#x590D;&#x5E73;&#x8861;&#x8D77;&#x6765;&#x6700;&#x7701;&#x4E8B;&#xFF0C;&#x5F53;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x4E3A;&#x7EA2;&#x8272;&#x65F6;&#xFF1A;</p>
<pre><code>1.&#x4E0D;&#x4F1A;&#x8FDD;&#x80CC;&#x7B2C;&#x4E94;&#x6761;--&#x9ED1;&#x8272;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x76F8;&#x540C;&#xFF1B;

2.&#x4E0D;&#x4F1A;&#x8FDD;&#x80CC;&#x7B2C;&#x4E00;&#x6761;--&#x8282;&#x70B9;&#x5FC5;&#x987B;&#x662F;&#x7EA2;&#x8272;&#xFF0C;&#x6216;&#x8005;&#x9ED1;&#x8272;&#xFF1B;

3.&#x4E0D;&#x4F1A;&#x8FDD;&#x80CC;&#x7B2C;&#x4E8C;&#x6761;--&#x6839;&#x8282;&#x70B9;&#x662F;&#x9ED1;&#x8272;--&#x5F53;&#x6811;&#x4E2D;&#x5DF2;&#x6709;&#x5143;&#x7D20;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x5E76;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x6839;&#x8282;&#x70B9;&#x7684;&#x989C;&#x8272;&#xFF08;&#x82E5;&#x6811;&#x4E2D;&#x6CA1;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x4F1A;&#x88AB;&#x5F53;&#x6210;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x6B64;&#x65F6;&#x867D;&#x88AB;&#x7740;&#x4E3A;&#x7EA2;&#x8272;&#xFF0C;&#x4F46;&#x5728;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x4E2D;&#x8FD8;&#x4F1A;&#x5BF9;&#x5176;&#x91CD;&#x65B0;&#x7740;&#x8272;&#xFF0C;&#x53D8;&#x6210;&#x9ED1;&#x8272;&#xFF09;&#xFF1B;

4.&#x4E0D;&#x4F1A;&#x8FDD;&#x80CC;&#x7B2C;&#x4E09;&#x6761;--&#x6B64;&#x5904;&#x6240;&#x6307;&#x7684;&#x53F6;&#x8282;&#x70B9;&#x6307;&#x7684;&#x662F;&#x53F6;&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E3A;null&#x7684;&#x5143;&#x7D20;&#xFF1B;

5.&#x53EF;&#x80FD;&#x4F1A;&#x8FDD;&#x80CC;&#x7B2C;&#x56DB;&#x6761;--&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x4E3A;&#x7EA2;&#x8272;&#xFF0C;&#x5176;&#x5B50;&#x8282;&#x70B9;&#x4E00;&#x5B9A;&#x662F;&#x9ED1;&#x8272;&#xFF1B;
</code></pre><p>&#x5982;&#x679C;&#x65B0;&#x63D2;&#x5165;&#x7684;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#x662F;&#x7EA2;&#x8272;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x7B2C;&#x56DB;&#x6761;&#x4E00;&#x5B9A;&#x4F1A;&#x8FDD;&#x80CC;&#xFF0C;&#x6240;&#x4EE5;&#x8BF4;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x65CB;&#x8F6C;&#x5904;&#x7406;&#xFF1B;</p>
<p>&#xFF08;3&#xFF09;&#x51B2;&#x7A81;&#x6765;&#x4E86;&#xFF0C;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#xFF08;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x65CB;&#x8F6C;&#xFF09;</p>
<ul>
<li>&#x5F53;&#x88AB;&#x63D2;&#x5165;&#x8282;&#x70B9;&#x662F;&#x6839;&#x8282;&#x70B9;&#xFF1A;</li>
</ul>
<p>&#x65B0;&#x63D2;&#x5165;&#x7684;&#x8282;&#x70B9;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x9ED1;&#x8272;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#xFF1B;</p>
<ul>
<li>&#x5F53;&#x88AB;&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#x662F;&#x9ED1;&#x8272;&#xFF1A;</li>
</ul>
<p>&#x65B0;&#x63D2;&#x5165;&#x7684;&#x8282;&#x70B9;&#x88AB;&#x7740;&#x6210;&#x7EA2;&#x8272;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x5176;&#x7236;&#x8282;&#x70B9;&#x662F;&#x9ED1;&#x8272;&#xFF0C;&#x5E76;&#x4E0D;&#x5F71;&#x54CD;&#x7EA2;&#x9ED1;&#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x6240;&#x4EE5;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5BF9;&#x5E73;&#x8861;&#x6027;&#x505A;&#x5904;&#x7406;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF1B;</p>
<ul>
<li>&#x5F53;&#x88AB;&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#x662F;&#x7EA2;&#x8272;&#xFF08;&#x6700;&#x590D;&#x6742;&#xFF09;:</li>
</ul>
<p>&#x65B0;&#x63D2;&#x5165;&#x7684;&#x8282;&#x70B9;&#x88AB;&#x7740;&#x6210;&#x7EA2;&#x8272;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x5176;&#x7236;&#x8282;&#x70B9;&#x662F;&#x7EA2;&#x8272;&#xFF0C;&#x6B64;&#x65F6;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x5E73;&#x8861;&#x88AB;&#x6253;&#x7834;&#xFF0C;&#x9700;&#x8981;&#x7279;&#x522B;&#x5904;&#x7406;&#x3002;</p>
<p>e.g.1</p>
<p><img src="../_images/java_treemap_6.png" alt="treemap_6"></p>
<p>e.g.2</p>
<p><img src="../_images/java_treemap_7.png" alt="treemap_7"></p>
<p>e.g.3
<img src="../_images/java_treemap_8.png" alt="treemap_8"></p>
<h4 id="treemap&#x6E90;&#x7801;">TreeMap&#x6E90;&#x7801;</h4>
<h5 id="treemap&#x8282;&#x70B9;&#x7ED3;&#x6784;">TreeMap&#x8282;&#x70B9;&#x7ED3;&#x6784;</h5>
<p>TreeMap&#x5E95;&#x5C42;&#x5B58;&#x50A8;&#x7ED3;&#x6784;&#x4E0E;HashMap&#x57FA;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x4F9D;&#x65E7;&#x662F;Entry&#x5BF9;&#x8C61;&#xFF0C;&#x5B58;&#x50A8;key--value&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x5F15;&#x7528;&#x548C;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x4EE5;&#x53CA;&#x9ED8;&#x8BA4;&#x7684;&#x8282;&#x70B9;&#x989C;&#x8272;&#xFF08;&#x9ED1;&#x8272;&#xFF09;&#xFF1B;</p>
<pre><code>static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    //&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;key:
    K key;

    //&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;value:
    V value;

    //&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#xFF1A;
    java.util.TreeMap.Entry&lt;K,V&gt; left = null;

    //&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF1A;
    java.util.TreeMap.Entry&lt;K,V&gt; right = null;

    //&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1A;
    java.util.TreeMap.Entry&lt;K,V&gt; parent;

    //&#x63D2;&#x5165;&#x8282;&#x70B9;&#x9ED8;&#x8BA4;&#x7684;&#x989C;&#x8272;&#xFF1A;
    boolean color = BLACK;

    //Entry&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;
    Entry(K key, V value, java.util.TreeMap.Entry&lt;K,V&gt; parent) {
        this.key = key;
        this.value = value;
        this.parent = parent;
    }
    public K getKey() {
        return key;
    }
    public V getValue() {
        return value;
    }
    public V setValue(V value) {
        V oldValue = this.value;
        this.value = value;
        return oldValue;
    }
    public boolean equals(Object o) {
        if (!(o instanceof Map.Entry))
            return false;
        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;
        return valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue());
    }
    public int hashCode() {
        int keyHash = (key==null ? 0 : key.hashCode());
        int valueHash = (value==null ? 0 : value.hashCode());
        return keyHash ^ valueHash;
    }
    public String toString() {
        return key + &quot;=&quot; + value;
    }
}
</code></pre><h5 id="treemap&#x6784;&#x9020;&#x51FD;&#x6570;">TreeMap&#x6784;&#x9020;&#x51FD;&#x6570;</h5>
<p>&#x4E0E;HashMap&#x4E0D;&#x540C;&#xFF0C;TreeMap&#x5E95;&#x5C42;&#x4E0D;&#x662F;&#x6570;&#x7EC4;&#x7ED3;&#x6784;&#xFF0C;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x6570;&#x7EC4;&#xFF0C;&#x800C;&#x662F;&#x7528;&#x6839;&#x8282;&#x70B9;root&#x6765;&#x66FF;&#x4EE3;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x6839;&#x8282;&#x70B9;&#x6765;&#x8FDB;&#x884C;&#x7684;&#x3002;</p>
<pre><code>public class TreeMap&lt;K,V&gt;
        extends AbstractMap&lt;K,V&gt;
        implements NavigableMap&lt;K,V&gt;, Cloneable, java.io.Serializable {
    //&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6BD4;&#x8F83;&#x5668;&#xFF1A;
    private final Comparator&lt;? super K&gt; comparator;

    //&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x6839;&#x8282;&#x70B9;&#xFF1A;
    private transient java.util.TreeMap.Entry&lt;K,V&gt; root = null;

    //&#x96C6;&#x5408;&#x5143;&#x7D20;&#x6570;&#x91CF;&#xFF1A;
    private transient int size = 0;

    //&#x5BF9;TreeMap&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x91CF;&#xFF1A;
    private transient int modCount = 0;

    //&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;comparator&#x5C5E;&#x6027;&#x7F6E;&#x4E3A;null
    //&#x4EE3;&#x8868;&#x4F7F;&#x7528;key&#x7684;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6765;&#x7EF4;&#x6301;TreeMap&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x8FD9;&#x91CC;&#x8981;&#x6C42;key&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;
    public TreeMap() {
        comparator = null;
    }

    //&#x5E26;&#x6709;&#x6BD4;&#x8F83;&#x5668;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;&#x521D;&#x59CB;&#x5316;comparator&#x5C5E;&#x6027;&#xFF1B;
    public TreeMap(Comparator&lt;? super K&gt; comparator) {
        this.comparator = comparator;
    }

    //&#x5E26;&#x6709;map&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;
    //&#x540C;&#x6837;&#x6BD4;&#x8F83;&#x5668;comparator&#x4E3A;&#x7A7A;&#xFF0C;&#x4F7F;&#x7528;key&#x7684;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6392;&#x5E8F;
    public TreeMap(Map&lt;? extends K, ? extends V&gt; m) {
        comparator = null;
        putAll(m);
    }

    //&#x5E26;&#x6709;SortedMap&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;:
    //&#x6839;&#x636E;SortedMap&#x7684;&#x6BD4;&#x8F83;&#x5668;&#x6765;&#x6765;&#x7EF4;&#x6301;TreeMap&#x7684;&#x987A;&#x5E8F;
    public TreeMap(SortedMap&lt;K, ? extends V&gt; m) {
        comparator = m.comparator();
        try {
            buildFromSorted(m.size(), m.entrySet().iterator(), null, null);
        } catch (java.io.IOException cannotHappen) {
        } catch (ClassNotFoundException cannotHappen) {
        }
    }
}
</code></pre><h5 id="treemap&#x5143;&#x7D20;&#x6DFB;&#x52A0;">TreeMap&#x5143;&#x7D20;&#x6DFB;&#x52A0;</h5>
<p>&#x5C06;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x7684;key--value&#x63D2;&#x5165;&#x5230;TreeMap&#x5F53;&#x4E2D;&#xFF0C;&#x5728;&#x4E0A;&#x6587;&#x4E2D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x56FE;&#x6587;&#x7684;&#x5F62;&#x5F0F;&#x4ECB;&#x7ECD;&#x4E86;&#x65B0;&#x589E;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x4E0D;&#x660E;&#x767D;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x6E90;&#x7801;&#x8FDB;&#x884C;&#x7406;&#x89E3;&#xFF1B;</p>
<p>&#x9996;&#x5148;&#x627E;&#x5230;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5176;&#x6B21;&#x5728;&#x5224;&#x65AD;TreeMap&#x662F;&#x5426;&#x5904;&#x4E8E;&#x5E73;&#x8861;&#x72B6;&#x6001;&#xFF0C;&#x82E5;&#x4E0D;&#x5E73;&#x8861;&#xFF0C;&#x5219;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x7740;&#x8272;&#x3001;&#x65CB;&#x8F6C;&#x64CD;&#x4F5C;&#xFF1B;</p>
<pre><code>//&#x63D2;&#x5165;key-value:
public V put(K key, V value) {
    //&#x6839;&#x8282;&#x70B9;&#x8D4B;&#x503C;&#x7ED9;t:
    java.util.TreeMap.Entry&lt;K,V&gt; t = root;
    //&#x5982;&#x679C;&#x6839;&#x8282;&#x70B9;&#x4E3A;null&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x6839;&#x8282;&#x70B9;
    if (t == null) {
        //&#x5BF9;&#x4F20;&#x5165;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x82E5;TreeMap&#x6CA1;&#x5B9A;&#x4E49;&#x4E86;Comparator&#xFF0C;&#x5219;&#x9A8C;&#x8BC1;&#x4F20;&#x5165;&#x7684;&#x5143;&#x7D20;&#x662F;&#x5426;&#x5B9E;&#x73B0;&#x4E86;Comparable&#x63A5;&#x53E3;&#xFF1B;
        compare(key, key);
        //&#x6839;&#x8282;&#x70B9;&#x8D4B;&#x503C;&#xFF1A;
        root = new java.util.TreeMap.Entry&lt;&gt;(key, value, null);
        //&#x957F;&#x5EA6;&#x4E3A;1&#xFF1A;
        size = 1;
        //&#x4FEE;&#x6539;&#x6B21;&#x6570;+1
        modCount++;
        //&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF1A;&#x6B64;&#x65F6;&#x6839;&#x8282;&#x70B9;&#x9ED8;&#x8BA4;&#x4E3A;&#x9ED1;&#x8272;
        return null;
    }

    //&#x5982;&#x679C;&#x6839;&#x8282;&#x70B9;&#x4E0D;&#x4E3A;null:
    int cmp;
    java.util.TreeMap.Entry&lt;K,V&gt; parent;
    Comparator&lt;? super K&gt; cpr = comparator;

    //&#x5224;&#x65AD;TreeMap&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;comparator&#x662F;&#x5426;&#x4E3A;null&#xFF1A;
    if (cpr != null) {
        // do while&#x5FAA;&#x73AF;&#xFF0C;&#x67E5;&#x627E;&#x65B0;&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1A;
        do {
            // &#x8BB0;&#x5F55;&#x4E0A;&#x6B21;&#x5FAA;&#x73AF;&#x7684;&#x8282;&#x70B9;t&#xFF0C;&#x9996;&#x5148;&#x5C06;&#x6839;&#x8282;&#x70B9;&#x8D4B;&#x503C;&#x7ED9;parent:
            parent = t;
            //&#x5229;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x7684;&#x6BD4;&#x8F83;&#x65B9;&#x6CD5;&#xFF1A;&#x4F20;&#x5165;&#x7684;key&#x8DDF;&#x5F53;&#x524D;&#x904D;&#x5386;&#x8282;&#x70B9;&#x6BD4;&#x8F83;&#xFF1A;
            cmp = cpr.compare(key, t.key);
            //&#x5224;&#x65AD;&#x7ED3;&#x679C;&#x5C0F;&#x4E8E;0&#xFF0C;&#x5904;&#x4E8E;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x8FB9; 
            if (cmp &lt; 0)
                t = t.left;
            else if (cmp &gt; 0)
            //&#x5224;&#x65AD;&#x7ED3;&#x679C;&#x5927;&#x4E8E;0&#xFF0C;&#x5904;&#x4E8E;&#x7236;&#x8282;&#x70B9;&#x7684;&#x53F3;&#x8FB9; 
                t = t.right;
            else
            //&#x5224;&#x65AD;&#x7ED3;&#x679C;&#x7B49;&#x4E8E;0&#xFF0C;&#x4E3A;&#x5F53;&#x524D;&#x8282;&#x70B9;&#xFF0C;&#x8986;&#x76D6;&#x539F;&#x6709;&#x8282;&#x70B9;&#x5904;&#x7684;value&#xFF1A;
                return t.setValue(value);
        // &#x53EA;&#x6709;&#x5F53;t&#x4E3A;null&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x627E;&#x5230;&#x4E86;&#x65B0;&#x8282;&#x70B9;&#x7684;parent&#x4E86;
        } while (t != null);
    } else {
        //&#x6CA1;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#xFF1A;
        if (key == null)
            //TreeMap&#x4E0D;&#x5141;&#x8BB8;&#x63D2;&#x5165;key&#x4E3A;null&#xFF0C;&#x629B;&#x5F02;&#x5E38;&#xFF1A;
            throw new NullPointerException();
        //&#x5C06;key&#x8F6C;&#x6362;&#x4E3A;Comparable&#x5BF9;&#x8C61;&#xFF1A;&#x82E5;key&#x6CA1;&#x6709;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#xFF0C;&#x6B64;&#x5904;&#x4F1A;&#x62A5;&#x9519;
        Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;
        //&#x540C;&#x4E0A;&#xFF1A;&#x5BFB;&#x627E;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1A;
        do {
            parent = t;
            cmp = k.compareTo(t.key);
            if (cmp &lt; 0)
                t = t.left;
            else if (cmp &gt; 0)
                t = t.right;
            else
                return t.setValue(value);
        } while (t != null);
    }

    //&#x6784;&#x9020;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x5BF9;&#x8C61;&#xFF1A;
    java.util.TreeMap.Entry&lt;K,V&gt; e = new java.util.TreeMap.Entry&lt;&gt;(key, value, parent);

    //&#x6839;&#x636E;&#x4E4B;&#x524D;&#x7684;&#x6BD4;&#x8F83;&#x7ED3;&#x679C;&#xFF0C;&#x5224;&#x65AD;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x662F;&#x5728;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x8FB9;&#x8FD8;&#x662F;&#x53F3;&#x8FB9;
    if (cmp &lt; 0)
        // &#x5982;&#x679C;&#x65B0;&#x8282;&#x70B9;key&#x7684;&#x503C;&#x5C0F;&#x4E8E;&#x7236;&#x8282;&#x70B9;key&#x7684;&#x503C;&#xFF0C;&#x5219;&#x63D2;&#x5728;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x4FA7;
        parent.left = e;
    else
        // &#x5982;&#x679C;&#x65B0;&#x8282;&#x70B9;key&#x7684;&#x503C;&#x5927;&#x4E8E;&#x7236;&#x8282;&#x70B9;key&#x7684;&#x503C;&#xFF0C;&#x5219;&#x63D2;&#x5728;&#x7236;&#x8282;&#x70B9;&#x7684;&#x53F3;&#x4FA7;
        parent.right = e;
    //&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;&#x63D2;&#x5165;&#x65B0;&#x7684;&#x8282;&#x70B9;&#x540E;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x7EA2;&#x9ED1;&#x6811;&#x5E73;&#x8861;&#xFF0C;&#x5BF9;&#x7EA2;&#x9ED1;&#x6811;&#x8FDB;&#x884C;&#x8C03;&#x6574;
    fixAfterInsertion(e);
    size++;
    modCount++;
    return null;
}

//&#x5BF9;&#x63D2;&#x5165;&#x7684;&#x5143;&#x7D20;&#x6BD4;&#x8F83;&#xFF1A;&#x82E5;TreeMap&#x6CA1;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#xFF0C;&#x5219;&#x8C03;&#x7528;&#x8C03;&#x7528;&#x9ED8;&#x8BA4;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6BD4;&#x8F83;&#xFF0C;&#x8981;&#x6C42;&#x5143;&#x7D20;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#xFF1B;
//&#x82E5;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#xFF0C;&#x5219;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF1B;
final int compare(Object k1, Object k2) {
    return comparator==null ? ((Comparable&lt;? super K&gt;)k1).compareTo((K)k2)
            : comparator.compare((K)k1, (K)k2);
}

//&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;&#x7EF4;&#x62A4;TreeMap&#x5E73;&#x8861;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#xFF1B;&#xFF08;&#x56DE;&#x987E;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x6587;&#x63CF;&#x8FF0;&#xFF09;
private void fixAfterInsertion(java.util.TreeMap.Entry&lt;K,V&gt; x) {
    //&#x9996;&#x5148;&#x5C06;&#x65B0;&#x63D2;&#x5165;&#x8282;&#x70B9;&#x7684;&#x989C;&#x8272;&#x8BBE;&#x7F6E;&#x4E3A;&#x7EA2;&#x8272;
    x.color = RED;
    //TreeMap&#x662F;&#x5426;&#x5E73;&#x8861;&#x7684;&#x91CD;&#x8981;&#x5224;&#x65AD;&#xFF0C;&#x5F53;&#x4E0D;&#x5728;&#x6EE1;&#x8DB3;&#x5FAA;&#x73AF;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x4EE3;&#x8868;&#x6811;&#x5DF2;&#x7ECF;&#x5E73;&#x8861;&#xFF1B;
    //x&#x4E0D;&#x4E3A;null&#xFF0C;&#x4E0D;&#x662F;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x7236;&#x8282;&#x70B9;&#x662F;&#x7EA2;&#x8272;&#xFF08;&#x4E09;&#x8005;&#x5747;&#x6EE1;&#x8DB3;&#x624D;&#x8FDB;&#x884C;&#x7EF4;&#x62A4;&#xFF09;&#xFF1A;
    while (x != null &amp;&amp; x != root &amp;&amp; x.parent.color == RED) {
        //&#x8282;&#x70B9;x&#x7684;&#x7236;&#x8282;&#x70B9; &#x662F; x&#x7956;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x5B69;&#x5B50;&#xFF1A;
        if (parentOf(x) == leftOf(parentOf(parentOf(x)))) {
            //&#x83B7;&#x53D6;x&#x8282;&#x70B9;&#x7684;&#x53D4;&#x53D4;&#x8282;&#x70B9;y:
            java.util.TreeMap.Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));

            //&#x53D4;&#x53D4;&#x8282;&#x70B9;y&#x662F;&#x7EA2;&#x8272;&#xFF1A;
            if (colorOf(y) == RED) {
                //&#x5C06;x&#x7684;&#x7236;&#x8282;&#x70B9;&#x8BBE;&#x7F6E;&#x9ED1;&#x8272;&#xFF1A;
                setColor(parentOf(x), BLACK);  
                //&#x5C06;x&#x7684;&#x53D4;&#x53D4;&#x8282;&#x70B9;y&#x8BBE;&#x7F6E;&#x6210;&#x9ED1;&#x8272;&#xFF1A;
                setColor(y, BLACK);
                //&#x5C06;x&#x7684;&#x7956;&#x7236;&#x8282;&#x70B9;&#x8BBE;&#x7F6E;&#x6210;&#x7EA2;&#x8272;&#xFF1A;
                setColor(parentOf(parentOf(x)), RED);
                //&#x5C06;x&#x8282;&#x70B9;&#x7684;&#x7956;&#x7236;&#x8282;&#x70B9;&#x8BBE;&#x7F6E;&#x6210;x(&#x8FDB;&#x5165;&#x4E86;&#x4E0B;&#x4E00;&#x6B21;&#x5224;&#x65AD;)&#xFF1A;
                x = parentOf(parentOf(x));
            } else {
                 //&#x53D4;&#x53D4;&#x8282;&#x70B9;y&#x4E0D;&#x4E3A;&#x7EA2;&#x8272;&#xFF1A;
                //x&#x4E3A;&#x5176;&#x7236;&#x8282;&#x70B9;&#x7684;&#x53F3;&#x5B69;&#x5B50;&#xFF1A;
                if (x == rightOf(parentOf(x))) {
                    x = parentOf(x);
                    rotateLeft(x);
                }
                setColor(parentOf(x), BLACK);
                setColor(parentOf(parentOf(x)), RED);
                //&#x53F3;&#x65CB;&#xFF1A;
                rotateRight(parentOf(parentOf(x)));
            }
        } else {
            //&#x8282;&#x70B9;x&#x7684;&#x7236;&#x8282;&#x70B9; &#x662F;x&#x7956;&#x7236;&#x8282;&#x70B9;&#x7684;&#x53F3;&#x5B69;&#x5B50;&#xFF1A;

            //&#x83B7;&#x53D6;x&#x8282;&#x70B9;&#x7684;&#x53D4;&#x53D4;&#x8282;&#x70B9;y:
            java.util.TreeMap.Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));
            //&#x5224;&#x65AD;&#x53D4;&#x53D4;&#x8282;&#x70B9;y&#x662F;&#x5426;&#x4E3A;&#x7EA2;&#x8272;&#xFF1A;
            if (colorOf(y) == RED) {
                setColor(parentOf(x), BLACK);12
                setColor(y, BLACK);5
                setColor(parentOf(parentOf(x)), RED);10
                x = parentOf(parentOf(x));
            } else {
                if (x == leftOf(parentOf(x))) {
                    x = parentOf(x);
                    rotateRight(x);
                }
                setColor(parentOf(x), BLACK);
                setColor(parentOf(parentOf(x)), RED);
                //&#x5DE6;&#x65CB;&#xFF1A;
                rotateLeft(parentOf(parentOf(x)));
            }
        }
    }
    root.color = BLACK;
}

//&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x7684;&#x989C;&#x8272;&#xFF1A;
private static &lt;K,V&gt; boolean colorOf(java.util.TreeMap.Entry&lt;K,V&gt; p) {
    //&#x8282;&#x70B9;&#x4E3A;null,&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;&#x9ED1;&#x8272;&#xFF1B;
    return (p == null ? BLACK : p.color);
}

//&#x83B7;&#x53D6;p&#x8282;&#x70B9;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1A;
private static &lt;K,V&gt; java.util.TreeMap.Entry&lt;K,V&gt; parentOf(java.util.TreeMap.Entry&lt;K,V&gt; p) {
    return (p == null ? null: p.parent);
}

//&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x7740;&#x8272;&#xFF0C;TreeMap&#x4F7F;&#x7528;&#x4E86;boolean&#x7C7B;&#x578B;&#x6765;&#x4EE3;&#x8868;&#x989C;&#x8272;&#xFF08;true&#x4E3A;&#x7EA2;&#x8272;&#xFF0C;false&#x4E3A;&#x9ED1;&#x8272;&#xFF09;
private static &lt;K,V&gt; void setColor(java.util.TreeMap.Entry&lt;K,V&gt; p, boolean c){
    if (p != null)
        p.color = c;
}

//&#x83B7;&#x53D6;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#xFF1A;
private static &lt;K,V&gt; java.util.TreeMap.Entry&lt;K,V&gt; leftOf(java.util.TreeMap.Entry&lt;K,V&gt; p) {
    return (p == null) ? null: p.left;
}

//&#x83B7;&#x53D6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF1A;
private static &lt;K,V&gt; java.util.TreeMap.Entry&lt;K,V&gt; rightOf(java.util.TreeMap.Entry&lt;K,V&gt; p) {
    return (p == null) ? null: p.right;
}

//&#x5DE6;&#x65CB;&#xFF1A;
private void rotateLeft(java.util.TreeMap.Entry&lt;K,V&gt; p) {
    if (p != null) {
        java.util.TreeMap.Entry&lt;K,V&gt; r = p.right;
        p.right = r.left;
        if (r.left != null)
            r.left.parent = p;
        r.parent = p.parent;
        if (p.parent == null)
            root = r;
        else if (p.parent.left == p)
            p.parent.left = r;
        else
            p.parent.right = r;
        r.left = p;
        p.parent = r;
    }
}

//&#x53F3;&#x65CB;&#xFF1A;
private void rotateRight(java.util.TreeMap.Entry&lt;K,V&gt; p) {
    if (p != null) {
        java.util.TreeMap.Entry&lt;K,V&gt; l = p.left;
        p.left = l.right;
        if (l.right != null) l.right.parent = p;
        l.parent = p.parent;
        if (p.parent == null)
            root = l;
        else if (p.parent.right == p)
            p.parent.right = l;
        else p.parent.left = l;
        l.right = p;
        p.parent = l;
    }
}
</code></pre><h5 id="treemap&#x5143;&#x7D20;&#x83B7;&#x53D6;">TreeMap&#x5143;&#x7D20;&#x83B7;&#x53D6;</h5>
<p>TreeMap&#x5E95;&#x5C42;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x7EA2;&#x9ED1;&#x6811;&#x672C;&#x8D28;&#x662F;&#x4E00;&#x9897;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x65B9;&#x9762;&#xFF0C;&#x4F7F;&#x7528;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x7B97;&#x6CD5;&#x6027;&#x80FD;&#x6700;&#x9AD8;&#xFF1B;</p>
<pre><code>//&#x901A;&#x8FC7;key&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;value&#xFF1A;
public V get(Object key) {
    //&#x83B7;&#x53D6;TreeMap&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x8282;&#x70B9;&#xFF1A;
    java.util.TreeMap.Entry&lt;K,V&gt; p = getEntry(key);
    //&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF1A;
    return (p==null ? null : p.value);
}

//&#x901A;&#x8FC7;key&#x83B7;&#x53D6;Entry&#x5BF9;&#x8C61;&#xFF1A;
final java.util.TreeMap.Entry&lt;K,V&gt; getEntry(Object key) {
    //TreeMap&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x5BF9;&#x8C61;&#x6765;&#x83B7;&#x53D6;&#x8282;&#x70B9;&#xFF1A;
    if (comparator != null)
        //&#x83B7;&#x53D6;&#x8282;&#x70B9;&#xFF1A;
        return getEntryUsingComparator(key);

    //&#x5982;&#x679C;key&#x4E3A;null&#xFF0C;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;TreeMap&#x4E2D;&#x4E0D;&#x5141;&#x8BB8;&#x5B58;&#x5728;&#x4E3A;null&#x7684;key&#xFF1A;
    if (key == null)
        throw new NullPointerException();

    //&#x5C06;&#x4F20;&#x5165;&#x7684;key&#x8F6C;&#x6362;&#x6210;Comparable&#x7C7B;&#x578B;&#xFF0C;&#x4F20;&#x5165;&#x7684;key&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;
    Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;
    //&#x83B7;&#x53D6;&#x6839;&#x8282;&#x70B9;&#xFF1A;
    java.util.TreeMap.Entry&lt;K,V&gt; p = root;

    // &#x4F7F;&#x7528;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x65B9;&#x5F0F;&#xFF0C;&#x9996;&#x5148;&#x5224;&#x65AD;&#x4F20;&#x5165;&#x7684;key&#x4E0E;&#x6839;&#x8282;&#x70B9;&#x7684;key&#x54EA;&#x4E2A;&#x5927;&#xFF1A;
    while (p != null) {
        //&#x4F20;&#x5165;&#x7684;key&#x4E0E;p&#x8282;&#x70B9;&#x7684;key&#x8FDB;&#x884C;&#x5927;&#x5C0F;&#x6BD4;&#x8F83;&#xFF1A;
        int cmp = k.compareTo(p.key);
        //&#x4F20;&#x5165;&#x7684;key&#x5C0F;&#x4E8E;p&#x8282;&#x70B9;&#x7684;key,&#x5219;&#x4ECE;&#x6839;&#x7684;&#x5DE6;&#x5B50;&#x6811;&#x4E2D;&#x641C;&#x7D22;&#xFF1A;
        if (cmp &lt; 0)
            //&#x5DE6;&#x8FB9;
            p = p.left;
        else if (cmp &gt; 0)
            //&#x4F20;&#x5165;&#x7684;key&#x5927;&#x4E8E;p&#x8282;&#x70B9;&#x7684;key,&#x5219;&#x4ECE;&#x6839;&#x7684;&#x53F3;&#x8FB9;&#x5B50;&#x6811;&#x4E2D;&#x641C;&#x7D22;&#xFF1A;
            //&#x53F3;&#x8FB9;
            p = p.right;
        else
            //&#x4F20;&#x5165;&#x7684;key&#x7B49;&#x4E8E;p&#x8282;&#x70B9;&#x7684;key,&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x8282;&#x70B9;&#xFF1A;
            return p;
    }
    //&#x4EE5;&#x4E0A;&#x5FAA;&#x73AF;&#x6CA1;&#x6709;&#x627E;&#x5BF9;&#x5BF9;&#x5E94;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;null&#xFF1A;
    return null;
}

//&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5668;&#x8FDB;&#x884C;&#x5143;&#x7D20;&#x6BD4;&#x8F83;&#xFF0C;&#x83B7;&#x53D6;&#x5BF9;&#x8282;&#x70B9;&#xFF1A;
final java.util.TreeMap.Entry&lt;K,V&gt; getEntryUsingComparator(Object key) {
    K k = (K) key;
    Comparator&lt;? super K&gt; cpr = comparator;
    if (cpr != null) {
        java.util.TreeMap.Entry&lt;K,V&gt; p = root;
        while (p != null) {
            int cmp = cpr.compare(k, p.key);
            if (cmp &lt; 0)
                p = p.left;
            else if (cmp &gt; 0)
                p = p.right;
            else
                return p;
        }
    }
    return null;
}
</code></pre><h4 id="&#x7528;treemap&#x5B9E;&#x73B0;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;">&#x7528;TreeMap&#x5B9E;&#x73B0;&#x4E00;&#x81F4;&#x6027;Hash&#x7B97;&#x6CD5;</h4>
<p>&#x6700;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x573A;&#x666F;&#x4FBF;&#x662F;&#x7F13;&#x5B58;&#xFF0C;&#x5F53;&#x5355;&#x673A;&#x7F13;&#x5B58;&#x91CF;&#x8FC7;&#x5927;&#x65F6;&#x9700;&#x8981;&#x5206;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8FDB;&#x884C; hash &#x53D6;&#x6A21;&#x8FD0;&#x7B97;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x53BB;&#xFF0C;&#x6BD4;&#x5982; index = hash(ip) % N&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5F53;&#x589E;&#x52A0;&#x6216;&#x8005;&#x51CF;&#x5C11;&#x8282;&#x70B9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7531;&#x4E8E;&#x4E0A;&#x8FF0;&#x516C;&#x5F0F;&#x7684; N &#x503C;&#x662F;&#x6709;&#x53D8;&#x5316;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#xFF0C;&#x751A;&#x81F3;&#x8BF4;&#x6240;&#x6709;&#x7684;&#x7F13;&#x5B58;&#x90FD;&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x4FBF;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x6027; hash &#x7B97;&#x6CD5;&#x3002;</p>
<h5 id="1&#x7B80;&#x5355;&#x7684;&#x4E00;&#x81F4;&#x6027;-hash">1.&#x7B80;&#x5355;&#x7684;&#x4E00;&#x81F4;&#x6027; Hash</h5>
<p>&#x5173;&#x4E8E;&#x4E00;&#x81F4;&#x6027; Hash &#x7B97;&#x6CD5;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x62BD;&#x8C61;&#x63CF;&#x8FF0;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5706;&#x73AF;&#xFF0C;&#x7136;&#x540E;&#x4E0A;&#x9762;&#x5747;&#x5300;&#x5E03;&#x5C40;&#x4E86; 2^32 &#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x6BD4;&#x5982; [0,1,2,4,8...]&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6211;&#x4EEC;&#x7684;&#x673A;&#x5668;&#x8282;&#x70B9;&#x6563;&#x5217;&#x5728;&#x8FD9;&#x4E2A;&#x5706;&#x73AF;&#x4E0A;&#xFF0C;&#x81F3;&#x4E8E;&#x6563;&#x5217;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; hash(ip) &#x6216;&#x8005; hash(&#x57DF;&#x540D;)&#x3002;</p>
<p><img src="../_images/java_treemap_9.png" alt="treemap_9"></p>
<p>hash &#x73AF;
&#x5F53;&#x5BFB;&#x627E;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x76EE;&#x6807;&#x6570;&#x636E;&#x7684;key&#x6563;&#x5217;&#x5728;&#x8FD9;&#x4E2A;&#x73AF;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x987A;&#x65F6;&#x9488;&#x8BFB;&#x53D6;&#x6700;&#x8FD1;&#x7684;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x8282;&#x70B9;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5982;&#x4E0B;&#x56FE;&#x7684;&#x7B80;&#x5355;&#x7248;&#x672C;&#xFF0C;&#x5047;&#x5982;&#x603B;&#x5171;&#x6709;3&#x4E2A;&#x6570;&#x636E;&#x8282;&#x70B9;&#xFF08;A&#x3001;B&#x3001;C&#xFF09;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x67E5;&#x627E;&#x7684;&#x6570;&#x636E;&#x7684;key&#x7ECF;&#x8BA1;&#x7B97;&#x5728;A&#x548C;B&#x4E4B;&#x95F4;&#xFF0C;&#x5219;&#x987A;&#x65F6;&#x9488;&#x627E;&#xFF0C;&#x4FBF;&#x627E;&#x5230;&#x4E86;&#x8282;&#x70B9;B&#x3002;</p>
<p><img src="../_images/java_treemap_10.png" alt="treemap_10"></p>
<p>&#x6570;&#x636E;&#x67E5;&#x627E;
&#x6700;&#x5927;&#x7684;&#x4F18;&#x70B9;&#x662F;&#xFF1A;&#x8FD8;&#x662F;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x6848;&#x4F8B;&#x4E3A;&#x80CC;&#x666F;&#xFF0C;&#x5F53;&#x8282;&#x70B9;B&#x5B95;&#x4E86;&#x4E4B;&#x540E;&#xFF0C;&#x987A;&#x65F6;&#x9488;&#x4FBF;&#x627E;&#x5230;&#x4E86;C&#xFF0C;&#x8FD9;&#x6837;&#xFF0C;&#x5F71;&#x54CD;&#x7684;&#x8303;&#x56F4;&#x4EC5;&#x4EC5;&#x662F;A&#x548C;B&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x662F;&#x4E0D;&#x5F71;&#x54CD;&#x7684;&#x3002;</p>
<h5 id="2&#x865A;&#x62DF;&#x8282;&#x70B9;">2.&#x865A;&#x62DF;&#x8282;&#x70B9;</h5>
<p>&#x4F46;&#x662F;&#x5728;&#x6563;&#x5217;&#x6570;&#x636E;&#x8282;&#x70B9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7D27;&#x51D1;&#x6027;&#x4F1A;&#x53D7; hash &#x7B97;&#x6CD5;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x6BD4;&#x5982;A&#x3001;B&#x3001;C&#x4E09;&#x4E2A;&#x6570;&#x636E;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5728; hash &#x8BA1;&#x7B97;&#x540E;&#x6563;&#x5217;&#x5728; 1&#x3001;2&#x3001;4&#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x56E0;&#x4E3A;&#x592A;&#x5BC6;&#x96C6;&#x800C;&#x5931;&#x53BB;&#x5E73;&#x8861;&#x6027;&#x3002;&#x6BD4;&#x5982;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x8981;&#x67E5;&#x627E;&#x7684;&#x6570;&#x636E;&#x7684;key&#x7ECF;&#x8FC7; hash &#x8FD0;&#x7B97;&#x4E4B;&#x540E;&#xFF0C;&#x5927;&#x6982;&#x7387;&#x662F;&#x51FA;&#x73B0;&#x5728;4&#x548C;1&#x4E4B;&#x95F4;&#x7684;&#xFF0C;&#x5373;&#x5728;C&#x4E4B;&#x540E;&#xFF0C;&#x90A3;&#x6837;&#x7684;&#x8BDD;&#x987A;&#x65F6;&#x9488;&#x67E5;&#x627E;&#x4FBF;&#x4F1A;&#x627E;&#x5230;A&#xFF0C;&#x90A3;&#x4E48;A&#x670D;&#x52A1;&#x5668;&#x4FBF;&#x627F;&#x8F7D;&#x4E86;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x8D1F;&#x8F7D;&#xFF0C;&#x8FD9;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x8BE5;&#x7B97;&#x6CD5;&#x7684;&#x610F;&#x4E49;&#x3002;</p>
<p><img src="../_images/java_treemap_11.png" alt="treemap_11"></p>
<p>&#x6B64;&#x65F6;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x4FBF;&#x51FA;&#x73B0;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x4E0A;&#x8FF0;&#x7684;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5404;&#x865A;&#x62DF;&#x5206;&#x88C2;&#x51FA;1&#x5404;&#x865A;&#x62DF;&#x8282;&#x70B9;&#xFF08;A1&#x3001;B1&#x3001;C1&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x6837;&#x4FBF;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x89E3;&#x51B3;&#x4E00;&#x81F4;&#x6027;hash&#x7684;&#x5E73;&#x8861;&#x6027;&#x95EE;&#x9898;&#x3002;</p>
<p><img src="../_images/java_treemap_12.png" alt="treemap_12"></p>
<h5 id="treemap&#x7248;&#x5B9E;&#x73B0;">TreeMap&#x7248;&#x5B9E;&#x73B0;</h5>
<p>&#x2460; &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; TreeMap &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4F18;&#x70B9;&#x662F;&#x8BE5;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x6709;&#x5E8F;&#x7684;&#xFF0C;&#x65E0;&#x9700;&#x518D;&#x6392;&#x5E8F;&#xFF0C;&#x800C;&#x4E14;&#x8BE5;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x6709;&#x4E2A;&#x51FD;&#x6570;&#x53EB; tailMap&#xFF0C;&#x4F5C;&#x7528;&#x662F;&#x83B7;&#x53D6;&#x6BD4;&#x6307;&#x5B9A;&#x7684; key &#x5927;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5408;&#xFF1B;
&#x2461; hash &#x7B97;&#x6CD5;&#xFF1A;&#x6B64;&#x5904;&#x6211;&#x4EEC;&#x4F7F;&#x7528; FNV1_32_HASH &#x7B97;&#x6CD5;&#xFF0C;&#x8BE5;&#x7B97;&#x6CD5;&#x8BC1;&#x5B9E;&#x4E0B;&#x6765;&#x6563;&#x5217;&#x5206;&#x5E03;&#x6BD4;&#x8F83;&#x5747;&#x5300;&#xFF0C;hash &#x78B0;&#x649E;&#x5C1A;&#x4E14; ok&#xFF1B;
&#x2462; &#x865A;&#x62DF;&#x8282;&#x70B9;&#xFF1A;&#x6211;&#x4EEC;&#x6682;&#x4E14;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x9501;&#x88C2;&#x53D8;&#x7684;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x6570;&#x91CF;&#x4E3A;10&#x3002;</p>
<pre><code>import java.util.SortedMap;
import java.util.TreeMap;

/**
 * @ClassName: TreeMapConsistentHash
 * @Description: treeMap &#x5B9E;&#x73B0;&#x7684;&#x8FDB;&#x5316;&#x7248;&#x4E00;&#x81F4;&#x6027;hash
 * @Author: Jet.Chen
 * @Date: 2019/3/20 20:44
 * @Version: 1.0
 **/
public class TreeMapConsistentHash {
    /**
     * &#x4E3B;&#x8981;&#x6570;&#x636E;&#x7ED3;&#x6784;
     */
    private TreeMap&lt;Long, String&gt; treeMap = new TreeMap&lt;&gt;();

    /**
     * &#x81EA;&#x5B9A;&#x4E49;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x6570;&#x91CF;
     */
    private static final int VIRTUAL_NODE_NUM = 10;

    /**
     * &#x666E;&#x901A;&#x7684;&#x589E;&#x52A0;&#x8282;&#x70B9;
     */
    @Deprecated
    public void add (String key, String value) {
        long hash = hash(key);
        treeMap.put(hash, value);
    }

    /**
     * &#x5B58;&#x5728;&#x865A;&#x62DF;&#x8282;&#x70B9;
     */
    public void add4VirtualNode(String key, String value) {
        for (int i = 0; i &lt; VIRTUAL_NODE_NUM; i++) {
            long hash = hash(key + &quot;&amp;&amp;VIR&quot; + i);
            treeMap.put(hash, value);
        }
        treeMap.put(hash(key), value);
    }

    /**
     * &#x8BFB;&#x53D6;&#x8282;&#x70B9;&#x503C;
     * @param key
     * @return
     */
    public String getNode(String key) {
        long hash = hash(key);
        SortedMap&lt;Long, String&gt; sortedMap = treeMap.tailMap(hash);
        String value;
        if (!sortedMap.isEmpty()) {
            value = sortedMap.get(sortedMap.firstKey());
        } else {
            value = treeMap.firstEntry().getValue();
        }
        return value;
    }

    /**
     * &#x4F7F;&#x7528;&#x7684;&#x662F; FNV1_32_HASH
     */
    public long hash(String key) {
        final int p = 16777619;
        int hash = (int)2166136261L;
        for(int i = 0; i &lt; key.length(); i++) {
            hash = (hash ^ key.charAt(i)) * p;
        }
        hash += hash &lt;&lt; 13;
        hash ^= hash &gt;&gt; 7;
        hash += hash &lt;&lt; 3;
        hash ^= hash &gt;&gt; 17;
        hash += hash &lt;&lt; 5;

        // &#x5982;&#x679C;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x503C;&#x4E3A;&#x8D1F;&#x6570;&#x5219;&#x53D6;&#x5176;&#x7EDD;&#x5BF9;&#x503C;
        if (hash &lt; 0) hash = Math.abs(hash);
        return hash;
    }
}
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../DB/transaction.html#利用explain分析sql语句的性能" class="navigation navigation-prev " aria-label="Previous page: 利用EXPLAIN分析sql语句的性能">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="collections.html#1arraylist与linkedlist的实现和区别" class="navigation navigation-next " aria-label="Next page: 1.ArrayList与LinkedList的实现和区别">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"JAVA 集合","level":"1.5","depth":1,"next":{"title":"1.ArrayList与LinkedList的实现和区别","level":"1.5.1","depth":2,"anchor":"#1arraylist与linkedlist的实现和区别","path":"JAVA/collections.md","ref":"JAVA/collections.md#1arraylist与linkedlist的实现和区别","articles":[]},"previous":{"title":"利用EXPLAIN分析sql语句的性能","level":"1.4.6","depth":2,"anchor":"#利用explain分析sql语句的性能","path":"DB/transaction.md","ref":"DB/transaction.md#利用explain分析sql语句的性能","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["chapter-fold","livereload"],"pluginsConfig":{"chapter-fold":{},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"JAVA/collections.md","mtime":"2021-02-26T10:12:12.458Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-02T07:44:47.109Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

